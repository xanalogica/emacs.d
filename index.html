<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-05-27 Tue 09:28 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Modular Emacs Configuration Loader 80-project-vc</title>
<meta name="author" content="Jeffrey Rush" />
<meta name="description" content="Tangle + load functionally organized config files
???" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="webstyling/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="webstyling/src/readtheorg_theme/css/readtheorg.css"/>
<link rel="stylesheet" type="text/css" href="webstyling/src/custom/css/default.css"/>
<script type="text/javascript" src="webstyling/src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="webstyling/src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="webstyling/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="webstyling/src/readtheorg_theme/js/readtheorg.js"></script>
<script> var HS_STARTUP_FOLDED = true; </script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Modular Emacs Configuration Loader 80-project-vc
<br />
<span class="subtitle">Structured Using Org-Babel</span>
</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org0eeeae8">1. Phase 00 – Core system and helper macros</a>
<ul>
<li><a href="#org53d128c">1.1. Core Boot Configuration</a></li>
</ul>
</li>
<li><a href="#orgc63ac28">2. Insure I'm Running an Acceptable Version of Org</a></li>
<li><a href="#orga9a727d">3. Insure All My Variable Blocks in My Org Files Are Properly Terminated</a>
<ul>
<li><a href="#org0196666">3.1. Foundational Security for Emacs</a></li>
</ul>
</li>
<li><a href="#org4e869cd">4. Auth Sources</a></li>
<li><a href="#orgb3cad6b">5. GPG/epa Configuration</a></li>
<li><a href="#orgaf98c39">6. Load Optional Secrets Files</a></li>
<li><a href="#org04df8c8">7. Optional Vault/GPG agent settings</a></li>
<li><a href="#org6c5eed7">8. Disabling Backups of Files Containing Encrypted Content</a></li>
<li><a href="#orgb4e677f">9. gnutls – TLS security for downloading packages or HTTPS communication</a></li>
<li><a href="#orgcd8b470">10. Phase 10 – UI and input system</a></li>
<li><a href="#org64fd05a">11. Choice of Font for the Emacs Work Area</a>
<ul>
<li><a href="#orged4714c">11.1. Install PragmataPro Font onto Ubuntu Linux</a></li>
<li><a href="#orge09ede4">11.2. Enable Emacs to Use It for Normal Text Display</a></li>
<li><a href="#orgd117c92">11.3. Enable Linux Shell to Use It for Normal Text Display</a></li>
<li><a href="#org691efb2">11.4. Enable LaTeX to Use It for Formatted Text</a></li>
<li><a href="#orgfc20fa3">11.5. Enable PragmataPro Ligature  https://github.com/lumiknit/emacs-pragmatapro-ligatures</a></li>
<li><a href="#org3b4469d">11.6. Alternate Automatic Text Replacement with Symbols DISABLED</a></li>
</ul>
</li>
<li><a href="#org7d833e9">12. Faces for Emacs Text            <code>faces vs colors vs themes</code></a>
<ul>
<li><a href="#orge8a6f9b">12.1. org-mode face elements</a>
<ul>
<li><a href="#orgaccf768">12.1.1. Visual Test of Typefaces in Org-Mode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcf90f3e">13. SHOULD DISPLAY of BELL GO IN HERE ???  OR IN 10-ui-frame-appearance.org ???</a></li>
<li><a href="#orgf39c1e5">14. Themes</a></li>
<li><a href="#orgb5093df">15. UI Performance Tweaks</a>
<ul>
<li><a href="#org3a9524f">15.1. Top Bar of Emacs Screen</a></li>
<li><a href="#orgf7ab62d">15.2. Along the Left/Right Sides of the Emacs Screen</a></li>
</ul>
</li>
<li><a href="#orgc1e61ad">16. Preferred UI Behavior</a>
<ul>
<li><a href="#org8635eef">16.1. Make the "Active Region" Visible</a></li>
<li><a href="#orgcfd3385">16.2. Make Trailing Whitespace Visible</a></li>
<li><a href="#orgf9ce316">16.3. Highlight the Entire Current Line</a></li>
</ul>
</li>
<li><a href="#orgddb4bb5">17. Bell Indicator</a>
<ul>
<li><a href="#org15365b5">17.1. Lowest Level of Control</a></li>
<li><a href="#org4814f44">17.2. High Level of Control</a></li>
<li><a href="#org089c6e9">17.3. Along the Bottom, in the Mode Line</a>
<ul>
<li><a href="#orgc5f5a2a">17.3.1. Defining My Own Face and a Property Clause to Conditionally Display It</a></li>
<li><a href="#org7f85935">17.3.2. Define My Custom Set of Widgets to Display on the Modeline</a></li>
<li><a href="#orge6ba708">17.3.3. Define My Desired Appearance of Selected Modeline Widgets</a></li>
</ul>
</li>
<li><a href="#org91c8f4b">17.4. Along the Bottom, inside the Minibuffer</a></li>
</ul>
</li>
<li><a href="#orgb58daf9">18. Set Up My Mouse-Wheel</a>
<ul>
<li><a href="#org20f74ee">18.1. Support for Pixel-Level Scrolling Built into Emacs 29+</a></li>
<li><a href="#orgc9e01b9">18.2. Add In the `good-scroll` Package for Inertia and Speed Up/Down Scrolling</a></li>
</ul>
</li>
<li><a href="#orgcb955a3">19. Emacs's Mouse-Wheel Variables</a></li>
<li><a href="#org8806a33">20. Phase 20 – Global behavior and editing</a>
<ul>
<li><a href="#org141ced5">20.1. Keybindings - Global</a></li>
</ul>
</li>
<li><a href="#org2db03d7">21. Mapping New Keys GLOBALLY</a>
<ul>
<li><a href="#org5427711">21.1. Keys to Horizontally Scroll</a></li>
<li><a href="#org5c2416b">21.2. My Global Key Settings</a>
<ul>
<li><a href="#org3facb7f">21.2.1. Pop Up a Reference Sheet for My Settings</a></li>
<li><a href="#org632168b">21.2.2. capturing new content</a></li>
<li><a href="#orgacc31d0">21.2.3. Hotkey for Quickly Reloading This Configuration After Changes</a></li>
<li><a href="#org93b5df0">21.2.4. Useful Function to Rename the Current File and Buffer</a></li>
</ul>
</li>
<li><a href="#orgaab82ca">21.3. Auto-Complete ?</a></li>
<li><a href="#org9686713">21.4. Templates ?</a></li>
</ul>
</li>
<li><a href="#org78fbb8a">22. Global Key Mappings</a></li>
<li><a href="#orgcf04a3f">23. Keystroke Input</a>
<ul>
<li><a href="#orga10e13c">23.1. Of Non-Standard Characters</a></li>
<li><a href="#orga57108e">23.2. Of Whitespace</a></li>
<li><a href="#org25c6b40">23.3. Of Recorded Keystrokes</a></li>
</ul>
</li>
<li><a href="#orgcb7f639">24. Navigation</a>
<ul>
<li><a href="#org632948d">24.1. Between Buffers</a></li>
<li><a href="#org2da4034">24.2. Within a Buffer</a>
<ul>
<li><a href="#org1e66fd5">24.2.1. Jumping to a Place</a></li>
<li><a href="#org47b0a84">24.2.2. Scrolling Behavior</a></li>
</ul>
</li>
<li><a href="#org6a98911">24.3. Among Windows/Frames</a></li>
<li><a href="#orga3cb36f">24.4. Across Content: bookmarks and links</a>
<ul>
<li><a href="#org88900be">24.4.1. Org-Mode Bookmarks</a></li>
<li><a href="#orgcc73b20">24.4.2. Emacs Bookmarks</a></li>
</ul>
</li>
<li><a href="#org3b2b17f">24.5. Among Org-Mode Headers</a></li>
<li><a href="#org8768273">24.6. Among Indented Text Like Python and YAML Specifically</a></li>
<li><a href="#orgc3514c0">24.7. Back to a Previous Position</a></li>
</ul>
</li>
<li><a href="#orgd0bdb6f">25. Planning for the System76 Launch Keyboard</a>
<ul>
<li><a href="#orgf5b51c7">25.1. switch the following to a more convenient key</a></li>
<li><a href="#orgb3ebb52">25.2. select a better key for the ALT key so I can use it more often</a></li>
<li><a href="#org330fca5">25.3. Desktop Keys</a></li>
</ul>
</li>
<li><a href="#org59252aa">26. Of Automatic Texts (abbreviations and templates)</a>
<ul>
<li><a href="#org085f3fd">26.1. Templates</a>
<ul>
<li><a href="#org41683fc">26.1.1. About the YASnippet Package</a></li>
<li><a href="#orgbe15215">26.1.2. Activating YASnippet</a></li>
<li><a href="#orgd9677b9">26.1.3. My Catalog of Template Definitions</a></li>
<li><a href="#org1cab853">26.1.4. Where I Store My Template Definitions</a></li>
<li><a href="#org9f59c83">26.1.5. Developing New Template Definitions</a></li>
</ul>
</li>
<li><a href="#org344596f">26.2. Auto-Completion</a>
<ul>
<li><a href="#orgc613b7d">26.2.1. Emacs Completion Engines:</a></li>
<li><a href="#org30f6710">26.2.2. Places to Use Completion Engines:</a></li>
<li><a href="#org404acc3">26.2.3. Configuring Auto-Completion</a></li>
<li><a href="#orgc2f78df">26.2.4. IDO Auto-Completion Keys at a Prompt</a></li>
</ul>
</li>
<li><a href="#orgba6b17b">26.3. Editor Behavior</a></li>
</ul>
</li>
<li><a href="#org325078b">27. Managing Undo Operations</a></li>
<li><a href="#org23386ef">28. Undo System Settings</a></li>
<li><a href="#orgcd2616e">29. Whitespace Highlighting</a></li>
<li><a href="#orgc97fd16">30. Cursor Line</a>
<ul>
<li><a href="#org2329206">30.1. Core Behavior Tweaks</a></li>
</ul>
</li>
<li><a href="#orgc4e63b3">31. Obscure Emacs Variables</a></li>
<li><a href="#orgd4aadf8">32. Automate the Garbage-Collection Thresholds</a></li>
<li><a href="#org809b880">33. Revised Layout</a>
<ul>
<li><a href="#org0ebbca7">33.1. Auto-Saves</a></li>
</ul>
</li>
<li><a href="#org139efdd">34. Backups</a></li>
<li><a href="#org225a434">35. Backups in a World of VC</a></li>
<li><a href="#org0a930c4">36. Keeping Last N Editions of Files Edited</a></li>
<li><a href="#org04a555b">37. Location Identifiers</a></li>
<li><a href="#orgbc34d86">38. Cached or Small Items Persistence</a></li>
<li><a href="#org438b042">39. Redirect Individual Features</a></li>
<li><a href="#orgeefdd23">40. Phase 40 – Programming environment</a></li>
<li><a href="#orgaabd4df">41. Phase 50 – Org-mode environment</a></li>
<li><a href="#org63fbcaf">42. Org Attach</a></li>
<li><a href="#org795b82d">43. Locations/Directories</a>
<ul>
<li><a href="#org3e1199a">43.1. Common Org-Mode Modules I Enable</a></li>
<li><a href="#org5ff6662">43.2. In-Buffer Completion and Templates</a></li>
<li><a href="#org2ee3302">43.3. Speed Keys</a></li>
<li><a href="#org5bca82e">43.4. Dynamic Headline Numbering</a></li>
</ul>
</li>
<li><a href="#org4fdbcf7">44. 51 – Org Capture</a></li>
<li><a href="#orgf733f3f">45. Bringing In a URL With Its Title</a>
<ul>
<li><a href="#orgd344839">45.1. Forms for <b>Capturing</b> Information (predefined templates)</a>
<ul>
<li><a href="#org0691457">45.1.1. Merge Capture Templates All Together</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgfd7d1a6">46. org-protocol</a>
<ul>
<li><a href="#orge1417a0">46.1. <b>pushing</b> URL/title links from Firefox into the Emacs kill-buffer</a></li>
<li><a href="#orgd8de8a1">46.2. org-protocol (intercept calls from emacsclient to trigger custom actions)</a></li>
</ul>
</li>
<li><a href="#org0edbe71">47. Package End</a></li>
<li><a href="#org36d7936">48. Declare Which App Should Handle Links to Certain File Types</a></li>
<li><a href="#org5cfdb06">49. Control How Drag-and-Drop works to Download into an Org Document and Create a Link to That Content</a></li>
<li><a href="#org5dfa8b4">50. Exporting</a>
<ul>
<li><a href="#orgb8ef16a">50.1. Exporting to HTML</a></li>
</ul>
</li>
<li><a href="#org9da91ea">51. My Link Abbreviations</a></li>
<li><a href="#org007a762">52. Define a New Type of Link that Greps Files</a></li>
<li><a href="#orgabaf48c">53. Define a New Type of Link that Searches Tag Match Expressions</a>
<ul>
<li><a href="#orgb1e95a1">53.1. MISC TO CONSIDER</a></li>
</ul>
</li>
<li><a href="#org740d8ce">54. Embedding YouTube Videos with org-mode Links</a></li>
<li><a href="#org11b60b1">55. Package Footer</a></li>
<li><a href="#org387f432">56. Periodic org-save-all-org-buffers</a></li>
<li><a href="#org220aab3">57. 54 – Org Tasks &amp; Agenda</a>
<ul>
<li><a href="#org318849d">57.1. Timing-Related Autosave for Org</a></li>
<li><a href="#org56e50ec">57.2. Org-Super-Agenda for Post-Processing the Agenda Item list</a>
<ul>
<li><a href="#org2304213">57.2.1. Define My Custom Group Function First</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgab5664f">58. 54 – Org Tasks &amp; Scheduling</a>
<ul>
<li><a href="#org059f3fb">58.1. Holiday Diary &amp; Easter Calculations</a>
<ul>
<li><a href="#org58b75e9">58.1.1. Providing a Function to Calculate Easter for Org-Mode Events</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9adfd51">59. Visual Bullets for Org Headlines</a></li>
<li><a href="#org9cd27b6">60. Org face adjustments AFTER theme</a></li>
<li><a href="#orgc7ae190">61. Agenda enhancements</a></li>
<li><a href="#org54dcefb">62. Inline entity rendering, structure template keys, numbering</a></li>
<li><a href="#org09fbed9">63. Optional: set faces for org-level headings</a>
<ul>
<li><a href="#orgf28f98f">63.1. Testing</a>
<ul>
<li><a href="#org860b920">63.1.1. Testing 2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2a6340e">64. Org-Mode Keybindings &amp; Yanking</a></li>
<li><a href="#orgaff9f8d">65. Make org-mode Checkboxes Work in Headlines, not just Bulleted Items</a></li>
<li><a href="#org1e472a2">66. 55 – Org UI</a>
<ul>
<li><a href="#org407544a">66.1. Checkboxes in Headlines</a></li>
</ul>
</li>
<li><a href="#org383846f">67. Package Footer</a></li>
<li><a href="#org573fb79">68. Phase 60 – Personal tooling</a></li>
<li><a href="#orgad1583c">69. Package Header</a></li>
<li><a href="#org3e45a49">70. Versioning Files</a></li>
<li><a href="#org9a7ce7e">71. Package End</a></li>
<li><a href="#org105dc21">72. Final – Private overrides</a></li>
<li><a href="#org4e12a20">73. Additional Small Configuration File `M-x customize` Changes</a></li>
</ul>
</div>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>~/.emacs.d/early-init.el</label><pre class="src src-emacs-lisp"><span class="linenr">  1: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">early-init.el --- Tweaks that must run *before* package.el  -*- lexical-binding: t; -*-</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Author: Jeffrey Rush</span>
<span class="linenr">  4: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Keywords: Emacs configuration</span>
<span class="linenr">  5: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Homepage: https://github.com/xanalogica/emacs.d.git</span>
<span class="linenr">  6: </span>
<span class="linenr">  7: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span class="linenr">  8: </span>
<span class="linenr">  9: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">My Initialization Flow:</span>
<span class="linenr"> 10: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">1. early-init.el</span>
<span class="linenr"> 11: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">2. init.el</span>
<span class="linenr"> 12: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">3. config.org</span>
<span class="linenr"> 13: </span>
<span class="linenr"> 14: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">The idea of a `early-init.el` file was introduced in Emacs 27.1.  It is</span>
<span class="linenr"> 15: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">loaded BEFORE the Emacs package system and GUI is initialized.  This is a</span>
<span class="linenr"> 16: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">great place for *startup optimization*, because only here can you *prevent*</span>
<span class="linenr"> 17: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">things from loading, rather than turn them off after-the-fact.</span>
<span class="linenr"> 18: </span>
<span class="linenr"> 19: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: `early-init.el` is meant to disable features, NOT initialize systems.  Since</span>
<span class="linenr"> 20: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">this file is read by Emacs before the GUI is initialized, before a package system</span>
<span class="linenr"> 21: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">is established and before the network is fully up, do NOT include your customizations</span>
<span class="linenr"> 22: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">that are best left in the normal `init.el` file.</span>
<span class="linenr"> 23: </span>
<span class="linenr"> 24: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs 30.1+ configuration.  (my version of Emacs at the time of composing this file)</span>
<span class="linenr"> 25: </span>
<span class="linenr"> 26: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>
<span class="linenr"> 27: </span>
<span class="linenr"> 28: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Require Emacs 30+</span>
<span class="linenr"> 29: </span>(<span style="color: #4169e1;">when</span> (&lt; emacs-major-version 30)
<span class="linenr"> 30: </span>  (<span style="color: #ff0000; font-weight: bold;">user-error</span> <span style="color: #bc8f8f;">"This config requires Emacs 30+ (you have %s)"</span> emacs-version))
<span class="linenr"> 31: </span>
<span class="linenr"> 32: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 33: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">For a more organized `user-emacs-directory` (~/.emacs.d/ for me)</span>
<span class="linenr"> 34: </span>
<span class="linenr"> 35: </span>(<span style="color: #4169e1;">defconst</span> <span style="color: #b8860b;">xan/cache-dir</span> (expand-file-name <span style="color: #bc8f8f;">"cache/"</span> user-emacs-directory))
<span class="linenr"> 36: </span>(<span style="color: #4169e1;">defconst</span> <span style="color: #b8860b;">xan/data-dir</span>  (expand-file-name <span style="color: #bc8f8f;">"data/"</span>  user-emacs-directory))
<span class="linenr"> 37: </span>
<span class="linenr"> 38: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Create them if they don't exist</span>
<span class="linenr"> 39: </span>(make-directory xan/cache-dir t)
<span class="linenr"> 40: </span>(make-directory xan/data-dir t)
<span class="linenr"> 41: </span>
<span class="linenr"> 42: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Redirect native-comp .eln files into our cache *before* anything loads</span>
<span class="linenr"> 43: </span>(<span style="color: #4169e1;">when</span> (boundp 'native-comp-eln-load-path)
<span class="linenr"> 44: </span>  (startup-redirect-eln-cache (expand-file-name <span style="color: #bc8f8f;">"eln-cache/"</span> xan/cache-dir)))
<span class="linenr"> 45: </span>
<span class="linenr"> 46: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 47: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Prevent initialization of the Emacs built-in `package.el` system until we</span>
<span class="linenr"> 48: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">get to the `init.el` file where I use the `straight.el` package manager</span>
<span class="linenr"> 49: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">instead.  I rely on the `use-package` which calls into `straight.el` for</span>
<span class="linenr"> 50: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">the *downloading* and *installation* of packages and then `use-package`</span>
<span class="linenr"> 51: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">*loads* and *configures* those packages.  A very clear division of labor.</span>
<span class="linenr"> 52: </span><span style="color: #b22222;">;;</span>
<span class="linenr"> 53: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Since `straight.el` requires networking, loading files, and setting up load</span>
<span class="linenr"> 54: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">paths &#8212; this is too early to do reliably in `early-init.el` before Emacs</span>
<span class="linenr"> 55: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">initializes its GUI, environment variables, and process subsystems.</span>
<span class="linenr"> 56: </span>
<span class="linenr"> 57: </span>(<span style="color: #4169e1;">setq</span> package-enable-at-startup nil
<span class="linenr"> 58: </span>      package-quickstart        nil)
<span class="linenr"> 59: </span>
<span class="linenr"> 60: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 61: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">To speed up the Emacs startup process, temporarily loosen the garbage</span>
<span class="linenr"> 62: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">collector behavior so it does not compact memory during initialization.</span>
<span class="linenr"> 63: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Add a hook function to restore sane garbage collector behavior after</span>
<span class="linenr"> 64: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs startup is complete.</span>
<span class="linenr"> 65: </span><span style="color: #b22222;">;;</span>
<span class="linenr"> 66: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">And disable the file-name-handler-alist so it finds boot files faster with</span>
<span class="linenr"> 67: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">less searching.</span>
<span class="linenr"> 68: </span>
<span class="linenr"> 69: </span>(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">xan/file-name-handler-alist</span> file-name-handler-alist)
<span class="linenr"> 70: </span>
<span class="linenr"> 71: </span>(<span style="color: #4169e1;">setq</span> file-name-handler-alist  nil
<span class="linenr"> 72: </span>      gc-cons-threshold        most-positive-fixnum
<span class="linenr"> 73: </span>      gc-cons-percentage       0.6)
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Restore sane GC &amp; file&#8209;handler settings after init</span>
<span class="linenr"> 76: </span>(add-hook 'emacs-startup-hook
<span class="linenr"> 77: </span>          (<span style="color: #4169e1;">lambda</span> ()
<span class="linenr"> 78: </span>            (<span style="color: #4169e1;">setq</span> gc-cons-threshold (* 64 1024 1024) <span style="color: #b22222;">; </span><span style="color: #b22222;">64 MB</span>
<span class="linenr"> 79: </span>                  gc-cons-percentage 0.1
<span class="linenr"> 80: </span>                  file-name-handler-alist xan/file-name-handler-alist)))
<span class="linenr"> 81: </span>
<span class="linenr"> 82: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 83: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable UI elements to prevent flickering during startup and to load faster.</span>
<span class="linenr"> 84: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">We'll restore them later in the initialization process.  Also don't load</span>
<span class="linenr"> 85: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">any custom.el settings that might disrupt initialization because everything</span>
<span class="linenr"> 86: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">is not yet configured to accept it.</span>
<span class="linenr"> 87: </span>
<span class="linenr"> 88: </span>(menu-bar-mode -1)
<span class="linenr"> 89: </span>(tool-bar-mode -1)
<span class="linenr"> 90: </span>(scroll-bar-mode -1)
<span class="linenr"> 91: </span>
<span class="linenr"> 92: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Disable the fancy graphical splash screen in its own buffer,</span>
<span class="linenr"> 93: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">typically named *GNU Emacs*.</span>
<span class="linenr"> 94: </span><span style="color: #b22222;">;;</span>
<span class="linenr"> 95: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">That screen normally shows:</span>
<span class="linenr"> 96: </span><span style="color: #b22222;">;;</span>
<span class="linenr"> 97: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">- Emacs logo</span>
<span class="linenr"> 98: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">- Keybinding cheatsheet</span>
<span class="linenr"> 99: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">- Link to the Emacs tutorial</span>
<span class="linenr">100: </span>
<span class="linenr">101: </span>(<span style="color: #4169e1;">setq</span> inhibit-startup-screen t)
<span class="linenr">102: </span>
<span class="linenr">103: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Don't load any custom.el automatically by redirecting it to an empty temp file</span>
<span class="linenr">104: </span>(<span style="color: #4169e1;">setq</span> custom-file (make-temp-file <span style="color: #bc8f8f;">"emacs-custom-"</span>))
<span class="linenr">105: </span>
<span class="linenr">106: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr">107: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Retain commented out variables needed when debugging the Emacs</span>
<span class="linenr">108: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">initialization process.</span>
<span class="linenr">109: </span>
<span class="linenr">110: </span><span style="color: #b22222;">; </span><span style="color: #b22222;">(setq debug-on-error t)</span>
<span class="linenr">111: </span><span style="color: #b22222;">; </span><span style="color: #b22222;">(setq stack-trace-on-error t)</span>
<span class="linenr">112: </span><span style="color: #b22222;">; </span><span style="color: #b22222;">(debug-on-entry 'integerp)</span>
<span class="linenr">113: </span>
<span class="linenr">114: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Respect DEBUG envvar as an alternative to --debug-init, and to</span>
<span class="linenr">115: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">make sure startup is sufficiently verbose from this point on.</span>
<span class="linenr">116: </span>(<span style="color: #4169e1;">when</span> (getenv-internal <span style="color: #bc8f8f;">"DEBUG"</span>)
<span class="linenr">117: </span>  (<span style="color: #4169e1;">setq</span> init-file-debug t
<span class="linenr">118: </span>        debug-on-error t))
<span class="linenr">119: </span>
<span class="linenr">120: </span>(message <span style="color: #bc8f8f;">"early-init.el done (%.2fs)"</span>
<span class="linenr">121: </span>         (float-time (time-subtract (current-time) before-init-time)))
<span class="linenr">122: </span>
<span class="linenr">123: </span>(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">early-init</span>)
<span class="linenr">124: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">early-init.el ends here</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>~/.emacs.d/init.el</label><pre class="src src-emacs-lisp"><span class="linenr">  1: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">init.el --- Main Configuration File -*- lexical-binding: t; no-byte-compile: t -*-</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Author: Jeffrey Rush</span>
<span class="linenr">  4: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Keywords: Emacs configuration</span>
<span class="linenr">  5: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Homepage: https://github.com/xanalogica/.emacs.d.git</span>
<span class="linenr">  6: </span>
<span class="linenr">  7: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span class="linenr">  8: </span>
<span class="linenr">  9: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">My Initialization Flow:</span>
<span class="linenr"> 10: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">1. load early-init.el</span>
<span class="linenr"> 11: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">2. load init.el</span>
<span class="linenr"> 12: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">3. tangle config.org into config.el and load</span>
<span class="linenr"> 13: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">4. tangle various NN-category-function.el files</span>
<span class="linenr"> 14: </span>
<span class="linenr"> 15: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs 30.1+ configuration.  (my version of Emacs at the time of composing this file)</span>
<span class="linenr"> 16: </span>
<span class="linenr"> 17: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>
<span class="linenr"> 18: </span>
<span class="linenr"> 19: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 20: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Bootstrap straight.el package system from the public Internet</span>
<span class="linenr"> 21: </span><span style="color: #b22222;">;;   </span><span style="color: #b22222;">https://github.com/radian-software/straight.el</span>
<span class="linenr"> 22: </span>
<span class="linenr"> 23: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my/online-p</span> ()
<span class="linenr"> 24: </span>  <span style="color: #bc8f8f;">"Test whether network is up before using it to download stuff."</span>
<span class="linenr"> 25: </span>  (<span style="color: #4169e1;">condition-case</span> _err
<span class="linenr"> 26: </span>      (<span style="color: #4169e1;">progn</span>
<span class="linenr"> 27: </span>        (url-retrieve-synchronously
<span class="linenr"> 28: </span>         <span style="color: #bc8f8f;">"https://github.com/"</span>
<span class="linenr"> 29: </span>         'silent 'inhibit-cookies)
<span class="linenr"> 30: </span>        t)
<span class="linenr"> 31: </span>    (<span style="color: #ff0000; font-weight: bold;">error</span> nil)))
<span class="linenr"> 32: </span>
<span class="linenr"> 33: </span>(<span style="color: #4169e1;">unless</span> (my/online-p)
<span class="linenr"> 34: </span>  (message <span style="color: #bc8f8f;">"Emacs sees no network; skipping Straight recipe updates for now"</span>)
<span class="linenr"> 35: </span>  (<span style="color: #4169e1;">setq</span> straight-check-for-modifications 'never))
<span class="linenr"> 36: </span>
<span class="linenr"> 37: </span>(<span style="color: #4169e1;">eval-when-compile</span>  <span style="color: #b22222;">;; </span><span style="color: #b22222;">to eliminate a warning about unknown func during compile</span>
<span class="linenr"> 38: </span>  (<span style="color: #4169e1;">declare-function</span> straight-pull-recipe-repositories <span style="color: #bc8f8f;">"straight"</span>))
<span class="linenr"> 39: </span>
<span class="linenr"> 40: </span>(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">bootstrap-version</span>)
<span class="linenr"> 41: </span>(<span style="color: #4169e1;">let</span> ((bootstrap-file
<span class="linenr"> 42: </span>       (expand-file-name <span style="color: #bc8f8f;">"straight/repos/straight.el/bootstrap.el"</span>
<span class="linenr"> 43: </span>                         user-emacs-directory))
<span class="linenr"> 44: </span>      (bootstrap-version 6))
<span class="linenr"> 45: </span>  (<span style="color: #4169e1;">unless</span> (file-exists-p bootstrap-file)
<span class="linenr"> 46: </span>    (<span style="color: #4169e1;">with-current-buffer</span>
<span class="linenr"> 47: </span>        (url-retrieve-synchronously
<span class="linenr"> 48: </span>         <span style="color: #bc8f8f;">"https://raw.githubusercontent.com/radian-software/straight.el/develop/install.el"</span>
<span class="linenr"> 49: </span>         'silent 'inhibit-cookies)
<span class="linenr"> 50: </span>      (goto-char (point-max))
<span class="linenr"> 51: </span>      (eval-print-last-sexp)))
<span class="linenr"> 52: </span>  (load bootstrap-file nil 'nomessage)
<span class="linenr"> 53: </span>)
<span class="linenr"> 54: </span>
<span class="linenr"> 55: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 56: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Declare repos to pull from, and configure use-package to use straight.el</span>
<span class="linenr"> 57: </span>
<span class="linenr"> 58: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Define preferred archive sources</span>
<span class="linenr"> 59: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Replace the Savannah git remote for nongnu with the HTTP tarball mirror:</span>
<span class="linenr"> 60: </span>(<span style="color: #4169e1;">setq</span> straight-recipe-repositories
<span class="linenr"> 61: </span>      '(gnu-elpa-mirror nongnu-elpa melpa))
<span class="linenr"> 62: </span>
<span class="linenr"> 63: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: MELPA-stable is omitted from the above list as very few</span>
<span class="linenr"> 64: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">people use MELPA&#8209;stable with straight, because you can pin any</span>
<span class="linenr"> 65: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">package to a commit instead.</span>
<span class="linenr"> 66: </span>
<span class="linenr"> 67: </span>(run-with-idle-timer
<span class="linenr"> 68: </span>  5 nil
<span class="linenr"> 69: </span>  (<span style="color: #4169e1;">lambda</span> ()
<span class="linenr"> 70: </span>    (<span style="color: #4169e1;">condition-case</span> e
<span class="linenr"> 71: </span>        (straight-pull-recipe-repositories)
<span class="linenr"> 72: </span>      (<span style="color: #ff0000; font-weight: bold;">error</span>
<span class="linenr"> 73: </span>        (message <span style="color: #bc8f8f;">"[straight] recipe refresh failed: %S"</span> e)))))
<span class="linenr"> 74: </span>
<span class="linenr"> 75: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Make use-package rely on straight.el _by default_</span>
<span class="linenr"> 76: </span>(<span style="color: #4169e1;">setq</span> straight-use-package-by-default t)
<span class="linenr"> 77: </span>
<span class="linenr"> 78: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Enable `use-package`'s :ensure, :init, :config etc.</span>
<span class="linenr"> 79: </span>(<span style="color: #4169e1;">setq</span> use-package-enable-imenu-support t)
<span class="linenr"> 80: </span>
<span class="linenr"> 81: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Install use-package using straight.el, and make sure it's available to use in your config.</span>
<span class="linenr"> 82: </span>(straight-use-package 'use-package)
<span class="linenr"> 83: </span>
<span class="linenr"> 84: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 85: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Enhance use-package with :delight keyword argument, to allow hiding</span>
<span class="linenr"> 86: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">and rearranging modes, by major and minor versions.</span>
<span class="linenr"> 87: </span>
<span class="linenr"> 88: </span>(<span style="color: #4169e1;">use-package</span> delight
<span class="linenr"> 89: </span>  <span style="color: #00008b;">:defer</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">only load when a :delight is needed</span>
<span class="linenr"> 90: </span>  )
<span class="linenr"> 91: </span>
<span class="linenr"> 92: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr"> 93: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Install the org package early so I can write the rest of my Emacs</span>
<span class="linenr"> 94: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">configuration in org-mode for easier documenting and then tangle</span>
<span class="linenr"> 95: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">that configuration into .el files for compilation and loading into</span>
<span class="linenr"> 96: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs.</span>
<span class="linenr"> 97: </span>
<span class="linenr"> 98: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-macs</span>)
<span class="linenr"> 99: </span>
<span class="linenr">100: </span>(<span style="color: #4169e1;">use-package</span> org  <span style="color: #b22222;">;; </span><span style="color: #b22222;">I WANT TO USE THE ORG PACKAGE SHIPPED WITH EMACS</span>
<span class="linenr">101: </span>  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:type</span> built-in)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">or omit this line to use org from Git</span>
<span class="linenr">102: </span>
<span class="linenr">103: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Ensure the export backend `</span><span style="color: #5f9ea0;">ox-org</span><span style="color: #b22222;">' is loaded so we can merge my config/*.org</span>
<span class="linenr">104: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">pieces together and export the result into one common file.</span>
<span class="linenr">105: </span>(<span style="color: #4169e1;">setq</span> org-export-backends '(ascii html icalendar latex odt org))
<span class="linenr">106: </span>
<span class="linenr">107: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span class="linenr">108: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Load the rest of my Emacs Configuration from my config.org file.</span>
<span class="linenr">109: </span>
<span class="linenr">110: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">Load my tangle system</span>
<span class="linenr">111: </span>(add-to-list 'load-path (expand-file-name <span style="color: #bc8f8f;">"lisp/"</span> user-emacs-directory))
<span class="linenr">112: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">init-tangle</span>)
<span class="linenr">113: </span>
<span class="linenr">114: </span>(init-tangle-config-org-to-el)
<span class="linenr">115: </span>
<span class="linenr">116: </span>(message <span style="color: #bc8f8f;">"init.el done (%.2fs)"</span>
<span class="linenr">117: </span>         (float-time (time-subtract (current-time) before-init-time)))
<span class="linenr">118: </span>
<span class="linenr">119: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init.el ends here</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>~/.emacs.d/lisp/init-tangle.el</label><pre class="src src-emacs-lisp"><span class="linenr">  1: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init-tangle.el --- Robust line-by-line tangling -*- lexical-binding: t; -*-</span>
<span class="linenr">  2: </span>
<span class="linenr">  3: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">subr-x</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">string-trim</span>
<span class="linenr">  4: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org</span>)    <span style="color: #b22222;">;; </span><span style="color: #b22222;">org-babel-tangle-file</span>
<span class="linenr">  5: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">ob-tangle</span>)
<span class="linenr">  6: </span>
<span class="linenr">  7: </span>(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">init-tangle-cache-dir</span>
<span class="linenr">  8: </span>  (expand-file-name <span style="color: #bc8f8f;">"tangled/"</span> xan/cache-dir)
<span class="linenr">  9: </span>  <span style="color: #bc8f8f;">"Directory for tangled .el files and their SHA1 sidecars."</span>)
<span class="linenr"> 10: </span>
<span class="linenr"> 11: </span>(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">init-tangle-logfile</span> <span style="color: #bc8f8f;">"/tmp/emacs-init.log"</span>
<span class="linenr"> 12: </span>  <span style="color: #bc8f8f;">"Log file for init-tangle debug messages."</span>)
<span class="linenr"> 13: </span>
<span class="linenr"> 14: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--log</span> (fmt <span style="color: #228b22;">&amp;rest</span> args)
<span class="linenr"> 15: </span>  <span style="color: #bc8f8f;">"Append a timestamped message to `init-tangle-logfile`."</span>
<span class="linenr"> 16: </span>  (<span style="color: #4169e1;">with-temp-file</span> init-tangle-logfile
<span class="linenr"> 17: </span>    (insert (format-time-string <span style="color: #bc8f8f;">"[%Y-%m-%d %H:%M:%S] "</span>))
<span class="linenr"> 18: </span>    (insert (apply #'format fmt args) <span style="color: #bc8f8f;">"\n"</span>)))
<span class="linenr"> 19: </span>
<span class="linenr"> 20: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--ensure-cache</span> ()
<span class="linenr"> 21: </span>  <span style="color: #bc8f8f;">"Create `init-tangle-cache-dir` if needed and add it to `load-path`."</span>
<span class="linenr"> 22: </span>  (init-tangle--log <span style="color: #bc8f8f;">"ensure-cache %s"</span> init-tangle-cache-dir)
<span class="linenr"> 23: </span>  (<span style="color: #4169e1;">unless</span> (file-directory-p init-tangle-cache-dir)
<span class="linenr"> 24: </span>    (make-directory init-tangle-cache-dir t))
<span class="linenr"> 25: </span>  (add-to-list 'load-path init-tangle-cache-dir))
<span class="linenr"> 26: </span>
<span class="linenr"> 27: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--sha1</span> (file)
<span class="linenr"> 28: </span>  <span style="color: #bc8f8f;">"Return SHA1 of FILE&#8217;s contents, or nil if unreadable."</span>
<span class="linenr"> 29: </span>  (<span style="color: #4169e1;">when</span> (file-readable-p file)
<span class="linenr"> 30: </span>    (<span style="color: #4169e1;">with-temp-buffer</span>
<span class="linenr"> 31: </span>      (insert-file-contents-literally file)
<span class="linenr"> 32: </span>      (secure-hash 'sha1 (current-buffer)))))
<span class="linenr"> 33: </span>
<span class="linenr"> 34: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--tangle-phase</span> (path)
<span class="linenr"> 35: </span>  <span style="color: #bc8f8f;">"Tangle a single Org PATH (relative to `user-emacs-directory`).</span>
<span class="linenr"> 36: </span><span style="color: #bc8f8f;">Caches to `init-tangle-cache-dir` with a SHA1 sidecar.  Returns BASE."</span>
<span class="linenr"> 37: </span>  (<span style="color: #4169e1;">let*</span> ((org-path  (expand-file-name path user-emacs-directory))
<span class="linenr"> 38: </span>         (base      (file-name-base path))
<span class="linenr"> 39: </span>         (el-path   (expand-file-name (concat base <span style="color: #bc8f8f;">".el"</span>) init-tangle-cache-dir))
<span class="linenr"> 40: </span>         (hash-path (concat el-path <span style="color: #bc8f8f;">".sha1"</span>))
<span class="linenr"> 41: </span>         (new-hash  (init-tangle--sha1 org-path))
<span class="linenr"> 42: </span>         (old-hash  (<span style="color: #4169e1;">when</span> (file-exists-p hash-path)
<span class="linenr"> 43: </span>                      (string-trim
<span class="linenr"> 44: </span>                       (<span style="color: #4169e1;">with-temp-buffer</span>
<span class="linenr"> 45: </span>                         (insert-file-contents hash-path)
<span class="linenr"> 46: </span>                         (buffer-string))))))
<span class="linenr"> 47: </span>    (init-tangle--log <span style="color: #bc8f8f;">"phase %s old=%s new=%s"</span> path old-hash new-hash)
<span class="linenr"> 48: </span>    (<span style="color: #4169e1;">when</span> (not (string= old-hash new-hash))
<span class="linenr"> 49: </span>      (init-tangle--log <span style="color: #bc8f8f;">"tangling %s &#8594; %s"</span> path el-path)
<span class="linenr"> 50: </span>      (<span style="color: #4169e1;">condition-case</span> err
<span class="linenr"> 51: </span>          (<span style="color: #4169e1;">progn</span>
<span class="linenr"> 52: </span>            (org-babel-tangle-file org-path el-path <span style="color: #bc8f8f;">"\\`</span><span style="color: #5f9ea0;">emacs-lisp\\</span><span style="color: #bc8f8f;">'"</span>)
<span class="linenr"> 53: </span>            (<span style="color: #4169e1;">with-temp-file</span> hash-path (insert (<span style="color: #4169e1;">or</span> new-hash <span style="color: #bc8f8f;">""</span>)))
<span class="linenr"> 54: </span>            (<span style="color: #4169e1;">when</span> (fboundp 'native-compile)
<span class="linenr"> 55: </span>              (<span style="color: #4169e1;">ignore-errors</span> (native-compile el-path)))
<span class="linenr"> 56: </span>            (init-tangle--log <span style="color: #bc8f8f;">"tangled %s"</span> path))
<span class="linenr"> 57: </span>        (<span style="color: #ff0000; font-weight: bold;">error</span>
<span class="linenr"> 58: </span>         (init-tangle--log <span style="color: #bc8f8f;">"ERROR tangling %s: %S"</span> path err))))
<span class="linenr"> 59: </span>    base))
<span class="linenr"> 60: </span>
<span class="linenr"> 61: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--expand-includes</span> (infile outfile)
<span class="linenr"> 62: </span>  <span style="color: #bc8f8f;">"Read INFILE line-by-line, handle all #+INCLUDE_SRC, and write to OUTFILE."</span>
<span class="linenr"> 63: </span>  (init-tangle--log <span style="color: #bc8f8f;">"expand-includes %s &#8594; %s"</span> infile outfile)
<span class="linenr"> 64: </span>  (<span style="color: #4169e1;">with-temp-buffer</span>
<span class="linenr"> 65: </span>    (insert-file-contents infile)
<span class="linenr"> 66: </span>    (goto-char (point-min))
<span class="linenr"> 67: </span>    (<span style="color: #4169e1;">while</span> (not (eobp))
<span class="linenr"> 68: </span>      (<span style="color: #4169e1;">let</span> ((line (buffer-substring-no-properties
<span class="linenr"> 69: </span>                   (point) (line-end-position))))
<span class="linenr"> 70: </span>        (<span style="color: #4169e1;">if</span> (string-prefix-p <span style="color: #bc8f8f;">"#+INCLUDE_SRC:"</span> line)
<span class="linenr"> 71: </span>            (<span style="color: #4169e1;">let*</span> ((fields (split-string line <span style="color: #bc8f8f;">"[ \t]+"</span> t))
<span class="linenr"> 72: </span>                   (path   (string-trim (nth 1 fields) <span style="color: #bc8f8f;">"\""</span> <span style="color: #bc8f8f;">"\""</span>))
<span class="linenr"> 73: </span>                   (args   (mapconcat #'identity (nthcdr 2 fields) <span style="color: #bc8f8f;">" "</span>))
<span class="linenr"> 74: </span>                   (tangle (<span style="color: #4169e1;">when</span> (string-match <span style="color: #bc8f8f;">"tangle=\"</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">(</span><span style="color: #bc8f8f;">yes</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">|</span><span style="color: #bc8f8f;">no</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">)</span><span style="color: #bc8f8f;">\""</span> args)
<span class="linenr"> 75: </span>                             (match-string 1 args))))
<span class="linenr"> 76: </span>              (<span style="color: #4169e1;">cond</span>
<span class="linenr"> 77: </span>               ((string= tangle <span style="color: #bc8f8f;">"yes"</span>)
<span class="linenr"> 78: </span>                (<span style="color: #4169e1;">let</span> ((base (init-tangle--tangle-phase path)))
<span class="linenr"> 79: </span>                  (delete-region (point) (1+ (line-end-position)))
<span class="linenr"> 80: </span>                  (insert
<span class="linenr"> 81: </span>                   <span style="color: #bc8f8f;">"#+BEGIN_SRC emacs-lisp\n"</span>
<span class="linenr"> 82: </span>                   <span style="color: #bc8f8f;">"(message \"[tangle] Loading "</span> base <span style="color: #bc8f8f;">".el\")\n"</span>
<span class="linenr"> 83: </span>                   <span style="color: #bc8f8f;">"(require '"</span> base <span style="color: #bc8f8f;">")\n"</span>
<span class="linenr"> 84: </span>                   <span style="color: #bc8f8f;">"(message \"[tangle] Loading "</span> base <span style="color: #bc8f8f;">".el...done\")\n"</span>
<span class="linenr"> 85: </span>                   <span style="color: #bc8f8f;">"#+END_SRC\n"</span>)))
<span class="linenr"> 86: </span>               ((string= tangle <span style="color: #bc8f8f;">"no"</span>)
<span class="linenr"> 87: </span>                (delete-region (point) (1+ (line-end-position))))
<span class="linenr"> 88: </span>               (t
<span class="linenr"> 89: </span>                (forward-line 1))))
<span class="linenr"> 90: </span>          (forward-line 1)))
<span class="linenr"> 91: </span>    (write-region (point-min) (point-max) outfile)
<span class="linenr"> 92: </span>    (init-tangle--log <span style="color: #bc8f8f;">"wrote expanded org %s"</span> outfile))))
<span class="linenr"> 93: </span>
<span class="linenr"> 94: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle--final-tangle</span> (expanded-org final-el)
<span class="linenr"> 95: </span>  <span style="color: #bc8f8f;">"Tangle all emacs-lisp src blocks from EXPANDED-ORG into FINAL-EL."</span>
<span class="linenr"> 96: </span>  (init-tangle--log <span style="color: #bc8f8f;">"final-tangle %s &#8594; %s"</span> expanded-org final-el)
<span class="linenr"> 97: </span>  (<span style="color: #4169e1;">condition-case</span> err
<span class="linenr"> 98: </span>      (<span style="color: #4169e1;">progn</span>
<span class="linenr"> 99: </span>        (org-babel-tangle-file expanded-org final-el <span style="color: #bc8f8f;">"\\`</span><span style="color: #5f9ea0;">emacs-lisp\\</span><span style="color: #bc8f8f;">'"</span>)
<span class="linenr">100: </span>        (<span style="color: #4169e1;">when</span> (fboundp 'native-compile)
<span class="linenr">101: </span>          (<span style="color: #4169e1;">ignore-errors</span> (native-compile final-el)))
<span class="linenr">102: </span>        (init-tangle--log <span style="color: #bc8f8f;">"final tangle done"</span>))
<span class="linenr">103: </span>    (<span style="color: #ff0000; font-weight: bold;">error</span>
<span class="linenr">104: </span>     (init-tangle--log <span style="color: #bc8f8f;">"ERROR final tangle: %S"</span> err))))
<span class="linenr">105: </span>
<span class="linenr">106: </span><span style="color: #b22222;">;;;</span><span style="color: #b22222;">###</span><span style="color: #ff0000; font-weight: bold;">autoload</span>
<span class="linenr">107: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-tangle-config-org-to-el</span> ()
<span class="linenr">108: </span>  <span style="color: #bc8f8f;">"Expand includes, tangle phases, final tangle, then load config.el."</span>
<span class="linenr">109: </span>  (init-tangle--ensure-cache)
<span class="linenr">110: </span>  (<span style="color: #4169e1;">let*</span> ((orgfile  (expand-file-name <span style="color: #bc8f8f;">"config.org"</span>    user-emacs-directory))
<span class="linenr">111: </span>         (expanded (expand-file-name <span style="color: #bc8f8f;">"config--expanded.org"</span> init-tangle-cache-dir))
<span class="linenr">112: </span>         (final-el (expand-file-name <span style="color: #bc8f8f;">"config.el"</span>           init-tangle-cache-dir)))
<span class="linenr">113: </span>    (init-tangle--log <span style="color: #bc8f8f;">"[START] %s"</span> orgfile)
<span class="linenr">114: </span>    (init-tangle--expand-includes orgfile expanded)
<span class="linenr">115: </span>    (init-tangle--final-tangle   expanded final-el)
<span class="linenr">116: </span>    (init-tangle--log <span style="color: #bc8f8f;">"loading %s"</span> final-el)
<span class="linenr">117: </span>    (load-file final-el)
<span class="linenr">118: </span>    (init-tangle--log <span style="color: #bc8f8f;">"[DONE] loaded %s"</span> final-el)))
<span class="linenr">119: </span>
<span class="linenr">120: </span>(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">init-tangle</span>)
<span class="linenr">121: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init-tangle.el ends here</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>~/.emacs.d/lisp/init-audit.el</label><pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init-audit.el --- Audit missing use-package targets  -*- lexical-binding: t; -*-</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Commentary:</span>
<span class="linenr"> 4: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">This module checks `use-package` declarations in a given file</span>
<span class="linenr"> 5: </span><span style="color: #b22222;">;; </span><span style="color: #b22222;">to see if the referenced packages are installed by straight.el.</span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">Code:</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">cl-lib</span>)
<span class="linenr">10: </span>(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">subr-x</span>)
<span class="linenr">11: </span>
<span class="linenr">12: </span>(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">init-audit-use-package-missing</span> (file)
<span class="linenr">13: </span>  <span style="color: #bc8f8f;">"Check which `use-package` declarations in FILE are not installed via straight.el."</span>
<span class="linenr">14: </span>  (<span style="color: #4169e1;">interactive</span> <span style="color: #bc8f8f;">"fAudit use-package declarations in file: "</span>)
<span class="linenr">15: </span>  (<span style="color: #4169e1;">let</span> ((missing-packages '()))
<span class="linenr">16: </span>    (<span style="color: #4169e1;">with-temp-buffer</span>
<span class="linenr">17: </span>      (insert-file-contents file)
<span class="linenr">18: </span>      (goto-char (point-min))
<span class="linenr">19: </span>      (<span style="color: #4169e1;">while</span> (re-search-forward <span style="color: #bc8f8f;">"^(use-package\\s-+</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">(</span><span style="color: #bc8f8f;">[</span><span style="color: #bc8f8f;">^</span><span style="color: #bc8f8f;"> \n)]+</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">)</span><span style="color: #bc8f8f;">"</span> nil t)
<span class="linenr">20: </span>        (<span style="color: #4169e1;">let</span> ((pkg (intern (match-string 1))))
<span class="linenr">21: </span>          (<span style="color: #4169e1;">unless</span> (<span style="color: #4169e1;">or</span> (<span style="color: #4169e1;">featurep</span> <span style="color: #5f9ea0;">pkg</span>)
<span class="linenr">22: </span>                      (locate-library (symbol-name pkg))
<span class="linenr">23: </span>                      (straight--installed-p pkg))
<span class="linenr">24: </span>            (<span style="color: #4169e1;">push</span> pkg missing-packages)))))
<span class="linenr">25: </span>    (<span style="color: #4169e1;">if</span> missing-packages
<span class="linenr">26: </span>        (<span style="color: #4169e1;">progn</span>
<span class="linenr">27: </span>          (message <span style="color: #bc8f8f;">"[init-audit] Missing packages: %s"</span>
<span class="linenr">28: </span>                   (mapconcat #'symbol-name (cl-remove-duplicates missing-packages) <span style="color: #bc8f8f;">", "</span>))
<span class="linenr">29: </span>          (cl-remove-duplicates missing-packages))
<span class="linenr">30: </span>      (message <span style="color: #bc8f8f;">"[init-audit] All use-package targets are present."</span>)
<span class="linenr">31: </span>      nil)))
<span class="linenr">32: </span>
<span class="linenr">33: </span>(<span style="color: #4169e1;">provide</span> '<span style="color: #5f9ea0;">init-audit</span>)
<span class="linenr">34: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">init-audit.el ends here</span>
</pre>
</div>


<p>
#### #+CAPTION: Refresh-Tangle-Load Function
#### #+BEGIN_SRC emacs-lisp
####   (defun xan/load-org-if-exists (file)
####     "Tangle and load FILE if it exists."
####     (let* ((org-path (expand-file-name file user-emacs-directory))
####            (base-name (file-name-base file))
####            (tangle-path (expand-file-name (concat base-name ".el")
####                                           (expand-file-name "cache/tangled/" user-emacs-directory))))
####       (if (file-exists-p org-path)
####           (progn
####             (make-directory (file-name-directory tangle-path) t)
####             (message "[tangle] Tangling %s → %s" file tangle-path)
####             (org-element-with-disabled-cache  ;; in Org v9.7.x many cache issues are still unresolved
####               (org-babel-tangle-file org-path tangle-path "\\`emacs-lisp\\'"))
####             (load-file tangle-path))
####         (message "[tangle] Skipping missing file: %s" file))))
#### #+END_SRC
</p>


<p>
### This is a current copy of my Emacs configuration, annotated with explanations.
### I've learned a lot by studying other people's Emacs configurations and I
### wanted to share what I've ended up with.
### 
### Other Emacs files I've studied:
### 
###   - <a href="https://github.com/redguardtoo/emacs.d">https://github.com/redguardtoo/emacs.d</a>
###   - <a href="https://github.com/purcell/emacs.d/blob/master/README.md">https://github.com/purcell/emacs.d/blob/master/README.md</a>
###   - This is a VERY good example of a custom org-mode .emacs.d file.
###     <a href="https://github.com/mwfogleman/.emacs.d/">https://github.com/mwfogleman/.emacs.d/</a>
###   - ~/.emacs.d/michael.org]] (local copy)
### 
###   - <a href="https://github.com/jagot/emacs/blob/master/home/.emacs.d/init.org">https://github.com/jagot/emacs/blob/master/home/.emacs.d/init.org</a>
###   - <a href="https://github.com/bbatsov/emacs.d/blob/master/init.el">https://github.com/bbatsov/emacs.d/blob/master/init.el</a>
###   - <a href="https://github.com/weavejester/dotfiles/blob/master/emacs.d/init.el">https://github.com/weavejester/dotfiles/blob/master/emacs.d/init.el</a>
### 
### My Emacs configuration is divided into two files:
### 
###   - ~/.emacs.d/init.el
###   - ~/.emacs.d/config.org (automatically tangled into config.el)
### 
### The <code>init.el</code> file is the first one executed by Emacs, and in it I do initial
### set up of my choice of package management, and then if <code>config.org</code> has been
### modified, tangle it into <code>config.el</code>, which is then loaded into Emacs by
### <code>init.el</code> to make those configuration settings take effect.
</p>

<p>
### - [ ] INCLUDE: "config/config-global-syntax-checking.org"
### - [ ] INCLUDE: "config/config-emacs-use-of-ai.org"
### - [ ] INCLUDE: "config/config-emacs-to-be-merged.org"
### - [ ] INCLUDE: "config/config-filetype-epub.org"
</p>

<p>
### - [ ] ??#+INCLUDE: "config/config-content-mobile-sync.org"
### - [ ] Emacs Configuration for Personal Memory Retention
### - [ ] Export Org-Mode Outlines as an Anki Knowledgebase
### - [ ] INCLUDE: "config/config-emacs-use-of-cloning.org"
### - [ ] INCLUDE: "config/config-helpful-notes.org"
</p>

<p>
### * My Emacs Directory Layout
### 
### When Emacs is started, it tries to load a ELisp program from an init file,
### looking in the following places in this order:
### 
###     - ~/.emacs              &#x2013; I don't use this file
###     - ~/.emacs.el           &#x2013; I don't use this file
###     - ~/.emacs.d/init.el    &#x2013; This is the <b>start of my Emacs configuration</b>
### 
### In case of problems with <code>init.el</code>, you can use the command-line switch '-q'
### to prevent it being loaded or '&#x2013;debug-init' to get a traceback of the first
### error encountered.
### 
### TIP: It is NOT recommendeed to byte-compile your init file as it does not
###      speed up startup very much and often leads to problems when you forget
###      to recompile the file.
</p>

<p>
### #+BEGIN_EXAMPLE
### <code>/.emacs.d/
### .
### ├── README.org	;; light introduction to my setup
### ├── init.el		;; my init file for Emacs (versus ~/.emacs)
### ├── agenda-files.py     ????????????????????????????????????????
### ├── org-clock-save.el   ????????????????????????????????????????
### ├── ARCHIVE/		;; modules that I retired using and will someday delete
### ├── auto-save-list      ????????????????????????????????????????
### ├── %backup%</code>           ????????????????????????????????????????
### ├── backups/		;; backup copies of ANY edited files
### ├── bookmarks           ????????????????????????????????????????
### ├── Cask		;; installed modules list read by Cask and maintained by Pallet
### ├── config.el		;; auto-built from my config.org each time Emacs starts
### ├── config.org	;; my Emacs configuration in org-mode 'literate' format
### ├── config.org~
### ├── config-XXX.org
### ├── custom-settings.el	;; tiny custom settings auto-edited by Emacs itself
### ├── elpa
### │   ├── PACKAGE-A-YYYYMMDD.HHMM/
### │   ├── PACKAGE-B-YYYYMMDD.HHMM/
### │   ├── archives/
### │   │   ├── gnu/
### │   │   │   ├── archive-contents
### │   │   │   └── archive-contents.signed
### │   │   ├── melpa/
### │   │   │   └── archive-contents
### │   │   └── melpa-stable/
### │   │       └── archive-contents
### ├── eshell/
### │   ├── alias
### │   ├── history
### │   └── lastdir
### ├── quelpa/
### │   ├── build/
### │   │   └── PACKAGE-A/
### ├── ido.last
### ├── library.org
### ├── LICENSE
### ├── lisp/			;; individual .el files I create or work on
### ├── jeff-light-theme.el
### ├── michael.org
### ├── network-security.data
### ├── places
### ├── pymd5-1c2b62349aded4d3a40a729148cbd68c.py
### ├── recentf
### ├── request
### │   └── curl-cookie-jar
### ├── session.1012cc9dcd52891180156817838919458300000018020070
### ├── session.106f8e8df9fad6f21c156806759412428700000015480070
### ├── snippets		;; my library of text fragments for use by the snippet library
### ├── templates 	;; my library of text fragments for use by org-capture
### │   ├── PACKAGE-A/
### │   ├── PACKAGE-B/
### ├── tramp
### ├── transient
### │   └── history.el
### └── url
###     └── cookies
### 
### ;;      .cask/
### ;;         25.3/		;; cache/collection of modules pulled down by package manager
### ;;      ac-dict/		;; auto-complete dictionary for various modes/languages
### ;;   ~/.cask/
### ;;      Cask			;; specification file of dependencies of the Cask pgm
### ;;      bin/
### ;;         cask			;; command-line tool for invoking Cask outside of Emacs
### ;;      cask.el			;; ELisp source of the Cask library
### #+END_EXAMPLE
</p>

<p>
### * MISC TO CONSIDER
### 
### ;; Automatically reread from disk if the underlying file changes
### (setopt auto-revert-avoid-polling t)  ;; save power by avoiding polling when possible
### 
### ;; Fix archaic defaults
### (setopt sentence-end-double-space nil)
### 
### ;; Make right-click do something sensible
### (when (display-graphic-p)
###   (context-menu-mode))
### 
### ;; Show the help buffer after startup
### (add-hook 'after-init-hook 'help-quick)
### 
### ;; which-key: shows a popup of available keybindings when typing a long key
### ;; sequence (e.g. C-x &#x2026;)
### (use-package which-key
###   :ensure t
###   :config
###   (which-key-mode))
### 
### (setopt x-underline-at-descent-line nil)           ; Prettier underlines
</p>

<p>
### ;; Enable horizontal scrolling
### (setopt mouse-wheel-tilt-scroll t)
### (setopt mouse-wheel-flip-direction t)
### 
### * Initialization Sequence
### 
### 1. <code>/.emacs.d/early-init.el
### 2. ~/.emacs.d/init.el
### 3. ~/.emacs.d/config.org
### 
### ** About ~/.emacs.d/early-init.el
### 
### Most customizations for Emacs should be put in the normal init file.  See The
### Emacs Initialization File.  However, it is sometimes necessary to have
### customizations take effect during Emacs startup earlier than the normal init
### file is processed.  Such customizations can be put in the early init file,
### ~/.config/emacs/early-init.el or ~/.emacs.d/early-init.el.  This file is loaded
### before the package system and GUI is initialized, so in it you can customize
### variables that affect the package initialization process, such as
### package-enable-at-startup, package-load-list, and package-user-dir.  Note that
### variables like package-archives which only affect the installation of new
### packages, and not the process of making already-installed packages available,
### may be customized in the regular init file. See Package Installation.
### 
### We do not recommend that you move into early-init.el customizations that can
### be left in the normal init files.  That is because the early init file is read
### before the GUI is initialized, so customizations related to GUI features will
### not work reliably in early-init.el.  By contrast, the normal init files are
### read after the GUI is initialized.  If you must have customizations in the
### early init file that rely on GUI features, make them run off hooks provided by
### the Emacs startup, such as window-setup-hook or tty-setup-hook. See Hooks.
### 
### For more information on the early init file, see Init File in The Emacs Lisp
### Reference Manual.
### 
### ---
### 
### This file is loaded before the package system and GUI is initialized,
### so in it you can customize variables that affect the package
### initialization process, such as package-enable-at-startup,
### package-load-list, and package-user-dir. Note that variables like
### package-archives which only affect the installation of new packages,
### and not the process of making already-installed packages available,
### may be customized in the regular init file.
### 
### ** Garbage Collection
### ** Choice of Package Manager
### 
### There are many package managers for Emacs, ranging from simple scripts
### to download files from EmacsWiki to full-featured package management
### solutions like straight.el. Here are the most feature-rich
### alternatives to straight.el:
### 
###  - package.el: de facto standard, bundled with Emacs.
### 
###  - Quelpa: allows you to use external sources like GitHub with
###    package.el. Essentially a local MELPA.
### 
###  - Cask: another package.el wrapper. Specify your dependencies in a
###    Cask file; can be used for project management or an Emacs
###    configuration.
### 
###  - el-get: ridiculously OP in terms of how many different sources you
###    can pull packages from (package.el, every known VCS, distro package
###    managers, go get(!!)).
### 
###  - Borg: assimilates packages as Git submodules into .emacs.d, relying on Emacsmirror.
### 
###  - "Screw package managers! I'll just handle it all myself!"
### 
### `use-package' is a macro that provides convenient syntactic sugar for
### many common tasks related to installing and configuring Emacs
### packages. Of course, it does not actually install the packages, but
### instead defers to a package manager, like straight.el (which comes
### with use-package integration by default).
### 
### - does Emacs 29 need straight.el anymore ???
### - https://github.com/radian-software/straight.el
### 
### - Note: straight.el is a replacement for package.el, not
###   use-package. use-package can be used with either package.el or
###   straight.el.
### 
### Most customizations for Emacs should be put in the normal init
### file. See The Emacs Initialization File. However, it is sometimes
### necessary to have customizations take effect during Emacs startup
### earlier than the normal init file is processed. Such customizations
### can be put in the early init file, ~/.config/emacs/early-init.el or
### ~/.emacs.d/early-init.el. This file is loaded before the package
### system and GUI is initialized, so in it you can customize variables
### that affect the package initialization process, such as
### package-enable-at-startup, package-load-list, and
### package-user-dir. Note that variables like package-archives which only
### affect the installation of new packages, and not the process of making
### already-installed packages available, may be customized in the regular
### init file. See Package Installation.
### 
### We do not recommend that you move into early-init.el any
### customizations that can be left in the normal init files. That is
### because the early init file is read before the GUI is initialized, so
### customizations related to GUI features will not work reliably in
### early-init.el. By contrast, the normal init files are read after the
### GUI is initialized. If you must have customizations in the early init
### file that rely on GUI features, make them run off hooks provided by
### the Emacs startup, such as window-setup-hook or tty-setup-hook. See
### Hooks.
### 
### For more information on the early init file, see Init File in The
### Emacs Lisp Reference Manual.
### 
### ** About ~/.emacs.d/init.el
### *** About ~use-package</code> Emacs Lisp Macro To More Efficiently Organize Package Settings
### 
### There are many ways to provide package settings, from raw Elisp to tidy macros.
### The github:<a href="https://github.com/jwiegley/use-package">use-package</a> Elisp macro allows one to isolate package configuration
### in your Emacs configuration files in a way that is both performance-oriented
### and tidy.
### 
### - <a href="https://www.masteringemacs.org/article/spotlight-use-package-a-declarative-configuration-tool">Spotlight: use-package, a declarative configuration tool - Mastering Emacs</a>
### - <a href="http://cachestocaches.com/2015/8/getting-started-use-package/">Getting Started with Use-Package</a>
### 
### 
### <a href="https://github.com/emacs-straight/use-package.git">https://github.com/emacs-straight/use-package.git</a>   OFFICIAL ONE
### 
### The <i>straight-use-package-by-default</i> variable in straight.el is a convenience
### setting that allows you to simplify your use-package declarations.  When it is
### enabled (set to t), straight.el automatically manages packages declared via
### use-package without requiring you to explicitly specify :straight t for each
### package.
### 
### 
### Use of 'straight' for loading packages is more popular, more robust and better
### at dependency management than 'quelpa'.
### 
</p>

<div id="outline-container-org0eeeae8" class="outline-2">
<h2 id="org0eeeae8"><span class="section-number-2">1.</span> Phase 00 – Core system and helper macros</h2>
<div class="outline-text-2" id="text-1">
<p>
This phase occurs after Emacs has started up but before the user
interface and mode-specific configuration takes place.
</p>
</div>

<div id="outline-container-org53d128c" class="outline-3">
<h3 id="org53d128c"><span class="section-number-3">1.1.</span> Core Boot Configuration</h3>
<div class="outline-text-3" id="text-1-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>~/.emacs.d/00-core-boot.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 00-core-boot
<span class="linenr">2: </span>#+DESCRIPTION: Core config for startup, secrets, runtime defaults
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">00-core-boot.el --- Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc63ac28" class="outline-2">
<h2 id="orgc63ac28"><span class="section-number-2">2.</span> Insure I'm Running an Acceptable Version of Org</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Verify what Org Version I'm Running</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">xan/check-org-version-min</span> (min-version)
  <span style="color: #bc8f8f;">"Check Org version is &gt;= MIN-VERSION."</span>
  (<span style="color: #4169e1;">let*</span> ((org-path (find-library-name <span style="color: #bc8f8f;">"org"</span>))
         (actual-version (org-version))) <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#8592; no second arg</span>
    (message <span style="color: #bc8f8f;">"[org-check] Org version: %s"</span> actual-version)
    (message <span style="color: #bc8f8f;">"[org-check] Org library path: %s"</span> org-path)
    (<span style="color: #4169e1;">cond</span>
     ((version&lt; actual-version min-version)
      (<span style="color: #ff0000; font-weight: bold;">warn</span> <span style="color: #bc8f8f;">"[org-check] &#9940; Org version too old! Require &#8805; %s, but got %s"</span>
            min-version actual-version))
     ((string-match-p <span style="color: #bc8f8f;">"/straight/repos/org-mode/"</span> org-path)
      (message <span style="color: #bc8f8f;">"[org-check] &#9989; Org is installed via straight.el (Git version)."</span>))
     ((string-match-p <span style="color: #bc8f8f;">"/emacs/[0-9.]+/lisp/org/"</span> org-path)
      (message <span style="color: #bc8f8f;">"[org-check] &#9989; Org is the built-in Emacs version."</span>))
     (t
      (<span style="color: #ff0000; font-weight: bold;">warn</span> <span style="color: #bc8f8f;">"[org-check] &#9888; Org source is non-standard: %s"</span> org-path)))))

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Automatically run this check after Org is loaded</span>
  (<span style="color: #4169e1;">with-eval-after-load</span> 'org
    (xan/check-org-version-min <span style="color: #bc8f8f;">"9.7.11"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9a727d" class="outline-2">
<h2 id="orga9a727d"><span class="section-number-2">3.</span> Insure All My Variable Blocks in My Org Files Are Properly Terminated</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Report Improperly Terminated Variable Blocks</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">xan/check-org-local-variable-blocks</span> (<span style="color: #228b22;">&amp;optional</span> dir)
  <span style="color: #bc8f8f;">"Check for org files in DIR (default: user-emacs-directory) with invalid Local Variables blocks."</span>
  (<span style="color: #4169e1;">let*</span> ((root (<span style="color: #4169e1;">or</span> dir user-emacs-directory))
         (org-files (directory-files-recursively root <span style="color: #bc8f8f;">"\\.org$"</span>))
         (bad-files '()))
    (<span style="color: #4169e1;">dolist</span> (file org-files)
      (<span style="color: #4169e1;">with-temp-buffer</span>
        (insert-file-contents file)
        (goto-char (point-min))
        (<span style="color: #4169e1;">when</span> (re-search-forward <span style="color: #bc8f8f;">"^[#;]+[ \t]*Local Variables&#58;"</span> nil t)
          (<span style="color: #4169e1;">unless</span> (re-search-forward <span style="color: #bc8f8f;">"^[#;]+[ \t]*End:"</span> nil t)
            (<span style="color: #4169e1;">push</span> file bad-files)))))
    (<span style="color: #4169e1;">when</span> bad-files
      (message <span style="color: #bc8f8f;">"&#9888; Org files with malformed Local Variables block:"</span>)
      (<span style="color: #4169e1;">dolist</span> (f (reverse bad-files))
        (message <span style="color: #bc8f8f;">" - %s"</span> f)))
    bad-files))

  (add-hook 'emacs-startup-hook
    (<span style="color: #4169e1;">lambda</span> ()
      (xan/check-org-local-variable-blocks user-emacs-directory)
      <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(xan/check-org-local-variable-blocks</span>
      <span style="color: #b22222;">;;;   </span><span style="color: #b22222;">(expand-file-name "cache/tangled/" user-emacs-directory))</span>
    )
  )
</pre>
</div>

<p>
#+END_SRC
</p>

<ul class="org-ul">
<li>verify I'm running a good version of Org</li>
<li>audit if my variables blocks in *.org files are properly terminated</li>
</ul>
</div>

<div id="outline-container-org0196666" class="outline-3">
<h3 id="org0196666"><span class="section-number-3">3.1.</span> Foundational Security for Emacs</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Anything that deals with authentication or secret-handling, such as
GnuPG, password stores, auth-sources, .netrc, pinentry, tls-program.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>~/.emacs.d/05-security-secrets.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 05-security-secrets
<span class="linenr">2: </span>#+DESCRIPTION: Secrets, encryption, authentication file paths, and GPG integration
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">05-security-secrets.el --- ??Tangled master config  -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
Here's a solid foundation — only include logic that’s secure and environment-specific, or needed before packages use them.
Isolate sensitive behaviors like GPG, auth sources, secret file locations, and anything tied to credentials.
</p>
</div>
</div>
</div>


<div id="outline-container-org4e869cd" class="outline-2">
<h2 id="org4e869cd"><span class="section-number-2">4.</span> Auth Sources</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> auth-sources
      `(,(expand-file-name <span style="color: #bc8f8f;">"authinfo.gpg"</span> xan/data-dir)
        <span style="color: #bc8f8f;">"~/.authinfo.gpg"</span> <span style="color: #bc8f8f;">"~/.authinfo"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3cad6b" class="outline-2">
<h2 id="orgb3cad6b"><span class="section-number-2">5.</span> GPG/epa Configuration</h2>
<div class="outline-text-2" id="text-5">
<p>
This lets you input GPG passphrases in Emacs minibuffer (or silently if agent is set up).
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">epa-file</span>)
(epa-file-enable)

(<span style="color: #4169e1;">setq</span> epg-pinentry-mode 'loopback
      epa-file-cache-passphrase-for-symmetric-encryption t
      epa-file-encrypt-to '(<span style="color: #bc8f8f;">"your@email.com"</span>) <span style="color: #b22222;">;; </span><span style="color: #b22222;">if you use encryption targets</span>
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf98c39" class="outline-2">
<h2 id="orgaf98c39"><span class="section-number-2">6.</span> Load Optional Secrets Files</h2>
<div class="outline-text-2" id="text-6">
<p>
If you have a file with secrets (not committed), then in data/secrets.el, you
can define tokens, passwords, etc. (outside version control).
</p>

<div class="org-src-container">
<pre class="src src-emacss-lisp">(defconst xan/secrets-file (expand-file-name "secrets.el" xan/data-dir))
(when (file-readable-p xan/secrets-file)
  (load xan/secrets-file))
</pre>
</div>
</div>
</div>

<div id="outline-container-org04df8c8" class="outline-2">
<h2 id="org04df8c8"><span class="section-number-2">7.</span> Optional Vault/GPG agent settings</h2>
<div class="outline-text-2" id="text-7">
<p>
If you use gpg-agent, you can remind Emacs where the socket is:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(setenv <span style="color: #bc8f8f;">"GPG_AGENT_INFO"</span> nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">let gpg-agent manage itself in modern setups</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6c5eed7" class="outline-2">
<h2 id="org6c5eed7"><span class="section-number-2">8.</span> Disabling Backups of Files Containing Encrypted Content</h2>
<div class="outline-text-2" id="text-8">
<p>
Article: <a href="http://anirudhsasikumar.net/blog/2005.01.21.html">Controlling Backups</a> of Sensitive Files
</p>

<p>
With org-crypt, if you have autosave turned on and decrypt the entries within
Emacs, the autosave file will contain the entries in plain text.  For this
reason let's define a minor-mode we'll call "sensitive-mode" which can can
place onto files containing encrypted content.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">define-minor-mode</span> <span style="color: #0000ff;">sensitive-mode</span>
  <span style="color: #bc8f8f;">"For sensitive files like password lists.</span>
<span style="color: #bc8f8f;">   It disables backup creation and auto saving.</span>

<span style="color: #bc8f8f;">   With no argument, this command toggles the mode.</span>
<span style="color: #bc8f8f;">   Non-null prefix argument turns on the mode.</span>
<span style="color: #bc8f8f;">   Null prefix argument turns off the mode."</span>

  <span style="color: #00008b;">:init-value</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">The initial value.</span>
  <span style="color: #00008b;">:lighter</span> <span style="color: #bc8f8f;">" Sensitive"</span>  <span style="color: #b22222;">;; </span><span style="color: #b22222;">The indicator for the mode line.</span>
  <span style="color: #00008b;">:keymap</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">The minor mode bindings.</span>
  <span style="color: #00008b;">:group</span> 'epa      <span style="color: #b22222;">;; </span><span style="color: #b22222;">optional grouping for `C-h v`</span>

  (<span style="color: #4169e1;">if</span> sensitive-mode

    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Turning on</span>
    (<span style="color: #4169e1;">progn</span>
      (set (make-local-variable 'backup-inhibited) t)
      (<span style="color: #4169e1;">when</span> auto-save-default
        (auto-save-mode -1)))

    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Turning off: restore defaults</span>
    (kill-local-variable 'backup-inhibited)
    (<span style="color: #4169e1;">when</span> auto-save-default
      (auto-save-mode 1))))
</pre>
</div>

<p>
Set sensitive mode to turn on by default for files having the <code>.gpg</code>
extension.  The following code does exactly that:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> auto-mode-alist
  (append
    '((<span style="color: #bc8f8f;">"\\.org\\.gpg$"</span> . org-mode))
    '((<span style="color: #bc8f8f;">"\\.gpg$"</span> . sensitive-mode))
    auto-mode-alist)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb4e677f" class="outline-2">
<h2 id="orgb4e677f"><span class="section-number-2">9.</span> gnutls – TLS security for downloading packages or HTTPS communication</h2>
<div class="outline-text-2" id="text-9">
<p>
For the love of all that is holy, do not continue with untrusted connections!
</p>

<p>
By default Emacs will try to verify an HTTPS/TLS server’s certificate
but <span class="underline">quietly fall back to “allow” on certain errors</span> (expired, mismatched name, unknown CA).
</p>

<p>
Here I turn on <span class="underline">strict certificate checking</span> — Emacs will refuse any
connection whose cert can’t be fully validated, protecting you from
MITM attacks or bad mirrors.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> gnutls
  <span style="color: #00008b;">:defer</span> t
  <span style="color: #00008b;">:custom</span>
  (gnutls-verify-error t))
</pre>
</div>

<p>
#+END_SRC
</p>
</div>
</div>


<div id="outline-container-orgcd8b470" class="outline-2">
<h2 id="orgcd8b470"><span class="section-number-2">10.</span> Phase 10 – UI and input system</h2>
<div class="outline-text-2" id="text-10">
<p>
A very solid and important question is how to build a clean, layered visual
design for Emacs, especially when mixing a base theme (like modus-vivendi), a
preferred font (PragmataPro), and targeted overrides (e.g. org-mode styling).
</p>

<p>
To get a beautiful, deterministic Emacs:
</p>

<ol class="org-ol">
<li>Set fonts (default, fixed-pitch, variable-pitch) first (10-ui-font-face.org)</li>
<li>Load your base theme (modus-vivendi) second (12-ui-frame-appearance.org)</li>
<li>Apply mode-specific overrides (e.g., Org faces) after theme (later in 53-org-links-export.org)</li>
<li>Use UI packages (e.g., org-modern, org-appear) last (later in 55-org-ui.org)</li>
</ol>

<p>
Here’s a recommended layering order and how to organize your
10-ui-font-face.org and related files for long-term maintainability.
</p>

<p>
;;; CONFIG SEQUENCE OVERVIEW
;; 00-core-boot.org            &#x2013;&gt; Environment, dirs, sanity guards
;; 10-ui-font-face.org        &#x2013;&gt; Font selection + fallback (MUST come before theme)
;; 12-ui-frame-appearance.org &#x2013;&gt; Theme + Frame sizing/UI (AFTER font)
;; 53-org-links-export.org    &#x2013;&gt; Org export and links setup
;; 55-org-ui.org              &#x2013;&gt; All Org UI (faces, bullets, agenda tweaks)
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>~/.emacs.d/10-ui-font-face.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 10-ui-font-face
<span class="linenr">2: </span>#+DESCRIPTION: Font selection + fallback (MUST come before theme)
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">10-ui-font-face.el --- Font selection + fallback (MUST come before theme) -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org64fd05a" class="outline-2">
<h2 id="org64fd05a"><span class="section-number-2">11.</span> Choice of Font for the Emacs Work Area</h2>
<div class="outline-text-2" id="text-11">
<p>
<a href="https://fsd.it">https://fsd.it</a>
</p>
</div>

<div id="outline-container-orged4714c" class="outline-3">
<h3 id="orged4714c"><span class="section-number-3">11.1.</span> Install PragmataPro Font onto Ubuntu Linux</h3>
<div class="outline-text-3" id="text-11-1">
<p>
PragmataPro™ is a condensed monospaced font optimized for screen, designed by
Fabrizio Schiavi to be the ideal font for coding, math and engineering
</p>

<p>
PragmataPro™ has no interline spacing, so the lines are more compact in height
not just in width. You can view a lot of windows at the same time!
</p>

<p>
Designed for the best possible view at low sizes.
</p>

<p>
More than 9000 characters optimized from 9pt to 48pt to guarantee the best
possible readability
</p>

<p>
Designed for every programming language and context.
</p>

<p>
I purchased a nice font from <a href="https://fsd.it/shop/fonts/pragmatapro/">https://fsd.it/shop/fonts/pragmatapro/</a> and then
told Emacs to use it by doing the following.
</p>

<p>
To install the new font into Ubuntu Linux, I downloaded the .zip file and
unpacked it under the directory <i>usr/share/fonts/truetype/PragmataPro0.829</i>.
I then rebuild the font cache usng <code>fc-cache -f -v</code>.  Note that the <code>fc-cache</code>
executable is available using <code>apt-get install fontconfig</code>.
</p>

<p>
I can confirm they are installed correctly by running <code>fc-list | grep
Pragmata</code>.  I can view them by using the "Font Manager" program on my Linux
desktop or the "Font Matrix" program which is better.
</p>

<p>
In my case, the PragmataPro fonts are divided up into:
</p>

<ul class="org-ul">
<li>Family: PragmataPro
<ul class="org-ul">
<li>Style: Regular      PragmataPro</li>
<li>Style: Italic       PragmataPro Italic</li>
<li>Style: Bold         PragmataPro Bold</li>
<li>Style: Bold Italic  PragmagaPro Bold Italic</li>
</ul></li>
<li>Family: PragmataPro Liga
<ul class="org-ul">
<li>Style: Regular      PragmataPro Liga</li>
<li>Style: Italic       PragmataPro Liga Italic</li>
<li>Style: Bold         PragmataPro Liga Bold</li>
<li>Style: Bold Italic  PragmagaPro Liga Bold Italic</li>
</ul></li>
<li>Family: PragmataPro Mono
<ul class="org-ul">
<li>Style: Regular      PragmataPro Mono</li>
<li>Style: Italic       PragmataPro Mono Italic</li>
<li>Style: Bold         PragmataPro Mono Bold</li>
<li>Style: Bold Italic  PragmagaPro Mono Bold Italic</li>
</ul></li>
<li>Family: PragmataPro Mono Liga
<ul class="org-ul">
<li>Style: Regular      PragmataPro Mono Liga</li>
<li>Style: Italic       PragmataPro Mono Liga Italic</li>
<li>Style: Bold         PragmataPro Mono Liga Bold</li>
<li>Style: Bold Italic  PragmagaPro Mono Liga Bold Italic</li>
</ul></li>
</ul>






<p>
$ fc-list                  &#x2013; to see what fonts you have installed
$ fc-list | grep -i pragmata
$ cd ~/.local/share/fonts/
$ unzip ~/Downloads/PragmataPro0.9-8svlok.zip
$ rm -rf PragmataPro0.829
$ fc-cache -fv             &#x2013; caches new ones, removes old ones
$ fc-list | grep -i pragmata
</p>
</div>
</div>

<div id="outline-container-orge09ede4" class="outline-3">
<h3 id="orge09ede4"><span class="section-number-3">11.2.</span> Enable Emacs to Use It for Normal Text Display</h3>
<div class="outline-text-3" id="text-11-2">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/emacs/comments/4sm6fa/how_to_enable_pragmatapro_ligatures/">How to enable PragmataPro ligatures : emacs</a></li>
<li><a href="https://www.emacswiki.org/emacs/SetFonts">EmacsWiki: Set Fonts</a></li>

<li><a href="https://github.com/pop-os/pop/issues/111">Trouble Installing Truetype Fonts · Issue #111 · pop-os/pop · GitHub</a></li>
</ul>

<p>
You’ll want to stop calling your font‐picking code unconditionally at
load time, and instead only run it once a graphical frame
exists. Here’s a drop-in replacement for your 12-ui-font-face bits
that:
</p>

<ol class="org-ol">
<li>Wraps any call to xan/choose-frame-font in a check for a GUI frame</li>
<li>Hooks it to both Emacs startup and any new frames (so it works for daemon + emacsclient)</li>
<li>Never runs in -nw or headless daemon-start</li>
</ol>

<p>
Why this code below fixes it
</p>
<ul class="org-ul">
<li>display-graphic-p returns non-nil only when that frame is really on X/Wayland/macOS GUI.</li>
<li>By using window-setup-hook you wait until Emacs has a GUI connection before trying x-list-fonts.</li>
<li>By using after-make-frame-functions you cover frames created by emacsclient -c when running Emacs as a daemon.</li>
<li>In -nw (or during early daemon start) neither hook nor body runs, so the x-list-fonts error goes away.</li>
</ul>

<p>
With this in place, you’ll only try to pick and apply a GUI font when
it actually makes sense, and both CLI (-nw) and headless (&#x2013;daemon)
launches will no longer blow up.
</p>

<p>
Select and record the chosen font early.
</p>

<p>
Apply it both at startup and per frame creation.
</p>

<p>
Reassert it after any theme is loaded.
</p>

<p>
Use only a single point of truth (xan/selected-font) to avoid mismatched font declarations.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Select Best Available Font</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">xan/selected-font</span> nil
  <span style="color: #bc8f8f;">"Font selected by `xan/choose-frame-font`, to be reasserted after theme load."</span>)

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">xan/choose-frame-font</span> ()
  <span style="color: #bc8f8f;">"Select font once and store in `xan/selected-font`."</span>
  (<span style="color: #4169e1;">unless</span> xan/selected-font
    (<span style="color: #4169e1;">let</span> ((preferred '(<span style="color: #bc8f8f;">"PragmataPro Mono Liga-14"</span>
                       <span style="color: #bc8f8f;">"PragmataPro Mono-14"</span>
                       <span style="color: #bc8f8f;">"PragmataPro-14"</span>
                       <span style="color: #bc8f8f;">"monospace-14"</span>)))
      (<span style="color: #4169e1;">catch</span> '<span style="color: #5f9ea0;">found</span>
        (<span style="color: #4169e1;">dolist</span> (pattern preferred)
          (<span style="color: #4169e1;">let</span> ((fonts (x-list-fonts pattern)))
            (<span style="color: #4169e1;">when</span> fonts
              (message <span style="color: #bc8f8f;">"[font] Found matches for '</span><span style="color: #5f9ea0;">%s</span><span style="color: #bc8f8f;">':"</span> pattern)
              (<span style="color: #4169e1;">dolist</span> (f fonts) (message <span style="color: #bc8f8f;">"        %s"</span> f))
              (<span style="color: #4169e1;">setq</span> xan/selected-font
                    (<span style="color: #4169e1;">or</span> (seq-find (<span style="color: #4169e1;">lambda</span> (f)
                                    (<span style="color: #4169e1;">and</span> (not (string-match-p <span style="color: #bc8f8f;">"-italic-"</span> f))
                                         (not (string-match-p <span style="color: #bc8f8f;">"-bold-"</span> f))))
                                  fonts)
                        (car fonts)))
              (message <span style="color: #bc8f8f;">"[font] Selected: %s"</span> xan/selected-font)
              (<span style="color: #4169e1;">throw</span> '<span style="color: #5f9ea0;">found</span> xan/selected-font)))))))
  (<span style="color: #4169e1;">unless</span> xan/selected-font
    (message <span style="color: #bc8f8f;">"[font] &#9888; No preferred fonts matched."</span>))
  xan/selected-font)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>Apply Font Selection</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">xan/set-frame-font-if-graphic</span> (<span style="color: #228b22;">&amp;optional</span> frame)
  <span style="color: #bc8f8f;">"Apply cached `xan/selected-font` if graphical."</span>
  (<span style="color: #4169e1;">let</span> ((frame (<span style="color: #4169e1;">or</span> frame (selected-frame))))
    (<span style="color: #4169e1;">when</span> (display-graphic-p frame)
      (xan/choose-frame-font)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Only runs once</span>
      (<span style="color: #4169e1;">when</span> xan/selected-font
        (<span style="color: #4169e1;">with-selected-frame</span> frame
          (set-frame-font xan/selected-font nil t)
          (message <span style="color: #bc8f8f;">"[font] Using frame font: %s"</span> xan/selected-font))))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">1) On initial Emacs GUI startup</span>
(<span style="color: #4169e1;">unless</span> (member #'xan/set-frame-font-if-graphic window-setup-hook)
  (add-hook 'window-setup-hook #'xan/set-frame-font-if-graphic))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">2) On every new frame (covers daemon + emacsclient -c)</span>
(<span style="color: #4169e1;">unless</span> (member #'xan/set-frame-font-if-graphic after-make-frame-functions)
  (add-hook 'after-make-frame-functions #'xan/set-frame-font-if-graphic))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>Reassert Font After Theme Load</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">xan/reassert-selected-font</span> ()
  <span style="color: #bc8f8f;">"Reset default font after themes that might override it."</span>
  (<span style="color: #4169e1;">when</span> (<span style="color: #4169e1;">and</span> xan/selected-font (display-graphic-p))
    (set-frame-font xan/selected-font nil t)
    (message <span style="color: #bc8f8f;">"[font] Reasserted frame font: %s"</span> xan/selected-font)))

(advice-add 'load-theme <span style="color: #00008b;">:after</span>
            (<span style="color: #4169e1;">lambda</span> (<span style="color: #228b22;">&amp;rest</span> _)
              (xan/reassert-selected-font)))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>Debug Aid for Theme Behavior</label><pre class="src src-emacs-lisp">(advice-add 'load-theme <span style="color: #00008b;">:after</span>
            (<span style="color: #4169e1;">lambda</span> (theme <span style="color: #228b22;">&amp;rest</span> _)
              (message <span style="color: #bc8f8f;">"[theme] %s loaded. Default face now: %S"</span>
                       theme (face-attribute 'default <span style="color: #00008b;">:family</span>))))
</pre>
</div>

<p>
To display the complete list of fonts known to Emacs, execute the following in the
<b>Scratch Buffer</b>.
</p>

<p>
### #+BEGIN_SRC emacs-lispER
###   (dolist (font (x-list-fonts "<b>"))
###     (insert (format "%s\n" font)))-GOOG-Noto Sans CJK KR-normal-normal-normal-</b>-<b>-</b>-<b>-</b>
### #+END_SRC
</p>

<p>
(face-attribute 'default :family)
</p>
</div>
</div>


<div id="outline-container-orgd117c92" class="outline-3">
<h3 id="orgd117c92"><span class="section-number-3">11.3.</span> Enable Linux Shell to Use It for Normal Text Display</h3>
<div class="outline-text-3" id="text-11-3">
<p>
<a href="https://github.com/gabrielelana/awesome-terminal-fonts/blob/master/README.md#how-to-install-linux">https://github.com/gabrielelana/awesome-terminal-fonts/blob/master/README.md#how-to-install-linux</a>
<a href="https://askubuntu.com/questions/1013201/cant-set-up-awesome-terminal-fonts">https://askubuntu.com/questions/1013201/cant-set-up-awesome-terminal-fonts</a>
</p>

<p>
<a href="https://gist.github.com/DeLaGuardo/fe1f3d9397d6ef7468460d54d5601156">https://gist.github.com/DeLaGuardo/fe1f3d9397d6ef7468460d54d5601156</a>
<a href="https://bastibe.de/2017-09-19-multi-font-themes.html">https://bastibe.de/2017-09-19-multi-font-themes.html</a>
</p>
</div>
</div>

<div id="outline-container-org691efb2" class="outline-3">
<h3 id="org691efb2"><span class="section-number-3">11.4.</span> Enable LaTeX to Use It for Formatted Text</h3>
</div>

<div id="outline-container-orgfc20fa3" class="outline-3">
<h3 id="orgfc20fa3"><span class="section-number-3">11.5.</span> Enable PragmataPro Ligature  <a href="https://github.com/lumiknit/emacs-pragmatapro-ligatures">https://github.com/lumiknit/emacs-pragmatapro-ligatures</a></h3>
<div class="outline-text-3" id="text-11-5">
<p>
<code>USE THIS ONE</code>
</p>

<p>
both use prettify-symbols-mode
</p>

<p>
This package:
</p>
<ul class="org-ul">
<li>Provides a minor mode: pragmatapro-ligatures-mode.</li>
<li>Uses prettify-symbols-mode to define ligatures as replacements for character sequences.</li>
<li>Works without relying on Emacs-level font shaping support (i.e., independent of HarfBuzz or font-backend magic).</li>
<li>Specifically tailored for PragmataPro font — it maps sequences like <code>=, !</code>, etc. to Unicode glyphs that are shaped as ligatures in PragmataPro.</li>
</ul>

<p>
💡 Summary: A clean, Emacs-native way to enable synthetic ligatures via symbol substitution.
</p>

<p>
if (x != y &amp;&amp; a == b) { return x-&gt;b; }
</p>

<p>
(message "Mode: %s" major-mode)
(message "Font: %s" (face-attribute 'default :font))
(message "Family: %s" (face-attribute 'default :family))
(message "Symbols: %s" prettify-symbols-alist)
(message "Prettify Mode: %s" prettify-symbols-mode)
</p>


<p>
(insert "≠ ≥ ⇐ ⇒ ⇔ → ←")
</p>

<p>
<a href="https://github.com/lumiknit/emacs-pragmatapro-ligatures">https://github.com/lumiknit/emacs-pragmatapro-ligatures</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">declare-function</span> pragmatapro-lig-mode <span style="color: #bc8f8f;">"pragmatapro-prettify-symbols-v0.830"</span>)

(<span style="color: #4169e1;">use-package</span> pragmatapro-ligatures
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"lumiknit/emacs-pragmatapro-ligatures"</span>
             <span style="color: #00008b;">:local-repo</span> <span style="color: #bc8f8f;">"pragmatapro-ligatures"</span>
             <span style="color: #00008b;">:files</span> (<span style="color: #bc8f8f;">"*.el"</span>))
  <span style="color: #00008b;">:init</span>
    (load (expand-file-name <span style="color: #bc8f8f;">"pragmatapro-lig.el"</span>
                            (straight--repos-dir <span style="color: #bc8f8f;">"pragmatapro-ligatures"</span>))
          nil 'nomessage
    )
    (add-hook 'prog-mode-hook #'pragmatapro-lig-mode)
    (add-hook 'text-mode-hook #'pragmatapro-lig-mode)
    (add-hook 'org-mode-hook #'pragmatapro-lig-mode)
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(pragmatapro-lig-global-mode)</span>
    <span style="color: #00008b;">:no-require</span> t
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b4469d" class="outline-3">
<h3 id="org3b4469d"><span class="section-number-3">11.6.</span> Alternate Automatic Text Replacement with Symbols DISABLED</h3>
<div class="outline-text-3" id="text-11-6">
<p>
I am skipping this one because I only use the PragmataPro Ligature font:
</p>
<ul class="org-ul">
<li><span class="underline">Simulates</span> ligatures using prettify-symbols-mode.</li>
<li>Works even with fonts that don't support ligatures.</li>
<li>Is unnecessary when you’re using a ligature-capable font like PragmataPro Ligature.</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> pragmatapro-prettify-symbols
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:host</span> github
             <span style="color: #00008b;">:repo</span> <span style="color: #bc8f8f;">"fabrizioschiavi/pragmatapro"</span>
             <span style="color: #00008b;">:local-repo</span> <span style="color: #bc8f8f;">"pragmatapro-prettify-symbols"</span>
             <span style="color: #00008b;">:files</span> (<span style="color: #bc8f8f;">"emacs_snippets/*.el"</span>))
  <span style="color: #00008b;">:init</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Load the actual file manually</span>
  (<span style="color: #4169e1;">let*</span> ((dir (straight--repos-dir <span style="color: #bc8f8f;">"pragmatapro-prettify-symbols"</span>))
         (file (expand-file-name <span style="color: #bc8f8f;">"emacs_snippets/pragmatapro-prettify-symbols-v0.830.el"</span> dir)))
    (load file nil 'nomessage)
    (<span style="color: #4169e1;">when</span> (fboundp 'pragmatapro-prettify-symbols-v0.830)
      (add-hook 'prog-mode-hook #'pragmatapro-prettify-symbols-v0.830)))
  <span style="color: #00008b;">:no-require</span> t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">prevents use-package from trying to `require`</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7d833e9" class="outline-2">
<h2 id="org7d833e9"><span class="section-number-2">12.</span> Faces for Emacs Text            <code>faces vs colors vs themes</code></h2>
<div class="outline-text-2" id="text-12">
<p>
To see the various faces:
    M-x list-faces-display
</p>

<p>
??? are the following needed to use faces or themes ???
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-font-lock-mode
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Enable colorized text everywhere.</span>

(<span style="color: #4169e1;">setq</span> font-lock-maximum-decoration
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Enable colorized text everywhere.</span>
</pre>
</div>
</div>

<div id="outline-container-orge8a6f9b" class="outline-3">
<h3 id="orge8a6f9b"><span class="section-number-3">12.1.</span> org-mode face elements</h3>
<div class="outline-text-3" id="text-12-1">
<p>
(set-face-attribute 'default nil :family "PragmataPro" :height 130)
</p>

<p>
(set-face-attribute 'default nil
  :family "PragmataPro"
  :height 130
  :weight 'normal
  :slant 'normal)
</p>
</div>

<div id="outline-container-orgaccf768" class="outline-4">
<h4 id="orgaccf768"><span class="section-number-4">12.1.1.</span> Visual Test of Typefaces in Org-Mode</h4>
<div class="outline-text-4" id="text-12-1-1">
<ul class="org-ul">
<li><b>Testing</b>   boldface</li>
<li><i>Testing</i>   italics</li>
<li><code>Testing</code>   verbatim</li>
<li>-Testing-</li>
<li><del>Testing</del>   strikethru</li>
<li><code>Testing</code>   code
<dl class="org-dl">
<dt>Testing</dt><dd>description list</dd>
</dl></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">; </span><span style="color: #b22222;">Text surrounded by =TEXT=</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(set-face-attribute 'org-verbatim nil :foreground "LightGrey" :box "Orange" :inverse-video t)</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">Text surrounded by ~TEXT~</span>
(set-face-attribute 'org-code nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"Purple"</span>)

<span style="color: #b22222;">; </span><span style="color: #b22222;">Text representing the definition term in a description list   - TERM  :: DEFINITION</span>
(set-face-attribute 'org-list-dt nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"Orange"</span> <span style="color: #00008b;">:box</span> <span style="color: #bc8f8f;">"White"</span> <span style="color: #00008b;">:inverse-video</span> t)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcf90f3e" class="outline-2">
<h2 id="orgcf90f3e"><span class="section-number-2">13.</span> SHOULD DISPLAY of BELL GO IN HERE ???  OR IN 10-ui-frame-appearance.org ???</h2>
<div class="outline-text-2" id="text-13">
<p>
#+END_SRC
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>~/.emacs.d/12-ui-frame-appearance.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 12-ui-frame-appearance
<span class="linenr">2: </span>#+DESCRIPTION: Theme + Frame sizing/UI (AFTER font)
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">12-ui-frame-appearance.el --- Theme + Frame sizing/UI (AFTER font) -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf39c1e5" class="outline-2">
<h2 id="orgf39c1e5"><span class="section-number-2">14.</span> Themes</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> modus-themes
  <span style="color: #00008b;">:init</span>
    (load-theme 'modus-vivendi t)
  <span style="color: #00008b;">:custom</span>
    (modus-themes-italic-constructs t)
    (modus-themes-bold-constructs nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb5093df" class="outline-2">
<h2 id="orgb5093df"><span class="section-number-2">15.</span> UI Performance Tweaks</h2>
<div class="outline-text-2" id="text-15">
<p>
;; -----------------------------------------------------------------&#x2013;&#x2014;
;; Set various low-level UI presentation variables for maximum performance.
</p>

<p>
(setq
</p>

<p>
;; Prevents rounding errors during font/frame changes. Very useful.
</p>

<p>
frame-resize-pixelwise  t
</p>

<p>
;; Resizing the Emacs frame can be a terribly expensive part of
;; changing the font.  By inhibiting this, we easily halve startup
;; times with fonts that are larger than the system default.
;;
;; Avoids expensive frame resizing during font/theme init. Good for
;; large fonts or tiling WMs (which I use under Pop_OS! by
;; System76).
</p>

<p>
frame-inhibit-implied-resize  t
</p>

<p>
;; Prevents the message that says: "Welcome to GNU Emacs, one
;; component of the GNU operating system." that normally appears at
;; the top of the <b>scratch</b> buffer.
</p>

<p>
inhibit-startup-message t
</p>

<p>
;; Frame customization
default-frame-alist
  '((fullscreen . maximized)
    (menu-bar-lines . 0)
    (tool-bar-lines . 0)
    (vertical-scroll-bars . nil)
    (bottom-divider-width . 0)
    (right-divider-width . 1)
    ;; Uncomment to avoid theme flash:
    ;; (background-color . "#000000")
    ;; (ns-appearance . dark)
    ;; (ns-transparent-titlebar . t)
   )
</p>

<p>
initial-frame-alist  default-frame-alist
</p>

<p>
;; annoyance supressions
;; byte-compile-warnings  '(not obsolete)
;; warning-suppress-log-types  '((comp) (bytecomp))
;; native-comp-async-report-warnings-errors  'silent
</p>

<p>
  ;; Silence message: "For information about GNU Emacs and the GNU system, type C-h C-a."
  ;; inhibit-startup-echo-area-message (user-login-name)
)
</p>

<p>
(setq-default
</p>

<p>
;; Avoid flicker or incorrect sizing of child frames
;; (e.g. completion popups) under GTK.  `resize-mode` ensures GTK
;; resizes them correctly without delays.  Especially helpful in
;; Wayland, where native resizing behavior differs from X11 and is
;; stricter.  It's a no-regret setting under GTK/Wayland.
</p>

<p>
x-gtk-resize-child-frames  'resize-mode
</p>

<p>
;; Control which symbols appear in the left and right fringes of
;; Emacs windows to indicate things like:
;;
;;  - Buffer truncation
;;  - Continuation lines (soft-wrapped)
;;  - Buffer boundaries
;;  - Overlay arrows (e.g. for next-error)
;;  - Custom indicators (e.g. for git-gutter, flycheck, etc.)
</p>

<p>
  ;; fringe-indicator-alist  (assq-delete-all 'truncation fringe-indicator-alist)
)
</p>

<p>
;; Highly recommended under Wayland/PGTK.  Disables reading X resources
;; (e.g., .Xresources), which are irrelevant and possibly harmful
;; under Wayland.  Prevents color/font overrides that conflict with your
;; Emacs config.  Also disables xrdb-related hacks from old X11 setups.
</p>

<p>
(advice-add #'x-apply-session-resources :override #'ignore)
</p>
</div>













<div id="outline-container-org3a9524f" class="outline-3">
<h3 id="org3a9524f"><span class="section-number-3">15.1.</span> Top Bar of Emacs Screen</h3>
<div class="outline-text-3" id="text-15-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>???TBD</label><pre class="src src-emacs-lisp">(menu-bar-mode
  -1)   <span style="color: #b22222;">; </span><span style="color: #b22222;">Whether to show the menu bar along the top.</span>

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">(defun new-frame-setup (frame)</span>
<span style="color: #b22222;">;;;;   </span><span style="color: #b22222;">(if (display-graphic-p frame)</span>
<span style="color: #b22222;">;;;;       </span><span style="color: #b22222;">(progn</span>
<span style="color: #b22222;">;;;;          </span><span style="color: #b22222;">(message "This is a windowing system.")</span>

<span style="color: #b22222;">;;;;          </span><span style="color: #b22222;">;; Don't want a toolbar in GUI mode (errs in invoke in text mode)</span>
<span style="color: #b22222;">;;;;          </span><span style="color: #b22222;">(tool-bar-mode -1)</span>

<span style="color: #b22222;">;;;;          </span><span style="color: #b22222;">;; Set the default size of the new frame</span>
<span style="color: #b22222;">;;;;          </span><span style="color: #b22222;">(set-frame-size (selected-frame) 150 50)</span>
<span style="color: #b22222;">;;;;       </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;;       </span><span style="color: #b22222;">(message "This is a non-windowing system.")</span>
<span style="color: #b22222;">;;;;   </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">)</span>

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">;; Run across all already-existing frames, to catch 1st frame</span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">(mapc 'new-frame-setup (frame-list))</span>

<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">;; But also run when a new frame is created</span>
<span style="color: #b22222;">;;;; </span><span style="color: #b22222;">(add-hook 'after-make-frame-functions 'new-frame-setup)</span>

<span style="color: #b22222;">;</span><span style="color: #b22222;">--(tool-bar-mode</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">--    nil)</span>

(<span style="color: #4169e1;">setq</span> frame-title-format
  <span style="color: #bc8f8f;">"Emacs: %b"</span>)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Displays the name of the file being edited in the title bar along the top.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf7ab62d" class="outline-3">
<h3 id="orgf7ab62d"><span class="section-number-3">15.2.</span> Along the Left/Right Sides of the Emacs Screen</h3>
<div class="outline-text-3" id="text-15-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>???TBD</label><pre class="src src-emacs-lisp"><span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq-default scroll-bar-mode</span>
<span style="color: #b22222;">;;    </span><span style="color: #b22222;">nil)      ; Whether to show the scroll bar at all.</span>
(set-scroll-bar-mode nil)

<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(setq-default set-scroll-bar-mode</span>
<span style="color: #b22222;">;;    </span><span style="color: #b22222;">'right)   ; Where to show the scroll bar, left or right side.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc1e61ad" class="outline-2">
<h2 id="orgc1e61ad"><span class="section-number-2">16.</span> Preferred UI Behavior</h2>
<div class="outline-text-2" id="text-16">
</div>
<div id="outline-container-org8635eef" class="outline-3">
<h3 id="org8635eef"><span class="section-number-3">16.1.</span> Make the "Active Region" Visible</h3>
<div class="outline-text-3" id="text-16-1">
<p>
There are two controls over whether the region is highlighted or not:
</p>

<ul class="org-ul">
<li>transient-mark-mode (variable)</li>
<li>transient-mark-mode (function)   a global minor mode</li>
</ul>

<p>
By default the <code>transient-mark-mode</code> variable is non-nil, so the region <b>is</b>
highlighted, using the <code>region</code> face.
</p>
</div>
</div>

<div id="outline-container-orgcfd3385" class="outline-3">
<h3 id="orgcfd3385"><span class="section-number-3">16.2.</span> Make Trailing Whitespace Visible</h3>
<div class="outline-text-3" id="text-16-2">
<p>
I like to highlight trailing whitespace as it bothers me when it exists
invisibly, although sometimes I use this highlighting to mark important TODO
headlines in <code>org-mode</code>.
</p>

<p>
The face used to indicate trailing whitespace is ‘trailing-whitespace’.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq-default</span> show-trailing-whitespace
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Visually indicate presence of whitespace at end-of-lines.</span>

(global-set-key         [f2]
  'delete-trailing-whitespace)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Remove all trailing whitespace</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq-default</span> default-indicate-empty-lines
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Visually indicate presence of blank lines at EOBs.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf9ce316" class="outline-3">
<h3 id="orgf9ce316"><span class="section-number-3">16.3.</span> Highlight the Entire Current Line</h3>
<div class="outline-text-3" id="text-16-3">
<p>
I like to highlight the entire current line, for better visibility while
navigating.  The face <code>hl-line-face</code> is used to do the highlight, and I just
change the background to my choice of color.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-hl-line-mode +1)

(set-face-attribute 'hl-line  <span style="color: #b22222;">; </span><span style="color: #b22222;">of hl-line-face</span>
  nil <span style="color: #00008b;">:inherit</span> nil <span style="color: #00008b;">:background</span> <span style="color: #bc8f8f;">"darkred"</span>)
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-orgddb4bb5" class="outline-2">
<h2 id="orgddb4bb5"><span class="section-number-2">17.</span> Bell Indicator</h2>
<div class="outline-text-2" id="text-17">
<p>
<a href="https://www.emacswiki.org/emacs/AlarmBell">https://www.emacswiki.org/emacs/AlarmBell</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> visible-bell
  nil           <span style="color: #b22222;">; </span><span style="color: #b22222;">play the bell sound</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">t          ; quietly flash the top and bottom lines of the Emacs frame</span>
)
</pre>
</div>
</div>

<div id="outline-container-org15365b5" class="outline-3">
<h3 id="org15365b5"><span class="section-number-3">17.1.</span> Lowest Level of Control</h3>
<div class="outline-text-3" id="text-17-1">
<p>
At the <b>lowest level</b> of Emacs there is a variable defining a custom function
to ring the bell, or (usually) left nil to allow the ring to occur naturally.
To <b>globally</b> disable the bell do the following:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> ring-bell-function 'ignore)
</pre>
</div>

<p>
or provide a function that uses your choice of sound playing mechanism:
</p>

<div class="org-src-container">
<pre class="src src-ZZZemacs-lisp">(setq ring-bell-function (lambda ()
  (play-sound-file "/this/is/my/errorsound.au")))
</pre>
</div>
</div>
</div>

<div id="outline-container-org4814f44" class="outline-3">
<h3 id="org4814f44"><span class="section-number-3">17.2.</span> High Level of Control</h3>
<div class="outline-text-3" id="text-17-2">
<ul class="org-ul">
<li><a href="https://emacs.stackexchange.com/questions/34746/how-to-get-an-audible-feedback-when-the-current-task-is-overrun">https://emacs.stackexchange.com/questions/34746/how-to-get-an-audible-feedback-when-the-current-task-is-overrun</a></li>
<li><a href="https://emacs.stackexchange.com/questions/17796/emacs-tea-time-is-supposed-to-be-integrated-in-org-mode-but-apparently-its-no/17849#17849">https://emacs.stackexchange.com/questions/17796/emacs-tea-time-is-supposed-to-be-integrated-in-org-mode-but-apparently-its-no/17849#17849</a></li>
</ul>

<p>
At a high level of beep decision making, there is in the file <code>org-clock.el</code> a
variable indicating which sound to use when <code>org-mode</code> wants to notify you of
overrunning the time estimate for a task you are working on.
</p>

<div class="org-src-container">
<pre class="src src-ZZZemacs-lisp">(setq org-clock-sound nil) ;; no sound
(setq org-clock-sound t) ;; Standard Emacs beep
(setq org-clock-sound "/path/to/my/sound") ;; Play this sound file, fall back to beep
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-clock-sound <span style="color: #bc8f8f;">"~/bell-meditation-75335.mp3"</span>)

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">org-clock-play-sound</span> (<span style="color: #228b22;">&amp;optional</span> clock-sound)
  <span style="color: #bc8f8f;">"Play sound as configured by `</span><span style="color: #5f9ea0;">org-clock-sound</span><span style="color: #bc8f8f;">'.</span>
<span style="color: #bc8f8f;">Use mpg123 tool if available.</span>
<span style="color: #bc8f8f;">If CLOCK-SOUND is non-nil, it overrides `</span><span style="color: #5f9ea0;">org-clock-sound</span><span style="color: #bc8f8f;">'."</span>
  (<span style="color: #4169e1;">let</span>
    (
      (org-clock-sound (<span style="color: #4169e1;">or</span> clock-sound org-clock-sound))
    )
    (<span style="color: #4169e1;">cond</span>
      ( (not org-clock-sound)
                               )
      ( (eq org-clock-sound t)
          (beep t) (beep t)    )

      ( (stringp org-clock-sound)
        (<span style="color: #4169e1;">let</span>
          (
            (file (expand-file-name org-clock-sound))
          )
          (<span style="color: #4169e1;">if</span> (file-exists-p file)
            (<span style="color: #4169e1;">if</span> (executable-find <span style="color: #bc8f8f;">"mpg123"</span>)
              (start-process <span style="color: #bc8f8f;">"org-clock-play-notification"</span> nil <span style="color: #bc8f8f;">"mpg123"</span> file)
                (<span style="color: #4169e1;">condition-case</span> nil
                  (play-sound-file file)
                  (<span style="color: #ff0000; font-weight: bold;">error</span> (beep t) (beep t))
                )
            ) <span style="color: #b22222;">; </span><span style="color: #b22222;">end of if</span>
          ) <span style="color: #b22222;">; </span><span style="color: #b22222;">end of if</span>
        ) <span style="color: #b22222;">; </span><span style="color: #b22222;">end of let</span>
      )
    )
  )
)
</pre>
</div>

<p>
; (defun org-notify (notification &amp;optional play-sound)
;   "Send a NOTIFICATION and maybe PLAY-SOUND.
; If PLAY-SOUND is non-nil, it overrides `org-clock-sound'."
;   (org-show-notification notification)
;   (if play-sound (org-clock-play-sound play-sound)))
</p>

<p>
; (defun my/play-sound (orgin-fn sound)
;   (cl-destructuring-bind (_ _ file) sound
;     (make-process :name (concat "play-sound-" file)
;                   :connection-type 'pipe
;                   :command `("mpg123" ,file))))
; (advice-add 'play-sound :around 'my/play-sound)
</p>

<p>
In org-mode when a task is overrun - when the clocked time is bigger than the
effort, there is a visual feedback in the mode-line.  This variable can be
used to get an audible one as well.
</p>











<p>
#+END_SRC
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 17: </span>~/.emacs.d/15-ui-modeline-input.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 15-ui-modeline-input
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">15-ui-modeline-input.el --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org089c6e9" class="outline-3">
<h3 id="org089c6e9"><span class="section-number-3">17.3.</span> Along the Bottom, in the Mode Line</h3>
<div class="outline-text-3" id="text-17-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq-default</span> line-number-mode
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Enable the display, in the mode line along the bottom, of the current line number.</span>
(<span style="color: #4169e1;">setq-default</span> column-number-mode
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Enable the display, in the mode line along the bottom , of the current column number.</span>
</pre>
</div>

<p>
The Emacs modeline is a complex beast.
</p>

<p>
Define the Elements to Be Part of the Modeline
</p>
</div>

<div id="outline-container-orgc5f5a2a" class="outline-4">
<h4 id="orgc5f5a2a"><span class="section-number-4">17.3.1.</span> Defining My Own Face and a Property Clause to Conditionally Display It</h4>
<div class="outline-text-4" id="text-17-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lispER">(defface jeff-mode-line-client-face
  `( ;; spec
    (t (:background "red"))
  )
  "Used for displaying the region." ;; doc
)

(defface jeff-mode-line-client-face-inactive
  `( ;; spec
    (t (:background "gray"))
  )
  "Used for displaying the region." ;; doc
)
</pre>
</div>

<p>
;;  (set-face-attribute 'org-list-dt
;;    nil :foreground "Orange" :box "White" :inverse-video t)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispER">(defun jeff-window-active-p ()
  (eq (frame-selected-window) (selected-window))
)

(setq jeff2-mode-line-client
  `(""
    (:propertize
      (""
        (:eval
          (if (frame-parameter nil 'client)
            (
              "🠵x"
              'face (if (jeff-window-active-p)
                'jeff-mode-line-client-face
                'jeff-mode-line-client-face-inactive)
            )

            "")
        )
      )
      help-echo ,(purecopy "emacsclient frame"))
   )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7f85935" class="outline-4">
<h4 id="org7f85935"><span class="section-number-4">17.3.2.</span> Define My Custom Set of Widgets to Display on the Modeline</h4>
<div class="outline-text-4" id="text-17-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lispER">
  (setq-default mode-line-format
    (list
      "%e"                         ;; print error msg about full memory
       mode-line-front-space       ;; (:eval (if (display-graphic-p) " " "-"))
       ;; mode-line-mule-info

       jeff2-mode-line-client
       mode-line-modified
       mode-line-remote                ;; indicate a remote buffer
;;;🔒 🔓
       ;; mode-line-frame-identification  ;; (:eval (mode-line-frame-control))
       mode-line-buffer-identification
       " "
       mode-line-position              ;; (very long expr)
       ;; (vc-mode vc-mode)
       " "
       mode-line-modes             ;; (very long expr)
       mode-line-misc-info         ;; ((global-mode-string ("" global-mode-string " ")))
       mode-line-end-spaces        ;; (:eval (unless (display-graphic-p) "-%-"))
    )
  )
;;              (list
;;
;;               '(:eval (propertize (if (eq 'emacs evil-state) "  " "  ")
;;                                   'face (cogent/evil-state-face)))
;;
;;               " "
;;               mode-line-misc-info ; for eyebrowse
;;
;;               '(:eval (when-let (vc vc-mode)
;;                         (list " "
;;                               (propertize (substring vc 5)
;;                                           'face 'font-lock-comment-face)
;;                               " ")))
;;
;;               '(:eval (list
;;                        ;; the buffer name; the file name as a tool tip
;;                        (propertize " %b" 'face 'font-lock-type-face
;;                                    'help-echo (buffer-file-name))
;;                        (when (buffer-modified-p)
;;                          (propertize
;;                           " "
;;                           'face (if (cogent-line-selected-window-active-p)
;;                                     'cogent-line-modified-face
;;                                   'cogent-line-modified-face-inactive)))
;;                        (when buffer-read-only
;;                          (propertize
;;                           ""
;;                           'face (if (cogent-line-selected-window-active-p)
;;                                     'cogent-line-read-only-face
;;                                   'cogent-line-read-only-face-inactive)))
;;                        " "))
;;
;;               ;; relative position in file
;;               '(:eval (list (nyan-create))) ;; from the nyan-mode package
;;               (propertize "%p" 'face 'font-lock-constant-face)
;;
;;               ;; spaces to align right
;;               '(:eval (propertize
;;                        " " 'display
;;                        `((space :align-to (- (+ right right-fringe right-margin)
;;                                              ,(+ 3 (string-width mode-name)))))))
;;
;;               ;; the current major mode
;;               (propertize " %m " 'face 'font-lock-string-face)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6ba708" class="outline-4">
<h4 id="orge6ba708"><span class="section-number-4">17.3.3.</span> Define My Desired Appearance of Selected Modeline Widgets</h4>
<div class="outline-text-4" id="text-17-3-3">
</div>
<ol class="org-ol">
<li><a id="org061012d"></a>Defining the Appearance of the "Org-Mode Clock"<br />
<div class="outline-text-5" id="text-17-3-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(set-face-attribute 'org-mode-line-clock
  nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"green2"</span> <span style="color: #00008b;">:weight</span> 'bold)

(set-face-attribute 'org-mode-line-clock-overrun
  nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"red2"</span> <span style="color: #00008b;">:background</span> <span style="color: #bc8f8f;">"black"</span> <span style="color: #00008b;">:weight</span> 'bold)

</pre>
</div>
</div>
</li>
</ol>
</div>
</div>


<div id="outline-container-org91c8f4b" class="outline-3">
<h3 id="org91c8f4b"><span class="section-number-3">17.4.</span> Along the Bottom, inside the Minibuffer</h3>
<div class="outline-text-3" id="text-17-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'minibuffer-setup-hook 'my-minibuffer-setup)

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my-minibuffer-setup</span> ()
  (set (make-local-variable 'face-remapping-alist)
      '((default <span style="color: #00008b;">:height</span> 1.8)) <span style="color: #b22222;">;; </span><span style="color: #b22222;">use a larger font for my presentations</span>
  )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-clock-mode-line-total
    'today) <span style="color: #b22222;">;; </span><span style="color: #b22222;">show on modeline all time clocked into this task today</span>

(<span style="color: #4169e1;">setq</span> org-clock-clocked-in-display
    'mode-line) <span style="color: #b22222;">;; </span><span style="color: #b22222;">show task name and clocked time on modeline but NOT frame title</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-element</span>)
(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-clock</span>)

(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">org-clock-running-ol</span> nil
  <span style="color: #bc8f8f;">"Overlay for the running clock."</span>)

(<span style="color: #4169e1;">defface</span> <span style="color: #b8860b;">org-clock-running-face</span>
  '((t <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"Red"</span> <span style="color: #00008b;">:weight</span> bold))
  <span style="color: #bc8f8f;">"Face for highlighting the running clock."</span>)

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">org-clock-add-running-ol</span> ()
  <span style="color: #bc8f8f;">"Highlight the running clock."</span>
  (<span style="color: #4169e1;">save-excursion</span>
    (<span style="color: #4169e1;">when</span> (org-clock-is-active)
      (org-clock-remove-running-ol)
      (goto-char org-clock-marker)
      (<span style="color: #4169e1;">setq</span> org-clock-running-ol (make-overlay (point) (scan-sexps (point) -1)))
      (overlay-put org-clock-running-ol 'face 'org-clock-running-face)
      )))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">org-clock-remove-running-ol</span> ()
  (<span style="color: #4169e1;">when</span> (overlayp org-clock-running-ol)
    (delete-overlay org-clock-running-ol)
    (<span style="color: #4169e1;">setq</span> org-clock-running-ol nil)))
</pre>
</div>


<p>
#+END_SRC
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 18: </span>~/.emacs.d/17-ui-mouse-inputs.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 17-ui-mouse-inputs
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">17-ui-mouse-inputs.el --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb58daf9" class="outline-2">
<h2 id="orgb58daf9"><span class="section-number-2">18.</span> Set Up My Mouse-Wheel</h2>
<div class="outline-text-2" id="text-18">
</div>
<div id="outline-container-org20f74ee" class="outline-3">
<h3 id="org20f74ee"><span class="section-number-3">18.1.</span> Support for Pixel-Level Scrolling Built into Emacs 29+</h3>
<div class="outline-text-3" id="text-18-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 19: </span>???</label><pre class="src src-emacs-lisp">(pixel-scroll-mode 1)
(pixel-scroll-precision-mode 1)

(<span style="color: #4169e1;">setq</span> pixel-scroll-precision-interpolation-factor-alist
  '((0    . 3)    <span style="color: #b22222;">;; </span><span style="color: #b22222;">tiny scrolls use 3 steps</span>
    (200  . 5)    <span style="color: #b22222;">;; </span><span style="color: #b22222;">moderate &#8594; 5 steps</span>
    (1000 . 8)))  <span style="color: #b22222;">;; </span><span style="color: #b22222;">large &#8594; 8 steps</span>
</pre>
</div>

<p>
Then tweak these pixel-scroll-precision-* variables until it feels right.
</p>

<p>
pixel-scroll-precision-interpolation-factor
    What: how many “sub‐steps” each native scroll event is broken into.
    Default: 1 (i.e. one jump per event)
    Higher → smoother animation (more intermediate frames), at the cost of CPU/time.
    Lower → snappier but more “jumpy” scroll.
</p>

<p>
pixel-scroll-precision-delay
    What: delay in seconds between each interpolation step.
    Default: 0.01
    Higher → slower, languid scroll.
    Lower (e.g. 0.005) → faster, but may feel too abrupt or overwhelm the event queue.
</p>

<p>
pixel-scroll-precision-large-scroll-height
    What: if a scroll event requests “more than this many pixels,” treat it as a full-page scroll (and interpolate across that full height).
    Default: your frame’s pixel height
    Lowering it makes SHIFT-wheel or other “big” scrolls animate in more manageable chunks.
</p>

<p>
pixel-scroll-precision-interpolation-factor-alist (Emacs 30+)
    What: a plist mapping scroll heights to custom interpolation factors.
    Example:
</p>

<p>
(setq pixel-scroll-precision-interpolation-factor-alist
      '((0    . 3)    ;; tiny scrolls use 3 steps
	(200  . 5)    ;; moderate → 5 steps
	(1000 . 8)))  ;; large → 8 steps
</p>

<p>
pixel-scroll-precision-interpolation-function
</p>

<p>
What: the easing function to use between steps (linear by default). You could write your own for ease-in/out curves.
</p>
</div>
</div>

<div id="outline-container-orgc9e01b9" class="outline-3">
<h3 id="orgc9e01b9"><span class="section-number-3">18.2.</span> Add In the `good-scroll` Package for Inertia and Speed Up/Down Scrolling</h3>
<div class="outline-text-3" id="text-18-2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 20: </span>?</label><pre class="src src-emacs-lispDISABLED">(use-package good-scroll
  :init
    ;; 1. Disable Emacs’s built-in wheel &amp; pixel scroll modes
    ;;    Turn off the built-in pixel scrolls so Good-Scroll can take over
    (when (fboundp 'pixel-scroll-mode)          
      (pixel-scroll-mode -1))
    (when (fboundp 'pixel-scroll-precision-mode)
      (pixel-scroll-precision-mode -1))
    (mouse-wheel-mode -1)        ;; disable the old mouse-wheel handlers

    ;; 2. Tweak Good-Scroll parameters (optional)
    ;;    • good-scroll-render-rate controls how often (in seconds) the frame updates  
    ;;    • good-scroll-scroll-step    is pixels to move per wheel “tick”
    (setq good-scroll-render-rate 0.01    ;  20 ms between frames
          good-scroll-scroll-step  8)    ; 10px per wheel tick
  :config
    ;; 3. Enable it globally
    (good-scroll-mode 1)

    ;; 4. Bind Page-Up / Page-Down to the Good-Scroll full-screen commands

   :bind
     (
       ([wheel-down] . good-scroll-up)
       ([wheel-up]   . good-scroll-down)
       ([next]       . good-scroll-up-full-screen)
       ([prior]      . good-scroll-down-full-screen)

       ;; ;; shift = smaller/larger or same as plain
       ;; ([S-wheel-up]   . good-scroll-down)
       ;; ([S-wheel-down] . good-scroll-up)

       ;; ;; control = same as plain
       ;; ([C-wheel-up]   . good-scroll-down)
       ;; ([C-wheel-down] . good-scroll-up)

       ;; ;; double-click = full-screen scroll
       ;; ([double-wheel-up]   . good-scroll-up-full-screen)
       ;; ([double-wheel-down] . good-scroll-down-full-screen)
       ;; ;; with modifiers too
       ;; ([S-double-wheel-up]   . good-scroll-up-full-screen)
       ;; ([S-double-wheel-down] . good-scroll-down-full-screen)
       ;; ([C-double-wheel-up]   . good-scroll-up-full-screen)
       ;; ([C-double-wheel-down] . good-scroll-down-full-screen)

       ;; ;; triple-click = full-screen as well
       ;; ([triple-wheel-up]   . good-scroll-up-full-screen)
       ;; ([triple-wheel-down] . good-scroll-down-full-screen)
       ;; ([S-triple-wheel-up]   . good-scroll-up-full-screen)
       ;; ([S-triple-wheel-down] . good-scroll-down-full-screen)
       ;; ([C-triple-wheel-up]   . good-scroll-up-full-screen)
       ;; ([C-triple-wheel-down] . good-scroll-down-full-screen)

     )
)
</pre>
</div>

<ul class="org-ul">
<li>`good-scroll-scroll-step` controls “pixels per detent.”</li>
<li>`good-scroll-render-rate` controls frame‐update frequency.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcb955a3" class="outline-2">
<h2 id="orgcb955a3"><span class="section-number-2">19.</span> Emacs's Mouse-Wheel Variables</h2>
<div class="outline-text-2" id="text-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> mouse-wheel-scroll-amount
  '(
     2                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">#lines to normally scroll by</span>
     ((shift) . 1)      <span style="color: #b22222;">;; </span><span style="color: #b22222;">#lines when shift key pressed</span>
     ((control) . nil)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">full-screen when control key pressed</span>
   )
)
(<span style="color: #4169e1;">setq</span> mouse-wheel-progressive-speed
  nil) <span style="color: #b22222;">;; </span><span style="color: #b22222;">t adjusts faster, nil keeps it the same</span>

(<span style="color: #4169e1;">setq</span> mouse-wheel-follow-mouse
  t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Scroll the window under the pointer rather than the selected window</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Prevent your middle&#8208;click from yanking immediately after a scroll</span>
(<span style="color: #4169e1;">setq</span> mouse-wheel-click-event 'mouse-2
    mouse-wheel-inhibit-click-time 0.3)
</pre>
</div>

<p>
#+END_SRC
</p>
</div>
</div>


<div id="outline-container-org8806a33" class="outline-2">
<h2 id="org8806a33"><span class="section-number-2">20.</span> Phase 20 – Global behavior and editing</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org141ced5" class="outline-3">
<h3 id="org141ced5"><span class="section-number-3">20.1.</span> Keybindings - Global</h3>
<div class="outline-text-3" id="text-20-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 21: </span>~/.emacs.d/20-keybindings-global.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 20-keybindings-global
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">20-keybindings-global --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2db03d7" class="outline-2">
<h2 id="org2db03d7"><span class="section-number-2">21.</span> Mapping New Keys GLOBALLY</h2>
<div class="outline-text-2" id="text-21">
</div>
<div id="outline-container-org5427711" class="outline-3">
<h3 id="org5427711"><span class="section-number-3">21.1.</span> Keys to Horizontally Scroll</h3>
<div class="outline-text-3" id="text-21-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #bc8f8f;">"&lt;triple-wheel-right&gt;"</span>) (<span style="color: #4169e1;">lambda</span> () (<span style="color: #4169e1;">interactive</span>) (scroll-right 3)))
(global-set-key (kbd <span style="color: #bc8f8f;">"&lt;triple-wheel-left&gt;"</span>) (<span style="color: #4169e1;">lambda</span> () (<span style="color: #4169e1;">interactive</span>) (scroll-left 3)))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">scroll-to-column-0</span> ()
  <span style="color: #bc8f8f;">"Scroll horizontally back to column 0."</span>
  (<span style="color: #4169e1;">interactive</span>)
  (set-window-hscroll (selected-window) 0))
(global-set-key (kbd <span style="color: #bc8f8f;">"&lt;mouse-9&gt;"</span>) 'scroll-to-column-0)

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">scroll-to-last-column</span> ()
  <span style="color: #bc8f8f;">"Scroll horizontally to the last visible column in the current window."</span>
  (<span style="color: #4169e1;">interactive</span>)
  (<span style="color: #4169e1;">let*</span> ((window (selected-window))
         (max-line-length (apply 'max (mapcar #'length (split-string (buffer-string) <span style="color: #bc8f8f;">"\n"</span>))))
         (max-hscroll (max 0 (- max-line-length (window-body-width window)))))
    (set-window-hscroll window max-hscroll)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Bind &lt;mouse-8&gt; to scroll horizontally to the last visible column</span>
(global-set-key (kbd <span style="color: #bc8f8f;">"&lt;mouse-8&gt;"</span>) 'scroll-to-last-column)
</pre>
</div>
</div>
</div>


<div id="outline-container-org5c2416b" class="outline-3">
<h3 id="org5c2416b"><span class="section-number-3">21.2.</span> My Global Key Settings</h3>
<div class="outline-text-3" id="text-21-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-unset-key       [C-z]
  )                                     <span style="color: #b22222;">; </span><span style="color: #b22222;">Disable suspend-frame or iconify-frame key</span>
</pre>
</div>
</div>

<div id="outline-container-org3facb7f" class="outline-4">
<h4 id="org3facb7f"><span class="section-number-4">21.2.1.</span> Pop Up a Reference Sheet for My Settings</h4>
<div class="outline-text-4" id="text-21-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">jrush/popup-refguide</span>() (<span style="color: #4169e1;">interactive</span>)
    <span style="color: #bc8f8f;">"Pop up my reference guide."</span>

    (find-file-read-only-other-frame <span style="color: #bc8f8f;">"~/Dropbox/Documents/refsheet.org"</span>)

<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">(if (file-exists-p "~/Dropbox/Documents/refsheet.org")</span>

<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">(let</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">((buf (get-buffer "*Reference Sheet*")))</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">(if (not buf)</span>
<span style="color: #b22222;">;;;        </span><span style="color: #b22222;">(with-current-buffer (generate-new-buffer "*Reference Sheet*")</span>
<span style="color: #b22222;">;;;          </span><span style="color: #b22222;">(insert-file-contents "~/Dropbox/Documents/refsheet.org")</span>
<span style="color: #b22222;">;;;          </span><span style="color: #b22222;">(org-mode)</span>
<span style="color: #b22222;">;;;        </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">)</span>

<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">(display-buffer-pop-up-frame</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">"*Reference Sheet*"</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">(</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">)</span>

  )
  (global-set-key (kbd <span style="color: #bc8f8f;">"C-h z"</span>) 'jrush/popup-refguide)
</pre>
</div>
</div>
</div>

<div id="outline-container-org632168b" class="outline-4">
<h4 id="org632168b"><span class="section-number-4">21.2.2.</span> capturing new content</h4>
<div class="outline-text-4" id="text-21-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Set a default file to receive captures and key to do so.</span>
(define-key global-map <span style="color: #bc8f8f;">"\C-cc"</span> 'org-capture)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Useful org-mode keys that should be available in all buffers, not just org-mode buffers.</span>

(global-set-key <span style="color: #bc8f8f;">"\C-cl"</span> 'org-store-link)                <span style="color: #b22222;">;; </span><span style="color: #b22222;">capture a link -to- my current location within a file</span>
(global-set-key <span style="color: #bc8f8f;">"\C-cL"</span> 'org-insert-link-global)        <span style="color: #b22222;">;; </span><span style="color: #b22222;">Prompt for link/desc and insert a hyperlink here</span>
(global-set-key <span style="color: #bc8f8f;">"\C-co"</span> 'org-open-at-point-global)<span style="color: #b22222;">;; </span><span style="color: #b22222;">follow a link -from- any Emacs buffer</span>
(global-set-key <span style="color: #bc8f8f;">"\C-ca"</span> 'org-agenda)            <span style="color: #b22222;">;; </span><span style="color: #b22222;">jump into an Agenda view</span>
(global-set-key <span style="color: #bc8f8f;">"\C-cb"</span> 'org-iswitchb)          <span style="color: #b22222;">;; </span><span style="color: #b22222;">???</span>
(global-set-key [f12] 'org-agenda)              <span style="color: #b22222;">;; </span><span style="color: #b22222;">jump into an Agenda view</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacc31d0" class="outline-4">
<h4 id="orgacc31d0"><span class="section-number-4">21.2.3.</span> Hotkey for Quickly Reloading This Configuration After Changes</h4>
<div class="outline-text-4" id="text-21-2-3">
<p>
The first thing I want is the ability to quickly reload my Emacs configuration
each time I make a change in this file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">reload</span>() (<span style="color: #4169e1;">interactive</span>)
  <span style="color: #bc8f8f;">"Reload ~/.emacs"</span>

  (<span style="color: #4169e1;">if</span> (file-exists-p <span style="color: #bc8f8f;">"~/.emacs.d/init.el"</span>)
      (load-file <span style="color: #bc8f8f;">"~/.emacs.d/init.el"</span>))
)
(global-set-key [f6] 'reload)
</pre>
</div>
</div>
</div>

<div id="outline-container-org93b5df0" class="outline-4">
<h4 id="org93b5df0"><span class="section-number-4">21.2.4.</span> Useful Function to Rename the Current File and Buffer</h4>
<div class="outline-text-4" id="text-21-2-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">rename-file-and-buffer</span> ()
  <span style="color: #bc8f8f;">"Rename the current buffer and file it is visiting."</span>
  (<span style="color: #4169e1;">interactive</span>)
  (<span style="color: #4169e1;">let</span> ((filename (buffer-file-name)))
    (<span style="color: #4169e1;">if</span> (not (<span style="color: #4169e1;">and</span> filename (file-exists-p filename)))
        (message <span style="color: #bc8f8f;">"Buffer is not visiting a file!"</span>)
      (<span style="color: #4169e1;">let</span> ((new-name (read-file-name <span style="color: #bc8f8f;">"New name: "</span> filename)))
        (<span style="color: #4169e1;">cond</span>
         ((vc-backend filename) (vc-rename-file filename new-name))
         (t
          (rename-file filename new-name t)
          (set-visited-file-name new-name t t)))))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #bc8f8f;">"C-c r"</span>)  #'rename-file-and-buffer)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaab82ca" class="outline-3">
<h3 id="orgaab82ca"><span class="section-number-3">21.3.</span> Auto-Complete ?</h3>
</div>
<div id="outline-container-org9686713" class="outline-3">
<h3 id="org9686713"><span class="section-number-3">21.4.</span> Templates ?</h3>
</div>
</div>



<div id="outline-container-org78fbb8a" class="outline-2">
<h2 id="org78fbb8a"><span class="section-number-2">22.</span> Global Key Mappings</h2>
<div class="outline-text-2" id="text-22">
<p>
blogpost: <a href="http://endlessparentheses.com/the-toggle-map-and-wizardry.html">The Toggle-Map and Wizardry</a>
</p>

<p>
The manual recommends C-c for user keys but C-x t is always free, whereas C-c
t is used by some modes.  Hence, let's use the C-x t prefix for a dedicated
set of Emacs behavior toggle keys.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-prefix-command 'xanalogica/toggle-map)
(define-key ctl-x-map <span style="color: #bc8f8f;">"t"</span> 'xanalogica/toggle-map)

(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"c"</span> #'column-number-mode)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"f"</span> #'auto-fill-mode)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"l"</span> #'toggle-truncate-lines)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"w"</span> #'whitespace-mode)

(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"q"</span> #'toggle-debug-on-quit)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"d"</span> #'toggle-debug-on-error)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"e"</span> #'toggle-debug-on-error)

(<span style="color: #4169e1;">setq</span> linum-format <span style="color: #bc8f8f;">"%-d   "</span>)
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"n"</span> #'linum-mode)

<span style="color: #b22222;">;;</span><span style="color: #b22222;">(define-key xanalogica/toggle-map "t" #'endless/toggle-theme)</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Generalized version of `</span><span style="color: #5f9ea0;">read-only-mode</span><span style="color: #b22222;">'.</span>
(define-key xanalogica/toggle-map <span style="color: #bc8f8f;">"r"</span> #'dired-toggle-read-only)
(autoload 'dired-toggle-read-only <span style="color: #bc8f8f;">"dired"</span> nil t)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgcf04a3f" class="outline-2">
<h2 id="orgcf04a3f"><span class="section-number-2">23.</span> Keystroke Input</h2>
<div class="outline-text-2" id="text-23">
</div>
<div id="outline-container-orga10e13c" class="outline-3">
<h3 id="orga10e13c"><span class="section-number-3">23.1.</span> Of Non-Standard Characters</h3>
<div class="outline-text-3" id="text-23-1">
<p>
The <code>C-q</code> key allows for quoting of the following key, like a tab or for the
entry of a numeric value to represent a special character.  By default it is
decimal but I prefer hexadecimal.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> read-quoted-char-radix 16)        <span style="color: #b22222;">;; </span><span style="color: #b22222;">numeric base for quoting characters</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">unicode-insert</span> (char)
 <span style="color: #bc8f8f;">"Read a unicode code point and insert said character.</span>
<span style="color: #bc8f8f;">  Input uses `</span><span style="color: #5f9ea0;">read-quoted-char-radix</span><span style="color: #bc8f8f;">'.  If you want to copy</span>
<span style="color: #bc8f8f;">  the values from the Unicode charts, you should set it to 16."</span>

  (<span style="color: #4169e1;">interactive</span> (list (read-quoted-char <span style="color: #bc8f8f;">"Char: "</span>)))
  (ucs-insert char))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga57108e" class="outline-3">
<h3 id="orga57108e"><span class="section-number-3">23.2.</span> Of Whitespace</h3>
<div class="outline-text-3" id="text-23-2">
<p>
These are the defaults which may be overridden in specific modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq-default</span> tab-width
  8)    <span style="color: #b22222;">; </span><span style="color: #b22222;">The default width of a TAB.</span>

(<span style="color: #4169e1;">setq-default</span> indent-tabs-mode
  nil)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Whether to insert spaces when the TAB key is pressed.</span>

(<span style="color: #4169e1;">setq-default</span> require-final-newline
  t)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Whether to silently force a NL at EOF.</span>

(<span style="color: #4169e1;">setq-default</span> fill-column
  78)   <span style="color: #b22222;">; </span><span style="color: #b22222;">Column beyond which automatic line-wrapping should occur.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org25c6b40" class="outline-3">
<h3 id="org25c6b40"><span class="section-number-3">23.3.</span> Of Recorded Keystrokes</h3>
<div class="outline-text-3" id="text-23-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key         [f7]
  'start-kbd-macro)             <span style="color: #b22222;">; </span><span style="color: #b22222;">Start recording of keystrokes.</span>
(global-set-key         [M-f7]
  'end-kbd-macro)               <span style="color: #b22222;">; </span><span style="color: #b22222;">Stop recording of keystrokes.</span>

(global-set-key         [f8]
  'call-last-kbd-macro)         <span style="color: #b22222;">; </span><span style="color: #b22222;">Map the F8 key to play back recording of keystrokes.</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcb7f639" class="outline-2">
<h2 id="orgcb7f639"><span class="section-number-2">24.</span> Navigation</h2>
<div class="outline-text-2" id="text-24">
</div>
<div id="outline-container-org632948d" class="outline-3">
<h3 id="org632948d"><span class="section-number-3">24.1.</span> Between Buffers</h3>
<div class="outline-text-3" id="text-24-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(autoload 'cycle-buffer                         <span style="color: #bc8f8f;">"cycle-buffer"</span>  <span style="color: #bc8f8f;">"Cycle forward."</span> t)
(autoload 'cycle-buffer-backward                <span style="color: #bc8f8f;">"cycle-buffer"</span>  <span style="color: #bc8f8f;">"Cycle backward."</span> t)
(autoload 'cycle-buffer-permissive              <span style="color: #bc8f8f;">"cycle-buffer"</span>  <span style="color: #bc8f8f;">"Cycle forward allowing *buffers*."</span> t)
(autoload 'cycle-buffer-backward-permissive     <span style="color: #bc8f8f;">"cycle-buffer"</span>  <span style="color: #bc8f8f;">"Cycle backward allowing *buffers*."</span> t)
(autoload 'cycle-buffer-toggle-interesting      <span style="color: #bc8f8f;">"cycle-buffer"</span>  <span style="color: #bc8f8f;">"Toggle if this buffer will be considered."</span> t)

(global-set-key         <span style="color: #bc8f8f;">"\M-n"</span>
  'cycle-buffer)                        <span style="color: #b22222;">; </span><span style="color: #b22222;">Switch to next buffer in internal list</span>
(global-set-key         <span style="color: #bc8f8f;">"\M-p"</span>
  'cycle-buffer-backward)               <span style="color: #b22222;">; </span><span style="color: #b22222;">Switch to previous buffer in internal list</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">how to REMOVE a buffer and cycle to the next one???</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2da4034" class="outline-3">
<h3 id="org2da4034"><span class="section-number-3">24.2.</span> Within a Buffer</h3>
<div class="outline-text-3" id="text-24-2">
</div>
<div id="outline-container-org1e66fd5" class="outline-4">
<h4 id="org1e66fd5"><span class="section-number-4">24.2.1.</span> Jumping to a Place</h4>
<div class="outline-text-4" id="text-24-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key global-map  (kbd <span style="color: #bc8f8f;">"M-g"</span>)
  'goto-line)                           <span style="color: #b22222;">; </span><span style="color: #b22222;">Jump to a prompted line number.</span>

(global-set-key         <span style="color: #bc8f8f;">"\M-[7~"</span>
  'beginning-of-line)                   <span style="color: #b22222;">; </span><span style="color: #b22222;">[Home] to beginning of line</span>

(global-set-key         <span style="color: #bc8f8f;">"\M-[8~"</span>
  'end-of-line)                 <span style="color: #b22222;">; </span><span style="color: #b22222;">[End] to end of line</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org47b0a84" class="outline-4">
<h4 id="org47b0a84"><span class="section-number-4">24.2.2.</span> Scrolling Behavior</h4>
<div class="outline-text-4" id="text-24-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq-default</span> scroll-margin
  0)    <span style="color: #b22222;">; </span><span style="color: #b22222;">#lines of margin at top and bottom of a window.</span>

(<span style="color: #4169e1;">setq-default</span> scroll-conservatively
  1)    <span style="color: #b22222;">; </span><span style="color: #b22222;">Scroll up to this many lines, to bring point back into window.</span>

(<span style="color: #4169e1;">setq-default</span> scroll-up-aggressively
  nil)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Disable jumpy vertical scrolling.</span>

(<span style="color: #4169e1;">setq-default</span> scroll-down-aggressively
  nil)  <span style="color: #b22222;">; </span><span style="color: #b22222;">Disable jumpy vertical scrolling.</span>

(<span style="color: #4169e1;">setq-default</span> scroll-step
  1)    <span style="color: #b22222;">; </span><span style="color: #b22222;">#lines to scroll by when point leaves the window.</span>

(<span style="color: #4169e1;">setq-default</span> next-screen-context-lines
  1)    <span style="color: #b22222;">; </span><span style="color: #b22222;">#lines of continuity when scrolling by screenfuls.</span>

(put 'scroll-left 'disabled nil)

(<span style="color: #4169e1;">setq</span> auto-hscroll-mode  <span style="color: #b22222;">;; </span><span style="color: #b22222;">only scroll the current line,</span>
  'current-line)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">not the whole frame so I can see Ivy choices</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6a98911" class="outline-3">
<h3 id="org6a98911"><span class="section-number-3">24.3.</span> Among Windows/Frames</h3>
</div>
<div id="outline-container-orga3cb36f" class="outline-3">
<h3 id="orga3cb36f"><span class="section-number-3">24.4.</span> Across Content: <a href="https://www.emacswiki.org/emacs/BookMarks">bookmarks</a> and links</h3>
<div class="outline-text-3" id="text-24-4">
</div>
<div id="outline-container-org88900be" class="outline-4">
<h4 id="org88900be"><span class="section-number-4">24.4.1.</span> Org-Mode Bookmarks</h4>
<div class="outline-text-4" id="text-24-4-1">
<ul class="org-ul">
<li>create a header for accumulating unclassified bookmarks</li>
</ul>

<p>
Z
</p>
</div>

<ol class="org-ol">
<li><a id="orgd88d7a6"></a>Want to Bookmark Stuff within Emacs<br /></li>
<li><a id="org7a1ff9a"></a>Want to Bookmark Stuff from My Web Browser<br /></li>
<li><a id="orgc7b8243"></a>Want to Bookmark Stuff from My Android Phone<br /></li>
</ol>
</div>

<div id="outline-container-orgcc73b20" class="outline-4">
<h4 id="orgcc73b20"><span class="section-number-4">24.4.2.</span> Emacs Bookmarks</h4>
<div class="outline-text-4" id="text-24-4-2">
<p>
<a href="https://www.emacswiki.org/emacs/BookmarkPlus#BookmarkBasics">https://www.emacswiki.org/emacs/BookmarkPlus#BookmarkBasics</a>
</p>

<p>
Emacs bookmarking makes use of three things that are related but different:
</p>

<ol class="org-ol">
<li>a bookmark <b>list</b></li>
<li>a bookmark <b>file</b></li>
<li>a bookmark-list <b>display</b> (buffer '<b>Bookmark List</b>')</li>

<li value="C-x r m		">set a bookmark at the current location</li>
<li value="C-x r b		">jump to a bookmark</li>
<li value="C-x r l		">list your bookmarks</li>
<li value="M-x bookmark-delete">delete a bookmark by name</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org3b2b17f" class="outline-3">
<h3 id="org3b2b17f"><span class="section-number-3">24.5.</span> Among Org-Mode Headers</h3>
<div class="outline-text-3" id="text-24-5">
<p>
Don’t let me accidentally delete text without realizing it in .org ie: point
is buried in a subtree, but you only see the heading and you accidentally kill
a line without knowing it.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-catch-invisible-edits 'show-and-error)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8768273" class="outline-3">
<h3 id="org8768273"><span class="section-number-3">24.6.</span> Among Indented Text Like Python and YAML Specifically</h3>
<div class="outline-text-3" id="text-24-6">
<p>
The <a href="https://gitlab.com/emacs-stuff/indent-tools/">https://gitlab.com/emacs-stuff/indent-tools/</a> Elisp package is focused on
making life easier with indented forms of text, specifically Python and YAML.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">(add-to-list 'load-path "~/.emacs.d/lisp/indent-tools")</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(require 'indent-tools)</span>
(<span style="color: #4169e1;">use-package</span> indent-tools)

<span style="color: #b22222;">;;;</span><span style="color: #b22222;">(use-package indent-tools</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">:load-path "~/.emacs.d/lisp/indent-tools/" ;; use my Git checkout</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">;;; :bind (</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">;;;   :map python-mode-map</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">;;;     ("C-c &gt;" . indent-tools-hydra/body)</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;</span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;</span><span style="color: #b22222;">(global-set-key (kbd "C-c &gt;") 'indent-tools-hydra/body)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc3514c0" class="outline-3">
<h3 id="orgc3514c0"><span class="section-number-3">24.7.</span> Back to a Previous Position</h3>
<div class="outline-text-3" id="text-24-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(define-key org-mode-map (kbd <span style="color: #bc8f8f;">"C-c &amp;"</span>)
  'org-mark-ring-goto)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd0bdb6f" class="outline-2">
<h2 id="orgd0bdb6f"><span class="section-number-2">25.</span> Planning for the System76 Launch Keyboard</h2>
<div class="outline-text-2" id="text-25">
</div>
<div id="outline-container-orgf5b51c7" class="outline-3">
<h3 id="orgf5b51c7"><span class="section-number-3">25.1.</span> switch the following to a more convenient key</h3>
<div class="outline-text-3" id="text-25-1">
<p>
(global-set-key		[f2]
  'delete-trailing-whitespace)	; Remove all trailing whitespace
</p>
</div>
</div>
<div id="outline-container-orgb3ebb52" class="outline-3">
<h3 id="orgb3ebb52"><span class="section-number-3">25.2.</span> select a better key for the ALT key so I can use it more often</h3>
<div class="outline-text-3" id="text-25-2">
<ul class="org-ul">
<li>remove left SUPER key as its too easy to hit SUPER-q (close app) when typing
ALT-q (org-fill-paragraph)</li>
</ul>

<p>
remove CAPSLOCK key!
what to do with 2nd space bar key?
</p>
<ul class="org-ul">
<li>remove left spacebar and see if I miss it</li>
</ul>
<ul class="org-ul">
<li class="on"><code>[X]</code> change left CAPSLOCK to LEFT-CTRL</li>
<li class="on"><code>[X]</code> change LEFT-SPACEBAR to LEFT-ALT</li>
<li class="off"><code>[&#xa0;]</code> change ? to SUPER</li>
</ul>

<p>
where to put DEL key?
where to put SUPER key?
where to put CTRL key?
where to put ALT key?
where to put FN key? (and what is it for?)
what to do with each of the FUNCTION keys?
</p>

<p>
Emacs internal modifiers:
</p>
<ul class="org-ul">
<li>CTRL   (C-)</li>
<li>META   (M-)    ALT key on keyboards issues the META modifier</li>
<li>SHIFT  (S-)</li>
<li>SUPER  (s-)    No one uses in standard Emacs    C-x @ s   adds the SUPER modifier to the next character</li>
<li>HYPER  (H-)    No one uses in standard Emacs    C-x @ h   adds the HYPER modifier to the next character</li>
<li>ALT    (A-)</li>
</ul>

<p>
The <code>xnodmap</code> command can map physical keys to something that Emacs knows about.
</p>

<p>
keycast package
</p>

<p>
Action: "Reuse" versus "None"?
way to emit a hyper or super key into Emacs?
way to use layer 3 to send everything with SHIFT, so ALT-: doesn't require a SHIFT modifier too?
</p>
</div>
</div>

<div id="outline-container-org330fca5" class="outline-3">
<h3 id="org330fca5"><span class="section-number-3">25.3.</span> Desktop Keys</h3>
<div class="outline-text-3" id="text-25-3">
<dl class="org-dl">
<dt>SUPER              </dt><dd>pop up laucher panel to launch new and switch among existing apps
<dl class="org-dl">
<dt>?                  </dt><dd>display help</dd>
<dt>file &lt;filename&gt;    </dt><dd>search filesystem for this file</dd>
<dt>/                  </dt><dd>search filesystem starting at the root</dd>
<dt>~                  </dt><dd>search filesystem starting at $HOME</dd>
<dt>t:                 </dt><dd>execute a command in a terminal</dd>
<dt>:                  </dt><dd>execute a command in sh</dd>
<dt>=                  </dt><dd>calculate an equation</dd>
<dt>ESC                </dt><dd>exit launcher panel</dd>
</dl></dd>

<dt>SUPER TAB              </dt><dd>switch among running apps</dd>
<dt>SUPER SHIFT TAB        </dt><dd>switch aomng running apps, in reverse order</dd>
<dt>SUPER `                </dt><dd>switch among windows of current app</dd>
<dt>SUPER SHIFT `          </dt><dd>switch among windows of current app, in reverse order</dd>

<dt>SUPER d           </dt><dd>toggle workspace picker</dd>
<dt>SUPER a           </dt><dd>toggle apps picker</dd>
<dt>SUPER v           </dt><dd>toggle notifications picker</dd>
<dt>SUPER t           </dt><dd>open a terminal</dd>
<dt>SUPER f           </dt><dd>open files</dd>
<dt>SUPER p           </dt><dd>cycle display layout</dd>
<dt>SUPER SPACE       </dt><dd>cycle between configured input sources (languages)</dd>
<dt>ALT-F2            </dt><dd>run command</dd>
<dt>CTRL-ALT-DEL      </dt><dd>log out</dd>
<dt>SUPER ALT 8       </dt><dd>toggle magnifier
<dl class="org-dl">
<dt>SUPER ALT +        </dt><dd>zoom in</dd>
<dt>SUPER ALT -        </dt><dd>zoom out</dd>
</dl></dd>

<dt>SUPER + LF CLICK + drag</dt><dd><b>move</b> window without using title bar drag</dd>
<dt>SUPER + RT CLICK + drag</dt><dd><b>resize</b> window without using border drag</dd>

<dt>SUPER UP/DN/LF/RT  </dt><dd>switch among desktop windows</dd>
<dt>SUPER ENTER        </dt><dd>enter window adjustment mode
<dl class="org-dl">
<dt>UP/DN/LF/RT         </dt><dd><b>move</b> window (while in adjustment mode)</dd>
<dt>SHIFT RT/DN         </dt><dd><b>increase</b> window size (while in adjustment mode)</dd>
<dt>SHIFT LF/UP         </dt><dd><b>decrease</b> window size (while in adjustment mode)</dd>
<dt>CTL UP/DN/LF/RT     </dt><dd><b>swap</b> windows (while in adjustment mode)</dd>
<dt>ENTER               </dt><dd><b>apply</b> changes (exit adjustment mode)</dd>
<dt>ESC                 </dt><dd>cancel changes (exit adjustment moode)</dd>
</dl></dd>
<dt>SUPER HOME         </dt><dd>jump to first workspace</dd>
<dt>SUPER END          </dt><dd>jump to last workspace</dd>
<dt>SUPER ESC          </dt><dd>lock the screen</dd>
<dt>SUPER SHIFT UP     </dt><dd>move window up one <code>workspace</code></dd>
<dt>SUPER SHIFT DN     </dt><dd>move window down one <code>workspace</code></dd>
<dt>SUPER CTRL UP      </dt><dd>shift focus up one <code>workspace</code></dd>
<dt>SUPER CTRL DN      </dt><dd>shift focus down one <code>workspace</code></dd>
<dt>SUPER SHIFT LF     </dt><dd>move window to leftward monitor</dd>
<dt>SUPER SHIFT RT     </dt><dd>move window to righward monitor</dd>
<dt>SUPER SHIFT CTRL UP</dt><dd>move window to upper monitor</dd>
<dt>SUPER SHIFT CTRL DN</dt><dd>move window to lower monitor</dd>
<dt>SUPER o            </dt><dd>change window orientation (while stacking) ?????????????????????????</dd>
<dt>SUPER g            </dt><dd>toggle floating mode (while stacking) ??????????????????????????????</dd>
<dt>SUPER y            </dt><dd>toggle auto-tiling    ??????????????????????????????????????????????</dd>
<dt>SUPER s            </dt><dd>toggle stacking mode  ??????????????????????????????????????????????</dd>
<dt>SUPER q            </dt><dd>close window</dd>
<dt>SUPER m            </dt><dd>toggle maximize</dd>

<dt>???                </dt><dd>start terminal shell</dd>
<dt>???                </dt><dd>start LibreOffice</dd>
<dt>???                </dt><dd>start Firefox/Chrome</dd>

<dt>ESC SHIFT &gt;        </dt><dd>goto beginning of buffer <code>STOP USING THIS</code></dd>
<dt>C-HOME             </dt><dd>goto beginning of buffer</dd>

<dt>ESC SHIFT &lt;        </dt><dd>goto end of buffer       <code>STOP USING THIS</code></dd>
<dt>C-END              </dt><dd>goto end of buffer</dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org59252aa" class="outline-2">
<h2 id="org59252aa"><span class="section-number-2">26.</span> Of Automatic Texts (abbreviations and templates)</h2>
<div class="outline-text-2" id="text-26">
<p>
"abbreviations, templates, and other ways to expand or transform text"
<a href="http://sachachua.com/blog/2015/01/developing-emacs-micro-habits-text-automation/">http://sachachua.com/blog/2015/01/developing-emacs-micro-habits-text-automation/</a>
</p>

<p>
Emacs has a separate manual for <a href="http://www.gnu.org/software/emacs/manual/html_mono/autotype.html">autotyping</a>, which I had never read before. The
short manual covers:
</p>

<ul class="org-ul">
<li>abbrev</li>
<li>skeleton</li>
<li>auto-insert</li>
<li>copyright messages</li>
<li>timestamps</li>
<li>temp</li>
</ul>
</div>

<div id="outline-container-org085f3fd" class="outline-3">
<h3 id="org085f3fd"><span class="section-number-3">26.1.</span> Templates</h3>
<div class="outline-text-3" id="text-26-1">
</div>
<div id="outline-container-org41683fc" class="outline-4">
<h4 id="org41683fc"><span class="section-number-4">26.1.1.</span> About the YASnippet Package</h4>
<div class="outline-text-4" id="text-26-1-1">
<p>
<a href="http://capitaomorte.github.com/yasnippet/">YASnippet</a> is a template system for Emacs, an Emacs package for easily
inserting textual templates for any emacs-mode (programming language).  It
allows you to type an abbreviation, followed by a trigger key and have it
automatically expand into a block of text.  It comes bundled with templates
for languages like C, C++, Python, SQL, LaTeX, HTML, CSS and more.  You do not
need to know Emacs ELisp to create your own.
</p>

<p>
YASnippet supports templates with parameters and the ability to place the
cursor within the inserted text for quick filling in of the template.  If all
you want is inserting static text, without parameters or moving cursor, then
use Emacs package "abbrev".
</p>
</div>
</div>

<div id="outline-container-orgbe15215" class="outline-4">
<h4 id="orgbe15215"><span class="section-number-4">26.1.2.</span> Activating YASnippet</h4>
<div class="outline-text-4" id="text-26-1-2">
<p>
YASnippet can be activated globally or for specific Emacs modes.  I choose to
activate it for individual modes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(require 'yasnippet)</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(use-package yasnippet)</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(require 'yasnippet-snippets)   ;; a rich collection of pre-written snippets</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(yas-global-mode 0)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">(yas-recompile-all)</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(yas-reload-all)   ;; rescan snippet definitions into memory</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(add-hook 'text-mode-hook #'yas-minor-mode)</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(add-hook 'python-mode-hook #'yas-minor-mode)</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(add-hook 'org-mode-hook #'yas-minor-mode)</span>
<span style="color: #b22222;">;;;;;  </span><span style="color: #b22222;">(add-hook #'org-mode-hook #'org-special-block-extras-mode)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd9677b9" class="outline-4">
<h4 id="orgd9677b9"><span class="section-number-4">26.1.3.</span> My Catalog of Template Definitions</h4>
<div class="outline-text-4" id="text-26-1-3">
<p>
Some of the useful snippets I have created are:
</p>
</div>

<ol class="org-ol">
<li><a id="org72dde66"></a>for Org-Mode (in directory <a href="file:///home/runner/.emacs.d/snippets/org-mode/">file:///home/runner/.emacs.d/snippets/org-mode/</a>)<br />
<div class="outline-text-5" id="text-26-1-3-1">
<dl class="org-dl">
<dt>block   </dt><dd>block</dd>
<dt>el      </dt><dd>elisp block</dd>
<dt>email   </dt><dd>#+email</dd>
<dt>title   </dt><dd>#+title</dd>
<dt>sourceblock</dt><dd>source block</dd>
<dt>options </dt><dd>#+OPTIONS ${0}</dd>
<dt>figure  </dt><dd>captioned figure</dd>
</dl>
</div>
</li>

<li><a id="org6929113"></a>for Python-Mode (in directory <a href="file:///home/runner/.emacs.d/snippets/python-mode/">file:///home/runner/.emacs.d/snippets/python-mode/</a>)<br />
<ol class="org-ol">
<li><a id="org3674bae"></a>Group: statements<br />
<ol class="org-ol">
<li><a id="org9e7f730"></a>def&lt;TAB&gt;		Function Definition, with prompted fields<br /></li>
<li><a id="orgdd14b19"></a>defm&lt;TAB&gt;		Method Definition, with prompted fields<br /></li>

<li><a id="org096af0c"></a>class&lt;TAB&gt;	Class Definition, with prompted fields<br /></li>

<li><a id="org8ea5de3"></a>for&lt;TAB&gt;		For-Loop, with prompted fields<br /></li>
<li><a id="orgaaa0ff1"></a>ifmain&lt;TAB&gt;	If-Main Conditional<br /></li>
<li><a id="org4af8e00"></a>while&lt;TAB&gt;	While-Loop<br /></li>
</ol>
</li>

<li><a id="org1c255c5"></a>Code Fragments<br />
<ol class="org-ol">
<li><a id="org5445ad4"></a>nspace&lt;TAB&gt;	<span class="underline"><span class="underline">init</span></span> for a Python Namespace<br /></li>
<li><a id="org1502d09"></a>pysetup&lt;TAB&gt;	setup.py Skeleton<br /></li>
<li><a id="org5ea39a3"></a>idir		Iterate over a Single Directory<br /></li>
<li><a id="org2987f35"></a>args		Args Parsing<br /></li>
<li><a id="org35c3173"></a>itree		Iterate over a Directory Tree<br /></li>
<li><a id="org94e39a6"></a>prop		Property Descriptor<br /></li>
<li><a id="org7da6229"></a>iplace		Modifying Files In-Place<br /></li>
</ol>
</li>

<li><a id="org106d2d0"></a>Licenses<br />
<ol class="org-ol">
<li><a id="org19e53a8"></a>GPL&lt;TAB&gt;		GPL-license comment<br /></li>
<li><a id="org99f9635"></a>ZPL&lt;TAB&gt;		Zope license comment<br /></li>
<li><a id="orgec9bbf7"></a>ZEL&lt;TAB&gt;		ZeOmega license comment<br />
<div class="outline-text-7" id="text-26-1-3-2-3-3">
<p>
(add to the license files automatic insertion of the date)
</p>
</div>
</li>
</ol>
</li>

<li><a id="orgf039d49"></a>TO BE DEVELOPED<br />
<ol class="org-ol">
<li><a id="orgc47c9a7"></a>pygame		PyGame Skeleton<br /></li>
<li><a id="orgfa96ca8"></a>buildout		Buildout Skeleton<br /></li>
</ol>
</li>

<li><a id="orgd86f091"></a>ZCML<br />
<ol class="org-ol">
<li><a id="orge386e55"></a>ZCML&lt;TAB&gt;		expands into an empty ZCML configuration file<br /></li>
</ol>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org1cab853" class="outline-4">
<h4 id="org1cab853"><span class="section-number-4">26.1.4.</span> Where I Store My Template Definitions</h4>
<div class="outline-text-4" id="text-26-1-4">
<p>
There are snippets stored in a system directory that comes with the package,
and there are snippets stored under my home directory in a naming hierarchy
based on Emacs modenames.
</p>

<ul class="org-ul">
<li>~/.emacs.d/snippets/</li>
<li>~/.emacs.d/.cask/25.3/elpa/stan-snippets-9.2.0/snippets/</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(setq yas/root-directory "~/.emacs.d/snippets")</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(yas/load-directory yas/root-directory)</span>
</pre>
</div>

<p>
To have the menu show only the tables for the currently active mode, set
<code>yas/use-menu</code> to <code>abbreviate</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;;  </span><span style="color: #b22222;">'(yas/use-menu (quote abbreviate))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9f59c83" class="outline-4">
<h4 id="org9f59c83"><span class="section-number-4">26.1.5.</span> Developing New Template Definitions</h4>
<div class="outline-text-4" id="text-26-1-5">
<p>
At the Emacs prompt, invoke "yas/new-snippet" to reload a snippet you are
developing.  If you specify a name that is not yet defined, it will prompt
you and guide you through creating it.
</p>

<p>
Snippets hang off of various Emacs modes, like python-mode or html-mode.
</p>

<p>
Snippets are inserted when the "trigger key" (TAB) is pressed after a textual
key.
</p>

<p>
Two commands are defined in this mode:
</p>

<ul class="org-ul">
<li><p>
<code>M-x yas/load-snippet-buffer</code>
</p>

<p>
When editing a snippet, this loads the snippet into the correct mode
and menu. Bound to <b>C-c C-c</b> by default while in snippet-mode.
</p></li>

<li><p>
<code>M-x yas/tryout-snippet</code>
</p>

<p>
When editing a snippet, this opens a new empty buffer, sets it to the
appropriate major mode and inserts the snippet there, so you can see
what it looks like. This is bound to <b>C-c C-t</b> while in snippet-mode.
</p></li>
</ul>

<p>
<a href="http://capitaomorte.github.com/yasnippet/snippet-development.html">Snippet Development</a>
</p>

<ul class="org-ul">
<li><code>M-x yas/new-snipper</code>           (to create a new one)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org344596f" class="outline-3">
<h3 id="org344596f"><span class="section-number-3">26.2.</span> Auto-Completion</h3>
<div class="outline-text-3" id="text-26-2">
</div>
<div id="outline-container-orgc613b7d" class="outline-4">
<h4 id="orgc613b7d"><span class="section-number-4">26.2.1.</span> Emacs Completion Engines:</h4>
<div class="outline-text-4" id="text-26-2-1">
<ul class="org-ul">
<li>manual:<a href="https://www.gnu.org/software/emacs/manual/html_mono/ido.html">IDO</a>

<ul class="org-ul">
<li>iswitchb</li>
<li>The package <a href="http://emacswiki.org/emacs/InteractivelyDoThings">InteractivelyDoThings</a> (IDO) is part of Emacs, starting with release 22.
<ul class="org-ul">
<li>ido + ido-ubiquitous + ido-vertical-mode</li>
<li>matches anywhere, narrows down set, has fuzzy matching</li>
</ul></li>
<li>Helm
helm-descbinds
helm-show-kill-ring
helm-completing-read-handlers-alist</li>
<li>Ivy    ivy + counsel</li>
<li>projectile</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> counsel
  <span style="color: #00008b;">:config</span>
    (global-set-key (kbd <span style="color: #bc8f8f;">"M-x"</span>) 'counsel-M-x)
    (global-set-key (kbd <span style="color: #bc8f8f;">"C-x C-f"</span>) 'counsel-find-file)
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "&lt;f1&gt; f") 'counsel-describe-function)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "&lt;f1&gt; v") 'counsel-describe-variable)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "&lt;f1&gt; l") 'counsel-find-library)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "&lt;f2&gt; i") 'counsel-info-lookup-symbol)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "&lt;f2&gt; u") 'counsel-unicode-char)</span>

    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "C-c g") 'counsel-git)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "C-c j") 'counsel-git-grep)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "C-c a") 'counsel-ag)</span>
    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "C-x l") 'counsel-locate)</span>

    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(global-set-key (kbd "C-S-o") 'counsel-rhythmbox)</span>

    <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(define-key minibuffer-local-map (kbd "C-r") 'counsel-minibuffer-history))</span>
)
(<span style="color: #4169e1;">use-package</span> counsel-tramp
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org30f6710" class="outline-4">
<h4 id="org30f6710"><span class="section-number-4">26.2.2.</span> Places to Use Completion Engines:</h4>
<div class="outline-text-4" id="text-26-2-2">
<dl class="org-dl">
<dt>open files   C-x C-f</dt><dd>find-file -&gt; ido-find-file
<ul class="org-ul">
<li>can use bookmarks instead</li>
<li>can open many files at once using wildcards</li>
<li>open a directory using dired and then open files in it with C-o</li>
</ul></dd>

<dt>switch buffers  C-x b</dt><dd>switch-to-buffer -&gt; ido-switch-buffer</dd>

<dt>(no term)</dt><dd>navigate directories</dd>
<dt>(no term)</dt><dd>C-h f</dd>
<dt>(no term)</dt><dd>C-h v</dd>
<dt>(no term)</dt><dd>M-x NAME</dd>
<dt>(no term)</dt><dd>org-capture</dd>
<dt>(no term)</dt><dd>org-file    browse all attachments</dd>
</dl>
</div>
</div>

<div id="outline-container-org404acc3" class="outline-4">
<h4 id="org404acc3"><span class="section-number-4">26.2.3.</span> Configuring Auto-Completion</h4>
<div class="outline-text-4" id="text-26-2-3">
<p>
install package: Ivy
install package: Swiper (alternative to isearch interface)
install package: Counsel
</p>

<p>
git-grep
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">  (ivy-mode 1)

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(setq ivy-use-virtual-buffers t)</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(setq ivy-count-format "(%d/%d) ")</span>

  (global-set-key (kbd <span style="color: #bc8f8f;">"C-s"</span>) 'swiper)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc2f78df" class="outline-4">
<h4 id="orgc2f78df"><span class="section-number-4">26.2.4.</span> IDO Auto-Completion Keys at a Prompt</h4>
<div class="outline-text-4" id="text-26-2-4">
<dl class="org-dl">
<dt>C-f	</dt><dd>revert to the old find-file completion engine</dd>
<dt>C-b	</dt><dd>revert to the old switch-buffer completion engine</dd>
<dt>C-d	</dt><dd>Opens a dired buffer in the current directory</dd>

<dt>C-a          </dt><dd>toggles the showing of ignored files</dd>
<dt>C-c          </dt><dd>toggles the ignoring of case in buffer and file names</dd>
<dt>C-p          </dt><dd>toggles anchoring prefix matching at the beginning of a name</dd>

<dt>C-s	</dt><dd>move to next item in list</dd>
<dt>C-r	</dt><dd>move to previous item in list</dd>

<dt>C-SPC</dt><dd>restrict list of options to what I've typed so far</dd>

<dt>//	</dt><dd>go to the root directory</dd>
<dt>~/	</dt><dd>go to your home directory</dd>

<dt>M-d          </dt><dd>searches for the input in all subdirectories</dd>

<dt>C-k          </dt><dd>kills the currently focused buffer or deletes the file</dd>

<dt>C-j	</dt><dd>create a new file named with the text you entered</dd>
<dt>M-m	</dt><dd>creates a new subdirectory to the directory you're in</dd>
</dl>



<p>
#+END_SRC
</p>
</div>
</div>
</div>


<div id="outline-container-orgba6b17b" class="outline-3">
<h3 id="orgba6b17b"><span class="section-number-3">26.3.</span> Editor Behavior</h3>
<div class="outline-text-3" id="text-26-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 22: </span>~/.emacs.d/25-editor-behavior.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 25-editor-behavior
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">25-editor-behavior --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
Focused on: in-editor behavior e.g.undo, whitespace highlighting, cursor line, etc.
</p>
</div>
</div>
</div>

<div id="outline-container-org325078b" class="outline-2">
<h2 id="org325078b"><span class="section-number-2">27.</span> Managing Undo Operations</h2>
<div class="outline-text-2" id="text-27">
<p>
The <code>undo-tree</code> Emacs package is great for visualizing the undo tree.
<code>undo-tree-mode</code> replaces Emacs’ standard undo feature with a more powerful
yet easier to use version, that treats the undo history as what it is: a tree.
</p>

<p>
I use <code>C-x u</code> to run undo-tree-visualize.
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> undo-tree
  <span style="color: #00008b;">:init</span>
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Enable auto-save of undo history</span>
    (<span style="color: #4169e1;">setq</span> undo-tree-auto-save-history t
      undo-tree-history-directory-alist
      `((<span style="color: #bc8f8f;">".*"</span> . ,(expand-file-name <span style="color: #bc8f8f;">"undo/"</span> xan/cache-dir))))
  <span style="color: #00008b;">:config</span>
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">Activate everywhere</span>
    (global-undo-tree-mode 1)
)


(global-undo-tree-mode 1)   <span style="color: #b22222;">;; </span><span style="color: #b22222;">turn on everywhere</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(diminish 'undo-tree-mode)  ;; but do not show its name on UI modeline</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Prevent undo tree files from polluting your git repo</span>
(<span style="color: #4169e1;">setq</span> undo-tree-history-directory-alist '((<span style="color: #bc8f8f;">"."</span> . <span style="color: #bc8f8f;">"~/.emacs.d/undo"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org23386ef" class="outline-2">
<h2 id="org23386ef"><span class="section-number-2">28.</span> Undo System Settings</h2>
<div class="outline-text-2" id="text-28">
<p>
Undo system settings (the built-in undo-limit, or global undo-tree
config) are really editor behavior—they control how you backtrack in
the buffer.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 23: </span>Undo-System Settings</label><pre class="src src-emacs-lisp">
<span style="color: #b22222;">;;</span><span style="color: #b22222;">#AI ;; Tune the built-in undo limits</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">#AI (setq undo-limit         800000</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">#AI       undo-strong-limit 12000000</span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">#AI       undo-outer-limit  120000000)</span>

</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 24: </span>Persistent undo</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> undo-tree-auto-save-history t
      undo-tree-history-directory-alist `((<span style="color: #bc8f8f;">".*"</span> . ,(expand-file-name <span style="color: #bc8f8f;">"undo/"</span> xan/cache-dir))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd2616e" class="outline-2">
<h2 id="orgcd2616e"><span class="section-number-2">29.</span> Whitespace Highlighting</h2>
</div>

<div id="outline-container-orgc97fd16" class="outline-2">
<h2 id="orgc97fd16"><span class="section-number-2">30.</span> Cursor Line</h2>
<div class="outline-text-2" id="text-30">
<p>
#+END_SRC
</p>
</div>


<div id="outline-container-org2329206" class="outline-3">
<h3 id="org2329206"><span class="section-number-3">30.1.</span> Core Behavior Tweaks</h3>
<div class="outline-text-3" id="text-30-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 25: </span>~/.emacs.d/30-core-behavior-tweaks.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 30-core-behavior-tweaks
<span class="linenr">2: </span>#+DESCRIPTION: File-level persistence e.g. auto-save, backups, cache
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">30-core-behavior-tweaks.el --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
Focused on file-level persistence e.g. auto-save, backups, cache
</p>
</div>
</div>
</div>

<div id="outline-container-orgc4e63b3" class="outline-2">
<h2 id="orgc4e63b3"><span class="section-number-2">31.</span> Obscure Emacs Variables</h2>
<div class="outline-text-2" id="text-31">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">----------------------------------------------------------------------</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Set various somewhat obscure Emacs variables, for efficient operation.</span>

(<span style="color: #4169e1;">setq</span>

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">I have some larger files and I don't want Emacs to complain about</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">them so I raised the threshold from 9MB.</span>

  large-file-warning-threshold  20000000 <span style="color: #b22222;">; </span><span style="color: #b22222;">20MB</span>

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Prevent stale byte-code issues in scripts, while saving startup</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">I/O checks.  Especially relevant when not byte-compiling</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">everything, to prioritize non-byte-compiled source files to</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">prevent the use of stale byte-code.</span>

  load-prefer-newer  'noninteractive

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Maximum number of bytes to read from subprocess in a single chunk.</span>
  <span style="color: #b22222;">;;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Enlarge the value only if the subprocess generates very large</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(megabytes) amounts of data in one go.  Improves LSP and</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">subprocess throughput.  Critical for lsp-mode, eglot, etc.</span>

  read-process-output-max  (* 1024 1024 4) <span style="color: #b22222;">; </span><span style="color: #b22222;">4 MB</span>

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Do NOT compact (discard) cached fonts during garbage collection.</span>
  <span style="color: #b22222;">;;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Prevents GC-triggered font redisplay stutter with large fonts.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Very useful for multilingual documents or UI-heavy configs.</span>

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Some large fonts cause lots of consing and trigger GC.  If they</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">are discarded from the font caches during garbage collection,</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">they will need to be opened AGAIN during redisplay, which slows</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">down redisplay.</span>
  <span style="color: #b22222;">;;</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">If you see font-related delays in displaying some special</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">characters, and cannot switch to a smaller font for those</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">characters, set this variable non-nil.  Disabling compaction of</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">font caches might enlarge the Emacs memory footprint in sessions</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">that use lots of different fonts.</span>

  inhibit-compacting-font-caches  t

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Maximum number of lines to keep in the *Messages* log buffer.</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Good practice that prevents runaway *Messages* buffer size while</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">still allowing debugging.</span>

  message-log-max  16384

  <span style="color: #b22222;">;; </span><span style="color: #b22222;">This disables loading of `site-start.el`, which some distros (like</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Debian, Arch, etc.) use to inject site-wide behavior into all</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Emacs sessions.  Use it in personal configs aiming for</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">reproducibility.</span>

  site-run-file  nil
)  
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4aadf8" class="outline-2">
<h2 id="orgd4aadf8"><span class="section-number-2">32.</span> Automate the Garbage-Collection Thresholds</h2>
<div class="outline-text-2" id="text-32">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 26: </span>Automate Garbage-Collection Thresholds</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> gcmh
  <span style="color: #00008b;">:demand</span> t   <span style="color: #b22222;">; </span><span style="color: #b22222;">load immediately during init</span>
  <span style="color: #00008b;">:commands</span> (gcmh-mode)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">&#8592; this line makes gcmh-mode an autoload</span>
  <span style="color: #00008b;">:config</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">GCMH Mode will dynamically swap thresholds:</span>
  <span style="color: #b22222;">;;   </span><span style="color: #b22222;">- `gcmh-high-cons-threshold` when idle</span>
  <span style="color: #b22222;">;;   </span><span style="color: #b22222;">- `gcmh-low-cons-threshold` (default 20MB) when in use</span>
  (<span style="color: #4169e1;">setq</span> gcmh-idle-delay           5         <span style="color: #b22222;">; </span><span style="color: #b22222;">seconds of idle before GC</span>
        gcmh-high-cons-threshold  most-positive-fixnum
        gcmh-verbose              nil)      <span style="color: #b22222;">; </span><span style="color: #b22222;">no echo messages</span>
  (gcmh-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-org809b880" class="outline-2">
<h2 id="org809b880"><span class="section-number-2">33.</span> Revised Layout</h2>
<div class="outline-text-2" id="text-33">
<p>
In order to declutter my ~/.emacs.d/ directory I've adopted a layout
of putting anything that is cache related under ~/.emacs.d/cache/ and
anything that is dynamically generated data under ~/.emacs.d/data/.
</p>

<p>
"Work Protection"
</p>
</div>

<div id="outline-container-org0ebbca7" class="outline-3">
<h3 id="org0ebbca7"><span class="section-number-3">33.1.</span> Auto-Saves</h3>
<div class="outline-text-3" id="text-33-1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 27: </span>Auto-save list</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">dolist</span> (sub '(<span style="color: #bc8f8f;">"auto-save/"</span> <span style="color: #bc8f8f;">"auto-save-list/"</span>))
  (make-directory (expand-file-name sub xan/cache-dir) t))

(<span style="color: #4169e1;">setq</span> auto-save-list-file-prefix (expand-file-name <span style="color: #bc8f8f;">"auto-save-list/#"</span> xan/cache-dir))
(<span style="color: #4169e1;">setq</span> auto-save-file-name-transforms `((<span style="color: #bc8f8f;">".*"</span> ,(expand-file-name <span style="color: #bc8f8f;">"auto-save/"</span> xan/cache-dir) t)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org139efdd" class="outline-2">
<h2 id="org139efdd"><span class="section-number-2">34.</span> Backups</h2>
<div class="outline-text-2" id="text-34">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 28: </span>File Backups</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">dolist</span> (sub '(<span style="color: #bc8f8f;">"backups/"</span>))
  (make-directory (expand-file-name sub xan/cache-dir) t))

(<span style="color: #4169e1;">setq-default</span> make-backup-files
  t)                                  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Whether to make backup files at all or not.</span>

(<span style="color: #4169e1;">setq</span> version-control t                <span style="color: #b22222;">;; </span><span style="color: #b22222;">Use version numbers for backups</span>
      kept-new-versions 16             <span style="color: #b22222;">;; </span><span style="color: #b22222;">Number of newest versions to keep</span>
      kept-old-versions 2              <span style="color: #b22222;">;; </span><span style="color: #b22222;">Number of oldest versions to keep</span>
      delete-old-versions t            <span style="color: #b22222;">;; </span><span style="color: #b22222;">Ask to delete excess backup versions?</span>
      backup-by-copying-when-linked t) <span style="color: #b22222;">;; </span><span style="color: #b22222;">Copy linked files, don't rename.</span>
      <span style="color: #b22222;">;;</span><span style="color: #b22222;">#AI  backup-by-copying      t)  ; don&#8217;t symlink</span>

(<span style="color: #4169e1;">setq</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">Keep all backup files in one place</span>
  backup-directory-alist `((<span style="color: #bc8f8f;">".*"</span> . ,(expand-file-name <span style="color: #bc8f8f;">"backups/"</span> xan/cache-dir)))

)
</pre>
</div>

<p>
Emacs offers two related variables to control whether it makes backups by
renaming vs. copying:
</p>

<ol class="org-ol">
<li>backup-by-copying (default nil):
<ul class="org-ul">
<li>If non–nil, always copy the original file to the backup, then write your edits into a fresh file.</li>
<li>Pros: never breaks hard links, preserves owner/group, safer for “precious” files.</li>
<li>Cons: copying can be slightly slower and use more I/O.</li>
</ul></li>

<li>backup-by-copying-when-linked (default nil):
<ul class="org-ul">
<li>Has effect only if backup-by-copying is nil.</li>
<li>If non–nil and the file has multiple names (i.e. its link count &gt; 1), then copy instead of rename.</li>
<li>Otherwise (single link), Emacs will rename (the default) to save a bit of I/O.</li>
</ul></li>
</ol>
</div>
</div>

<div id="outline-container-org225a434" class="outline-2">
<h2 id="org225a434"><span class="section-number-2">35.</span> Backups in a World of VC</h2>
<div class="outline-text-2" id="text-35">
<ol class="org-ol">
<li>vc-make-backup-files

<ul class="org-ul">
<li>What it does: by default, Emacs skips making file~ backups for files
under version control (Git, SVN, etc.).</li>

<li>Setting vc-make-backup-files = t tells Emacs to treat VC-managed files
just like any other file and still create numbered backups.</li>

<li>Concepts: version-controlled files, VC integration, backup policy.</li>
</ul></li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED">;; Even VC-managed files get backup~ files
(setq vc-make-backup-files t)
</pre>
</div>

<ol class="org-ol">
<li>file-precious-flag

<ul class="org-ul">
<li>What it does: when non-nil, Emacs writes your changes to a fresh temp
file and only swaps it in place of the original if the write completes
successfully.</li>

<li>This prevents data loss if Emacs crashes or the disk fills up mid-save.</li>

<li>Concepts: atomic save, write-temp-file safety, precious files.</li>
</ul></li>
</ol>

<p>
;; In 30-core-behavior-tweaks.org
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Use atomic, &#8220;precious&#8221; saves to avoid corrupting the original</span>
(<span style="color: #4169e1;">setq</span> file-precious-flag t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0a930c4" class="outline-2">
<h2 id="org0a930c4"><span class="section-number-2">36.</span> Keeping Last N Editions of Files Edited</h2>
<div class="outline-text-2" id="text-36">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">force-backup-of-buffer</span> ()
  (<span style="color: #4169e1;">let</span> ((buffer-backed-up nil))
    (backup-buffer)))

(add-hook 'before-save-hook  'force-backup-of-buffer)
(add-hook 'after-save-hook 'executable-make-buffer-file-executable-if-script-p)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">(add-hook 'before-save-hook 'time-stamp)</span>
</pre>
</div>
</div>
</div>








<div id="outline-container-org04a555b" class="outline-2">
<h2 id="org04a555b"><span class="section-number-2">37.</span> Location Identifiers</h2>
<div class="outline-text-2" id="text-37">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 29: </span>.org-id-locations and .org-generic-id-locations</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-id-locations-file (expand-file-name <span style="color: #bc8f8f;">"org-id-locations"</span> xan/data-dir))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Optional: if using org-generic-id (less common)</span>
(<span style="color: #4169e1;">setq</span> org-generic-id-locations-file (expand-file-name <span style="color: #bc8f8f;">"org-generic-id-locations"</span> xan/data-dir))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc34d86" class="outline-2">
<h2 id="orgbc34d86"><span class="section-number-2">38.</span> Cached or Small Items Persistence</h2>
<div class="outline-text-2" id="text-38">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 30: </span>Org clock persistence</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-clock-persist-file (expand-file-name <span style="color: #bc8f8f;">"org-clock-save.el"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 31: </span>eshell history and data</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> eshell-directory-name (expand-file-name <span style="color: #bc8f8f;">"eshell/"</span> xan/cache-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 32: </span>cookies/history</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> url-cookie-file (expand-file-name <span style="color: #bc8f8f;">"url/cookies"</span> xan/data-dir)
      url-history-file (expand-file-name <span style="color: #bc8f8f;">"url/history"</span> xan/data-dir))
</pre>
</div>
</div>
</div>

<div id="outline-container-org438b042" class="outline-2">
<h2 id="org438b042"><span class="section-number-2">39.</span> Redirect Individual Features</h2>
<div class="outline-text-2" id="text-39">
<p>
To organize my ~/.emacs.d/ directory I group various little storage areas under data or cache.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 33: </span>places.el (cursor locations)</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> save-place-file (expand-file-name <span style="color: #bc8f8f;">"places"</span> xan/data-dir))
(save-place-mode 1)
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 34: </span>bookmark.el</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> bookmark-default-file (expand-file-name <span style="color: #bc8f8f;">"bookmarks"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 35: </span>recentf</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> recentf-save-file (expand-file-name <span style="color: #bc8f8f;">"recentf"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 36: </span>transient (magic, etc.)</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> transient-history-file     (expand-file-name <span style="color: #bc8f8f;">"transient/history.el"</span> xan/data-dir)
      transient-levels-file      (expand-file-name <span style="color: #bc8f8f;">"transient/levels.el"</span> xan/data-dir)
      transient-values-file      (expand-file-name <span style="color: #bc8f8f;">"transient/values.el"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 37: </span>tramp</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> tramp-persistency-file-name (expand-file-name <span style="color: #bc8f8f;">"tramp"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 38: </span>nov.el (ePub reader)</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> nov-save-place-file (expand-file-name <span style="color: #bc8f8f;">"nov-places"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 39: </span>org-babel library</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-babel-library-of-babel-file (expand-file-name <span style="color: #bc8f8f;">"org-babel-library.org"</span> xan/data-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 40: </span>Request.el</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> request-storage-directory (expand-file-name <span style="color: #bc8f8f;">"request/"</span> xan/cache-dir))
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 41: </span>yasnippet</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> yas-snippet-dirs `(,(expand-file-name <span style="color: #bc8f8f;">"snippets/"</span> xan/data-dir)))
</pre>
</div>



<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 42: </span>chatgpt/ and chatgpt-shell.el (from gpt.el or chatgpt-shell)</label><pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">GPT-related package paths</span>
(<span style="color: #4169e1;">setq</span> chatgpt-shell-history-directory (expand-file-name <span style="color: #bc8f8f;">"chatgpt/"</span> xan/data-dir)
      chatgpt-shell-configuration-file (expand-file-name <span style="color: #bc8f8f;">"chatgpt-shell.el"</span> xan/data-dir))

(make-directory chatgpt-shell-history-directory t)
</pre>
</div>


<p>
#+END_SRC
</p>

<ul class="org-ul">
<li>auto-saves</li>
<li>backups</li>
<li>location identifiers</li>
<li>cached or small items persistence</li>
<li>redirect stuff under cache/ or data/</li>
<li>`tramp` should probably get its own .org file.</li>
<li>`nov.el` as a major mode should get its own .org file.</li>
<li>`org-babel` has a LOT of configuration so should get its own .org file.</li>
<li>`yasnippet` has a LOT of configuration so should get its own .org file.</li>
<li>(should `request.el`, `url.el` and `tls.el` be together?</li>
</ul>
</div>
</div>

<div id="outline-container-orgeefdd23" class="outline-2">
<h2 id="orgeefdd23"><span class="section-number-2">40.</span> Phase 40 – Programming environment</h2>
<div class="outline-text-2" id="text-40">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 43: </span>~/.emacs.d/40-prog-python.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 40-prog-python
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">40-prog-python.el --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>





<p>
#+END_SRC
</p>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 44: </span>~/.emacs.d/45-prog-common.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 45-prog-common
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">45-prog-common.el --- ???Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>





<p>
#+END_SRC
</p>
</div>
</div>


<div id="outline-container-orgaabd4df" class="outline-2">
<h2 id="orgaabd4df"><span class="section-number-2">41.</span> Phase 50 – Org-mode environment</h2>
<div class="outline-text-2" id="text-41">
<p>
Why this split?
</p>

<ul class="org-ul">
<li>Core vs. capture vs. refile vs. export vs. tasks vs. UI each have very
distinct responsibilities.</li>

<li>You can load/tangle only the phases you need at a given time—helpful for
testing or when you want to e.g. rebuild just your agenda setup.</li>

<li>It aligns with the flow:

<ol class="org-ol">
<li>Open/write files (core)</li>
<li>Capture new items</li>
<li>Refile &amp; archive processed items</li>
<li>Export/sharing your Org docs</li>
<li>Task tracking &amp; habits</li>
<li>Presentation &amp; modeline polish</li>
</ol></li>
</ul>

<p>
Feel free to tweak which packages live in which file—but generally, things
that change where Org reads your files go in 50; things that change how you
capture go in 51; where you file/archive go in 52; export and link behavior in
53; task/agenda flow in 54; and purely visual/UI tweaks in 55.
</p>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 45: </span>~/.emacs.d/50-org-core.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 50-org-core
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">50-org-core.el --- Foundational Org-mode setup -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org63fbcaf" class="outline-2">
<h2 id="org63fbcaf"><span class="section-number-2">42.</span> Org Attach</h2>
<div class="outline-text-2" id="text-42">
<p>
org-attach is really part of Org’s core attachment subsystem, not an
external download‐helper. So I’d keep your use-package/org-attach (and
any settings of org-attach-id-dir) in 50-org-core.org, alongside your
org-directory and org-modules.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; Org Attach &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">obsolete: (setq org-attach-directory "~/Dropbox/Documents/")</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">new in Org 9.3+: use org-attach-id-dir instead :contentReference[oaicite:0]{index=0}</span>
(<span style="color: #4169e1;">use-package</span> org
  <span style="color: #00008b;">:straight</span> (<span style="color: #00008b;">:type</span> built-in)
  <span style="color: #00008b;">:after</span> org-attach
  <span style="color: #00008b;">:custom</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">store all attachments under ~/Dropbox/Documents/attachments/</span>
  (org-attach-id-dir (expand-file-name <span style="color: #bc8f8f;">"attachments/"</span> <span style="color: #bc8f8f;">"~/Dropbox/Documents/"</span>))
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">ensure the attach subsystem is loaded before we set it</span>
  <span style="color: #00008b;">:config</span>
  (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-attach</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org795b82d" class="outline-2">
<h2 id="org795b82d"><span class="section-number-2">43.</span> Locations/Directories</h2>
<div class="outline-text-2" id="text-43">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-directory  <span style="color: #b22222;">;; </span><span style="color: #b22222;">*default* directory of .org files</span>
    <span style="color: #bc8f8f;">"~/Dropbox/Documents"</span>)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-modules
 '(
    ol-bbdb
    ol-bibtex
    ol-docview
    ol-gnus
    org-habit
    ol-info
    ol-irc
    ol-mhe
    ol-rmail
    ol-w3m
  )
)
</pre>
</div>
</div>

<div id="outline-container-org3e1199a" class="outline-3">
<h3 id="org3e1199a"><span class="section-number-3">43.1.</span> Common Org-Mode Modules I Enable</h3>
<div class="outline-text-3" id="text-43-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">org-tempo</span>)

(<span style="color: #4169e1;">setq</span> org-structure-template-alist
      '((<span style="color: #bc8f8f;">"a"</span> . <span style="color: #bc8f8f;">"EXPORT ASCII"</span>)
        (<span style="color: #bc8f8f;">"c"</span> . <span style="color: #bc8f8f;">"CENTER"</span>)
        (<span style="color: #bc8f8f;">"C"</span> . <span style="color: #bc8f8f;">"COMMENT"</span>)
        (<span style="color: #bc8f8f;">"e"</span> . <span style="color: #bc8f8f;">"EXAMPLE"</span>)
        (<span style="color: #bc8f8f;">"E"</span> . <span style="color: #bc8f8f;">"EXPORT"</span>)
        (<span style="color: #bc8f8f;">"h"</span> . <span style="color: #bc8f8f;">"EXPORT HTML"</span>)
        (<span style="color: #bc8f8f;">"l"</span> . <span style="color: #bc8f8f;">"EXPORT LATEX"</span>)
        (<span style="color: #bc8f8f;">"q"</span> . <span style="color: #bc8f8f;">"QUOTE"</span>)
        (<span style="color: #bc8f8f;">"s"</span> . <span style="color: #bc8f8f;">"SRC"</span>)
        (<span style="color: #bc8f8f;">"v"</span> . <span style="color: #bc8f8f;">"VERSE"</span>)
       )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-startup-indented   t          <span style="color: #b22222;">;; </span><span style="color: #b22222;">YES</span>
  org-pretty-entities    t          <span style="color: #b22222;">;; </span><span style="color: #b22222;">YES</span>
  org-image-actual-width nil        <span style="color: #b22222;">;; </span><span style="color: #b22222;">YES</span>
  org-ellipsis           <span style="color: #bc8f8f;">" &#9660;"</span>)      <span style="color: #b22222;">;; </span><span style="color: #b22222;">YES</span>
</pre>
</div>

<p>
When set to nil, try to get the width from an #+ATTR.* keyword
and fall back on the original width if none is found.
</p>

<ul class="org-ul">
<li>blogpost: <a href="http://endlessparentheses.com/changing-the-org-mode-ellipsis.html">Changing the org-mode Ellipsis</a></li>
</ul>
</div>
</div>

<div id="outline-container-org5ff6662" class="outline-3">
<h3 id="org5ff6662"><span class="section-number-3">43.2.</span> In-Buffer Completion and Templates</h3>
<div class="outline-text-3" id="text-43-2">
<p>
Org has in-buffer completions. Unlike minibuffer completions, which
are useful for quick command interactions, Org’s in-buffer completions
are more suitable for content creation in Org documents. Type one or
more letters and invoke the hot key to complete the text
in-place. Depending on the context and the keys, Org offers different
types of completions. No minibuffer is involved. Such mode-specific
hot keys have become an integral part of Emacs and Org provides
several shortcuts.
</p>

<p>
M-TAB
</p>

<p>
Complete word at point.
</p>

<ul class="org-ul">
<li>At the beginning of an empty headline, complete TODO keywords.</li>
<li>After ‘\’, complete TeX symbols supported by the exporter.</li>
<li>After ‘:’ in a headline, complete tags. Org deduces the list of tags from the ‘TAGS’ in-buffer option (see Setting Tags), the variable org-tag-alist, or from all tags used in the current buffer.</li>
<li>After ‘:’ and not in a headline, complete property keys. The list of keys is constructed dynamically from all keys used in the current buffer.</li>
<li>After ‘[[’, complete link abbreviations (see Link Abbreviations).</li>
<li>After XXX‘[[*’, complete headlines in the current buffer so that they can be used in search links like: ‘[[*find this headline]</li>
<li>After ‘#+’, complete the special keywords like ‘TYP_TODO’ or file-specific ‘OPTIONS’. After option keyword is complete, pressing M-TAB again inserts example settings for this keyword.</li>
<li>After ‘STARTUP’ keyword, complete startup items.</li>
<li>When point is anywhere else, complete dictionary words using Ispell.</li>
</ul>

<p>
16.2 Structure Templates
</p>

<p>
With just a few keystrokes, it is possible to insert empty structural blocks, such as ‘#+BEGIN_SRC’ … ‘#+END_SRC’, or to wrap existing text in such a block.
</p>

<p>
C-c C-, (org-insert-structure-template)
</p>

<p>
Prompt for a type of block structure, and insert the block at point. If the region is active, it is wrapped in the block. First prompts the user for keys, which are used to look up a structure type from the variable below. If the key is TAB, RET, or SPC, the user is prompted to enter a block type. 
</p>

<p>
Available structure types are defined in org-structure-template-alist, see the docstring for adding or changing values.
</p>

<p>
Org Tempo expands snippets to structures defined in
org-structure-template-alist and org-tempo-keywords-alist. For example, &lt; s
TAB creates a code block. Enable it by customizing org-modules or add
‘(require 'org-tempo)’ to your Emacs init file148.
</p>


<p>
a	‘#+BEGIN_EXPORT ascii’ … ‘#+END_EXPORT’
c	‘#+BEGIN_CENTER’ … ‘#+END_CENTER’
C	‘#+BEGIN_COMMENT’ … ‘#+END_COMMENT’
e	‘#+BEGIN_EXAMPLE’ … ‘#+END_EXAMPLE’
E	‘#+BEGIN_EXPORT’ … ‘#+END_EXPORT’
h	‘#+BEGIN_EXPORT html’ … ‘#+END_EXPORT’
l	‘#+BEGIN_EXPORT latex’ … ‘#+END_EXPORT’
q	‘#+BEGIN_QUOTE’ … ‘#+END_QUOTE’
s	‘#+BEGIN_SRC’ … ‘#+END_SRC’
v	‘#+BEGIN_VERSE’ … ‘#+END_VERSE’
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">;; enable in-buffer M-TAB completion in org
(setq org-completion-use-ido nil)        ; or your preferred completion UI
(setq completion-at-point-functions
      (cons #'org-complete-at-point
            completion-at-point-functions))

(require 'org-tempo)                     ; C-c C-, / &lt;s&lt;TAB&gt; templates
(setq org-structure-template-alist
      '(("s" . "SRC") ("e" . "EXAMPLE") ("h" . "EXPORT HTML") ...))
</pre>
</div>
</div>
</div>

<div id="outline-container-org2ee3302" class="outline-3">
<h3 id="org2ee3302"><span class="section-number-3">43.3.</span> Speed Keys</h3>
</div>

<div id="outline-container-org5bca82e" class="outline-3">
<h3 id="org5bca82e"><span class="section-number-3">43.4.</span> Dynamic Headline Numbering</h3>
<div class="outline-text-3" id="text-43-4">
<p>
The Org Num minor mode, toggled with M-x org-num-mode, displays
outline numbering on top of headlines. It also updates it
automatically upon changes to the structure of the document.
</p>

<p>
By default, all headlines are numbered. You can limit numbering to
specific headlines according to their level, tags, ‘COMMENT’ keyword,
or ‘UNNUMBERED’ property. Set org-num-max-level, org-num-skip-tags,
org-num-skip-commented, org-num-skip-unnumbered, or
org-num-skip-footnotes accordingly.
</p>

<p>
If org-num-skip-footnotes is non-nil, footnotes sections (see Creating
Footnotes) are not numbered either.
</p>

<p>
You can control how the numbering is displayed by setting org-num-face
and org-num-format-function.
</p>

<p>
You can also turn this mode globally for all Org files by setting the
option org-startup-numerated to ‘t’, or locally on a file by using
‘#+startup: num’.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">;; outline-style numbering on the fly
(setq org-num-max-level 3
      org-startup-numerated t)         ; or use #+startup: num in individual files
(org-num-mode 1)                       ; enable globally
</pre>
</div>

<p>
#+END_SRC
</p>

<ul class="org-ul">
<li>org-directory, org-attach-directory</li>
<li>org-modules (which contrib libraries to load)</li>
<li>org-temp + org-structure-template-alist (inline block/snippet templates)</li>
</ul>
<p>
– Startup behaviors: org-startup-indented, org-pretty-entities, org-image-actual-width, org-ellipsis
– Core export backends: (setq org-export-backends ’(html latex odt &#x2026;))
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 46: </span>~/.emacs.d/51-org-capture.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 51-org-capture
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">51-org-capture.el --- Capture templates &amp; default note files -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
;;;UNUSED (setq org-default-notes-file  ;; <b>default</b> .org file for org-capture.el
;;;UNUSED    "~/Dropbox/Documents/tosort.org")
</p>
</div>
</div>
</div>

<div id="outline-container-org4fdbcf7" class="outline-2">
<h2 id="org4fdbcf7"><span class="section-number-2">44.</span> 51 – Org Capture</h2>
<div class="outline-text-2" id="text-44">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;</span><span style="color: #b22222;">AI (setq org-default-notes-file (expand-file-name "inbox.org" org-directory))</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">AI (setq org-capture-templates</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">AI       '(("t" "Todo" entry (file+headline org-default-notes-file "Tasks")</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">AI         "* TODO %?\n  %i\n  %a")</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">AI        ("n" "Note" entry (file org-default-notes-file)</span>
<span style="color: #b22222;">;</span><span style="color: #b22222;">AI         "* %? :NOTE:\n  %i\n  %U")))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf733f3f" class="outline-2">
<h2 id="orgf733f3f"><span class="section-number-2">45.</span> Bringing In a URL With Its Title</h2>
<div class="outline-text-2" id="text-45">
<p>
Takes a URL from the clipboard and inserts an org-mode link with the title of
a page found by the URL into the current buffer.
</p>

<p>
Cannot load org-cliplink: (file-missing "Cannot open load file" "No such file or directory" "org-cliplink")
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> org-cliplink
  <span style="color: #00008b;">:after</span> org
  <span style="color: #b22222;">;;; </span><span style="color: #b22222;">:bind ("C-c l" . org-cliplink)</span>
)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">use curl instead of url-retrieve, which sometimes handles redirections better.</span>
(<span style="color: #4169e1;">setq</span> org-cliplink-transport-implementation 'curl)

(global-set-key (kbd <span style="color: #bc8f8f;">"C-c P"</span>) 'org-cliplink)
</pre>
</div>
</div>

<div id="outline-container-orgd344839" class="outline-3">
<h3 id="orgd344839"><span class="section-number-3">45.1.</span> Forms for <b>Capturing</b> Information (predefined templates)</h3>
<div class="outline-text-3" id="text-45-1">
<p>
Capturing is primarily about defining:
</p>

<ol class="org-ol">
<li>places to quickly write things</li>
<li>templates to help structure what you write</li>
</ol>

<p>
Sometimes you want to place things in specific locations, but this quickly
breaks down when something can go into more than one place.  For that reason,
I rely more on tags than locations.
</p>

<p>
In my approach, capture should be used for ??? and not for things that are
better handled with tags where they can be distributed throughout .org files.
Sometimes information should be in one place and other times it belongs
scattered throughout your information structure.
</p>

<p>
Things that should be scattered about and associated by location with
<code>specific topics</code> are:
</p>

<ul class="org-ul">
<li>l   general link to remember  (located within relevant project and tagged)</li>
<li>ze  Email Item to Address     (tagged, not located)
<code>FIGURE OUT HOW TO COLLECT USING EMACS EMAILS NEEDING ATTENTION</code></li>
<li>za  Action Item to Address    (tagged, not located)</li>
<li>b   a book to read            (tagged, not located because any project may have suggested books)</li>
<li>v   a video to watch          (tagged, not located because any project may have suggested videos)</li>
<li>w   website to visit          (tagged, not located because any project may have suggested websites)</li>
</ul>

<p>
Things that should be in one place are:
</p>

<dl class="org-dl">
<dt>zm</dt><dd>Meeting Notes (documented understandings, action items, questions)
(may be refiled into a relevant project)
<code>BE SURE TO TURN ON REFILING HISTORY COLLECTION SO WE CAN SEE WHICH MEETING IT CAME FROM</code></dd>

<dt>(no term)</dt><dd>Things to Study Further (websites, books, videos)
(may be refiled into a relevant project)
<ul class="org-ul">
<li>r   research to undertake</li>
</ul></dd>

<dt>(no term)</dt><dd>personal major projects
mathematics
  conceptual tools
    differential calculus
    integral calculus
  laws
  people
  philosophies
    rationalism
    logic philosophy
    analytic philosophy
    scholastic tradition
principles of debate
office decor
riverhood</dd>

<dt>(no term)</dt><dd>meeting notes
<ul class="org-ul">
<li>non-regular arbitrary meeting</li>
<li>zd  DevOps</li>
<li>zs  Sentinel</li>
<li>ABI??</li>
<li>zh  ETL/Java</li>
<li>zi  Murthy, Mohan, Raju (interdepartmental)</li>
<li>zp  Product Planning Meeting</li>
<li>zm  All Management Meeting</li>
<li>zt  Sr. Mgmt client focused</li>
</ul></dd>
</dl>

<p>
Things to Drop:
</p>
<ul class="org-ul">
<li>zc  (C-Suite Mgmt Meeting)</li>
<li>j   a dated journale entry</li>
<li>j   personal journal of my day</li>
</ul>
<dl class="org-dl">
<dt>z</dt><dd><p>
ZeOmega-related
</p>

<p>
I want to produce an agenda view for meeting with Sam, where I show my
questions, my action items and collect notes on our discussion, and have a
set of links to relevant information sources like Karmic dashboards.
</p>

<p>
zb  (boss)                  represent as a tag, not place
</p></dd>
</dl>


<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-id-link-to-org-use-id
  'create-if-interactive-and-no-custom-id)
</pre>
</div>

<p>
;; Update ID file on startup
(org-id-update-id-locations)
</p>

<p>
org-id-prefix
org-id-method    currently set to uuid of (org, uuid, ts)
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">(require 'org-id)</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(use-package org-id)   NOW BUILT INTO EMACS v27.1</span>

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">org-id-new</span> (<span style="color: #228b22;">&amp;optional</span> prefix)
  (<span style="color: #4169e1;">interactive</span>)
  <span style="color: #bc8f8f;">"Create a new globally unique ID.</span>

<span style="color: #bc8f8f;">An ID consists of two parts separated by a colon:</span>
<span style="color: #bc8f8f;">- a prefix</span>
<span style="color: #bc8f8f;">- a unique part that will be created according to `</span><span style="color: #5f9ea0;">org-id-method</span><span style="color: #bc8f8f;">'.</span>

<span style="color: #bc8f8f;">PREFIX can specify the prefix, the default is given by the variable</span>
<span style="color: #bc8f8f;">`</span><span style="color: #5f9ea0;">org-id-prefix</span><span style="color: #bc8f8f;">'.  However, if PREFIX is the symbol `</span><span style="color: #5f9ea0;">none</span><span style="color: #bc8f8f;">', don't use any</span>
<span style="color: #bc8f8f;">prefix even if `</span><span style="color: #5f9ea0;">org-id-prefix</span><span style="color: #bc8f8f;">' specifies one.</span>

<span style="color: #bc8f8f;">So a typical ID could look like \"Org-4nd91V40HI\"."</span>
  (<span style="color: #4169e1;">let*</span> ((prefix (<span style="color: #4169e1;">if</span> (eq prefix 'none)
                     <span style="color: #bc8f8f;">""</span>
                   (concat (<span style="color: #4169e1;">or</span> prefix org-id-prefix) <span style="color: #bc8f8f;">"-"</span>)))
         unique)
    (<span style="color: #4169e1;">if</span> (equal prefix <span style="color: #bc8f8f;">"-"</span>) (<span style="color: #4169e1;">setq</span> prefix <span style="color: #bc8f8f;">""</span>))
    (<span style="color: #4169e1;">cond</span>
     ((memq org-id-method '(uuidgen uuid))
      (<span style="color: #4169e1;">setq</span> unique (org-trim (shell-command-to-string org-id-uuid-program)))
      (<span style="color: #4169e1;">unless</span> (org-uuidgen-p unique)
        (<span style="color: #4169e1;">setq</span> unique (org-id-uuid))))
     ((eq org-id-method 'org)
      (<span style="color: #4169e1;">let*</span> ((etime (org-reverse-string (org-id-time-to-b36)))
             (postfix (<span style="color: #4169e1;">if</span> org-id-include-domain
                          (<span style="color: #4169e1;">progn</span>
                            (<span style="color: #4169e1;">require</span> '<span style="color: #5f9ea0;">message</span>)
                            (concat <span style="color: #bc8f8f;">"@"</span> (message-make-fqdn))))))
        (<span style="color: #4169e1;">setq</span> unique (concat etime postfix))))
     (t (<span style="color: #ff0000; font-weight: bold;">error</span> <span style="color: #bc8f8f;">"Invalid `</span><span style="color: #5f9ea0;">org-id-method</span><span style="color: #bc8f8f;">'"</span>)))
    (concat prefix unique)))
</pre>
</div>
</div>

<div id="outline-container-org0691457" class="outline-4">
<h4 id="org0691457"><span class="section-number-4">45.1.1.</span> Merge Capture Templates All Together</h4>
<div class="outline-text-4" id="text-45-1-1">
<p>
<a href="http://kdr2.com/tech/emacs/1805-approach-org-ref-code-to-text.html">http://kdr2.com/tech/emacs/1805-approach-org-ref-code-to-text.html</a>
</p>

<p>
NOTE: Prefix with C-u to jump to the target of a capture template.
Prefix with C-0 to insert new item at point.
</p>

<dl class="org-dl">
<dt class="off"><code>[&#xa0;]</code> C-c c B </dt><dd>capture&#x2013;health-bloodpressure-measurements</dd>
<dt class="off"><code>[&#xa0;]</code> C-c c F </dt><dd>capture&#x2013;finance-creditscore-measurements</dd>
<dt class="off"><code>[&#xa0;]</code> C-c c q </dt><dd>capture&#x2013;cool-quote</dd>
</dl>
<p>
;;- [ ]  C-c c z  :: "ZeOmega Capture Templates"
</p>

<p>
Possible Keys from within the Capture Buffer:
</p>

<dl class="org-dl">
<dt>C-c C-c</dt><dd>finalize the capture</dd>
<dt>C-u C-c C-c</dt><dd>finalize the capture and jump to the new item</dd>
<dt>C-c C-w</dt><dd>finalize and refile the note to a different place</dd>
<dt>C-c C-k</dt><dd>abort the capture process</dd>
</dl>


<p>
org-refile-targets
</p>

<dl class="org-dl">
<dt>C-c C-w </dt><dd>org-refile</dd>
<dt>C-u C-c C-w </dt><dd>jump to a heading</dd>
</dl>
</div>

<ol class="org-ol">
<li><a id="orgf7694e9"></a>My Capture Templates and Targets for Org-Mode<br />
<div class="outline-text-5" id="text-45-1-1-1">
<p>
Note that capture templates can be used:
</p>

<ol class="org-ol">
<li>allowed to be placed where the capture declaration shows below</li>
<li>placed using the "refiling" mechanism immediately after entry</li>
<li>left in-place, by preceding a capture invocation keystroke with a C-0</li>
</ol>

<p>
Define the categories of capture keys, on which later declarations will hang
their capture templates.  There are groups and non-grouped templates.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-capture-templates nil)
(<span style="color: #4169e1;">if</span> (not (boundp 'org-capture-templates))
  (<span style="color: #4169e1;">setq</span> org-capture-templates nil)  <span style="color: #b22222;">;;; </span><span style="color: #b22222;">should already be defined!</span>
)




(add-to-list 'org-capture-templates `(<span style="color: #bc8f8f;">"f"</span> <span style="color: #bc8f8f;">"&lt;f&gt;inance"</span>) t)
(add-to-list 'org-capture-templates `(<span style="color: #bc8f8f;">"t"</span> <span style="color: #bc8f8f;">"&lt;t&gt;echnology"</span>) t)
(add-to-list 'org-capture-templates `(<span style="color: #bc8f8f;">"h"</span> <span style="color: #bc8f8f;">"&lt;h&gt;ealth"</span>) t)
(add-to-list 'org-capture-templates `(<span style="color: #bc8f8f;">"p"</span> <span style="color: #bc8f8f;">"&lt;p&gt;ersonal"</span>) t)
(add-to-list 'org-capture-templates `(<span style="color: #bc8f8f;">"z"</span> <span style="color: #bc8f8f;">"&lt;z&gt;eOmega"</span>) t)
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org6a5afe4"></a>Paste a Link into a New Headline for Later Consideration<br />
<div class="outline-text-6" id="text-45-1-1-1-1">
<p>
(defun my/expense-template ()
  (format "Hello world %s" (org-capture-get :account)))
</p>

<p>
(defun my/expense-template ()
  (format "Hello world %s" (plist-get org-capture-plist :account)))
(setq org-capture-templates '(("x" "Test entry 1" plain
                               (file "~/tmp/test.txt")
                               (function my/expense-template)
                               :account "Account:Bank")
                              ("y" "Test entry 2" plain
                               (file "~/tmp/test.txt")
                               (function my/expense-template)
                               :account "Account:AnotherBank")))
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">(format "Hello world %s" (org-capture-get "Template-Link"))</span>
(format <span style="color: #bc8f8f;">"Hello world %s"</span> (cadr (org-babel-lob--src-info <span style="color: #bc8f8f;">"Template-Link"</span>)))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">my/insert-template</span> ()
  (<span style="color: #4169e1;">interactive</span>)
  (<span style="color: #4169e1;">setq</span> body
    (cadr (org-babel-lob--src-info <span style="color: #bc8f8f;">"Template-Link"</span>)))
  (message <span style="color: #bc8f8f;">"body: %s"</span> body)
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(message (org-capture-get :template))</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">(format "Hello world %s" (org-capture-get :template))</span>
  (format <span style="color: #bc8f8f;">"* %s"</span> body)
)
(my/insert-template)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  `(<span style="color: #bc8f8f;">"l"</span> <span style="color: #bc8f8f;">"a URL/Link"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/index.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Index"</span>)
     <span style="color: #b22222;">;;; </span><span style="color: #b22222;">(file "~/.emacs.d/templates/generic-link.org")</span>

     ,(my/insert-template)
     <span style="color: #b22222;">;; </span><span style="color: #b22222;">(function my/insert-template)</span>

     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>

     <span style="color: #00008b;">:template</span> Template-Link
   ) <span style="color: #ff0000; font-weight: bold;">t</span>
)
</pre>
</div>
</div>
</li>

<li><a id="orgb4bd03c"></a>Paste a Note into a New Headline for Later Consideration<br />
<div class="outline-text-6" id="text-45-1-1-1-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zn"</span> <span style="color: #bc8f8f;">"(zeomega) Note (non-TODO)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - ZeOmega"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-note.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"pn"</span> <span style="color: #bc8f8f;">"(personal) Note (non-TODO)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Personal.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Personal"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-note.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"fn"</span> <span style="color: #bc8f8f;">"(finance) Note (non-TODO)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Finance.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Finance"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-note.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"tn"</span> <span style="color: #bc8f8f;">"(technology) Note (non-TODO)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Technology.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Technology"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-note.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"hn"</span> <span style="color: #bc8f8f;">"(health) Note (non-TODO)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Health.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Health"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-note.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org716cbac"></a>Paste an Annotated Link into a New Headline for Later Consideration<br />
<div class="outline-text-6" id="text-45-1-1-1-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"za"</span> <span style="color: #bc8f8f;">"(zeomega) link+notes (annotation)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - ZeOmega"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-annotation.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"pa"</span> <span style="color: #bc8f8f;">"(personal) link+notes (annotation)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Personal.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Personal"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-annotation.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"fa"</span> <span style="color: #bc8f8f;">"(finance) link+notes (annotation)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Finance.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Finance"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-annotation.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"ta"</span> <span style="color: #bc8f8f;">"(Technology) link+notes (annotation)"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Technology.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Technology"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-annotation.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org29c2d64"></a>Create a New Task into a New Headline for Later Consideration<br />
<div class="outline-text-6" id="text-45-1-1-1-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"ft"</span> <span style="color: #bc8f8f;">"(finance) Task"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Finance.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Finance"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-task.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zt"</span> <span style="color: #bc8f8f;">"(zeomega) Task"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - ZeOmega"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-task.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"pt"</span> <span style="color: #bc8f8f;">"(personal) Task"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Personal.org"</span> <span style="color: #bc8f8f;">"Unclassified Entries - Personal"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/generic-task.org"</span>)
     <span style="color: #00008b;">:prepend</span> nil          <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest entry at the bottom of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines-before</span> 0 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before</span>
     <span style="color: #00008b;">:empty-lines-after</span>  1 <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org5f4214c"></a>Create a New Blog Post into a New Headline for Later Consideration<br />
<div class="outline-text-6" id="text-45-1-1-1-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"b"</span> <span style="color: #bc8f8f;">"a Blog Post"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Blog/content.org"</span> <span style="color: #bc8f8f;">"My Blog Posts"</span>)
     (file <span style="color: #bc8f8f;">"~/Dropbox/Documents/Blog/blog-entry-template.org"</span>)
     <span style="color: #00008b;">:prepend</span> t         <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t     <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1     <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="orgbfcd12e"></a>Capture a Periodic Blood Pressure Measurement<br />
<div class="outline-text-6" id="text-45-1-1-1-6">
<p>
As part of self-measurement, I periodically take my blood pressure and keep it
in a table to identify long-term trends.
</p>

<p>
This capture template is a <code>table-line</code> or a new line in a table at a specific
place.  It uses the following replaceable parameters.
</p>

<dl class="org-dl">
<dt>%u          </dt><dd>inactive date/time stamp</dd>
<dt>%<sup>High</sup>    </dt><dd>prompt "High" and insert a value for high pressure</dd>
<dt>%<sup>Low</sup>     </dt><dd>prompt "Low" and insert a value for low pressure</dd>
<dt>%<sup>Pulse</sup>   </dt><dd>prompt "Pulse" and insert a value for pulse rate</dd>
<dt>%<sup>Comment</sup> </dt><dd>prompt "Comment" and insert a value for comment, if any</dd>
</dl>

<p>
org-babel-load-file() doesn't seem to respect the <code>:tangle no</code> srcblock header option
  uses: <code>org-babel-tangle()</code> to extract elisp and then load using <code>load-file</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"hB"</span>
     <span style="color: #bc8f8f;">"(health) Bloodpressure measurement"</span> table-line
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Health.org"</span> <span style="color: #bc8f8f;">"Jeff's Blood Pressure History"</span>)
     <span style="color: #bc8f8f;">"| %u | %^{High} | %^{Low} | %^{Pulse} | %^{Comment} |"</span>
     <span style="color: #00008b;">:prepend</span> t         <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest measurements at the top of the table</span>
     <span style="color: #00008b;">:unnarrowed</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't narrow to just the new entry; I want to see my history</span>
     <span style="color: #00008b;">:kill-buffer</span> t     <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="orgb9b1569"></a>Capture a FICO Credit Score Monthly Update<br />
<div class="outline-text-6" id="text-45-1-1-1-7">
<p>
Each month my bank sends me my current FICO credit score, which I collect in a
table to identify long-term trends.
</p>

<p>
This capture template is a <code>table-line</code> or a new line in a table at a specific
place.  It uses the following replaceable parameters.
</p>

<dl class="org-dl">
<dt>%<sup>Date</sup>u </dt><dd>prompt "Date" and insert a value for Report Date</dd>
<dt>%<sup>Score</sup> </dt><dd>prompt "Score" and insert a value for FICO score</dd>
</dl>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"fF"</span>
     <span style="color: #bc8f8f;">"(finance) FICO Monthly Score"</span> table-line
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/Finance.org"</span> <span style="color: #bc8f8f;">"Jeff's FICO Credit Score History"</span>)
     <span style="color: #bc8f8f;">"| %^{Date}u | %^{Score} | | |"</span>
     <span style="color: #00008b;">:prepend</span> t         <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest measurements at the top of the table</span>
     <span style="color: #00008b;">:unnarrowed</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">don't narrow to just the new entry; I want to see my history</span>
     <span style="color: #00008b;">:kill-buffer</span> t     <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="orgf80f1e1"></a>Capture a Catchy Quote<br />
<div class="outline-text-6" id="text-45-1-1-1-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"q"</span> <span style="color: #bc8f8f;">"a Catchy Quote"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/quotes.org"</span> <span style="color: #bc8f8f;">"Quotes and Sayings (should be spread about, not centralized)"</span>)
     (file <span style="color: #bc8f8f;">"~/Dropbox/Documents/Blog/generic-quote.org"</span>)
     <span style="color: #00008b;">:prepend</span> t         <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t     <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1     <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org9dba6c4"></a>Capture a Meeting<br />
<div class="outline-text-6" id="text-45-1-1-1-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zM"</span> <span style="color: #bc8f8f;">"ZeOmega Meeting"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Meetings"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/zeomega-meeting.org"</span>)
     <span style="color: #00008b;">:prepend</span> t         <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t     <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1     <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
     <span style="color: #00008b;">:clock-in</span> t        <span style="color: #b22222;">;; </span><span style="color: #b22222;">begin tracking the time to fill in this entry</span>
     <span style="color: #00008b;">:clock-resume</span> t    <span style="color: #b22222;">;; </span><span style="color: #b22222;">and end tracking upon returning to what I was doing</span>
     <span style="color: #00008b;">:clock-keep</span> nil    <span style="color: #b22222;">;; </span><span style="color: #b22222;">be sure the clock does not keep running after I return</span>
     <span style="color: #00008b;">:unnarrowed</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">do not narrow the target buffer</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="orge060e19"></a>Capture a Specific 1:1 Meeting w/Doug<br />
<div class="outline-text-6" id="text-45-1-1-1-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zmd"</span> <span style="color: #bc8f8f;">"1:1 Meeting with Doug"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Meetings: 1:1 w/Doug"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/zeomega-meeting.org"</span>)
     <span style="color: #00008b;">:prepend</span> t       <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t   <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1   <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
     <span style="color: #00008b;">:clock-in</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">begin tracking the time to fill in this entry</span>
     <span style="color: #00008b;">:clock-resume</span> t  <span style="color: #b22222;">;; </span><span style="color: #b22222;">and end tracking upon returning to what I was doing</span>
     <span style="color: #00008b;">:unnarrowed</span> t    <span style="color: #b22222;">;; </span><span style="color: #b22222;">do not narrow the target buffer</span>
     <span style="color: #00008b;">:clock-keep</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">be sure the clock does not keep running after I return</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org9f2151f"></a>Capture a Specific 1:1 Meeting w/Harshad<br />
<div class="outline-text-6" id="text-45-1-1-1-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zmh"</span> <span style="color: #bc8f8f;">"1:1 Meeting with Harshad"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Meetings: 1:1 w/Harshad"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/zeomega-meeting.org"</span>)
     <span style="color: #00008b;">:prepend</span> t       <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t   <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1   <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
     <span style="color: #00008b;">:clock-in</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">begin tracking the time to fill in this entry</span>
     <span style="color: #00008b;">:clock-resume</span> t  <span style="color: #b22222;">;; </span><span style="color: #b22222;">and end tracking upon returning to what I was doing</span>
     <span style="color: #00008b;">:unnarrowed</span> t    <span style="color: #b22222;">;; </span><span style="color: #b22222;">do not narrow the target buffer</span>
     <span style="color: #00008b;">:clock-keep</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">be sure the clock does not keep running after I return</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="orgad12ca2"></a>Capture a Specific 1:1 Meeting w/Eddie<br />
<div class="outline-text-6" id="text-45-1-1-1-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zme"</span> <span style="color: #bc8f8f;">"1:1 Meeting with Eddie"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Meetings: 1:1 w/Eddie"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/zeomega-meeting.org"</span>)
     <span style="color: #00008b;">:prepend</span> t       <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t   <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1   <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
     <span style="color: #00008b;">:clock-in</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">begin tracking the time to fill in this entry</span>
     <span style="color: #00008b;">:clock-resume</span> t  <span style="color: #b22222;">;; </span><span style="color: #b22222;">and end tracking upon returning to what I was doing</span>
     <span style="color: #00008b;">:unnarrowed</span> t    <span style="color: #b22222;">;; </span><span style="color: #b22222;">do not narrow the target buffer</span>
     <span style="color: #00008b;">:clock-keep</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">be sure the clock does not keep running after I return</span>
   )
)
</pre>
</div>
</div>
</li>

<li><a id="org291c19c"></a>Capture a Specific 1:1 Meeting w/Pavan<br />
<div class="outline-text-6" id="text-45-1-1-1-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-capture-templates
  '(<span style="color: #bc8f8f;">"zmp"</span> <span style="color: #bc8f8f;">"1:1 Meeting with Pavan"</span> entry
     (file+headline <span style="color: #bc8f8f;">"~/Dropbox/Documents/ZeOmega.org"</span> <span style="color: #bc8f8f;">"Meetings: 1:1 w/Pavan"</span>)
     (file <span style="color: #bc8f8f;">"~/.emacs.d/templates/zeomega-meeting.org"</span>)
     <span style="color: #00008b;">:prepend</span> t       <span style="color: #b22222;">;; </span><span style="color: #b22222;">put newest quote at the top of the section</span>
     <span style="color: #00008b;">:kill-buffer</span> t   <span style="color: #b22222;">;; </span><span style="color: #b22222;">if file was opened just to collect data, close the buffer after</span>
     <span style="color: #00008b;">:empty-lines</span> 1   <span style="color: #b22222;">;; </span><span style="color: #b22222;">enforce count of blank lines before and after</span>
     <span style="color: #00008b;">:clock-in</span> t      <span style="color: #b22222;">;; </span><span style="color: #b22222;">begin tracking the time to fill in this entry</span>
     <span style="color: #00008b;">:clock-resume</span> t  <span style="color: #b22222;">;; </span><span style="color: #b22222;">and end tracking upon returning to what I was doing</span>
     <span style="color: #00008b;">:unnarrowed</span> t    <span style="color: #b22222;">;; </span><span style="color: #b22222;">do not narrow the target buffer</span>
     <span style="color: #00008b;">:clock-keep</span> nil  <span style="color: #b22222;">;; </span><span style="color: #b22222;">be sure the clock does not keep running after I return</span>
   )
)
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="orgd017abb"></a>OLD WAY<br />
<div class="outline-text-7" id="text-45-1-1-1-13-1">
<div class="org-src-container">
<pre class="src src-emacs-lispXXX">(setq org-capture-templates
     ("z"
        "ZeOmega Capture Templates"
     )
     ("zm"
        "Specific Meetings"
     )
   )
)
</pre>
</div>

<p>
;; %a  the place in Emacs I was when I initiated the capture command
</p>

<p>
;; %i  initial content (what is selected)
;; %U  inactive date/time stamp
;; %^G prompt for tags to assign
;; %?  where to place the cursor after laying out the template
</p>

<p>
;;;; ZEOMEGA AND MYSELF
;;;; unordered actions (people to reach out to, a sudden phone call, a TODO to be classified)
;;  e   an event to attend, ordered by date (I HAVE A SECTION ALREADY FOR THIS)
;;      (may be refiled into a relevant project like C18)
</p>

<p>
;;;; producing ideas for writing, presentations FOR MYSELF
;;;; producing ideas for writing, presentations FOR ZEOMEGA
</p>

<p>
;;;; consuming ideas for consumption  music idea
;; music to listen to, places to eat, books to read, movies to watch, places to visit
</p>

<p>
;;;;  - Collected Quote (for ZeOmega or personal)
</p>

<p>
;;       ("zb" "Touchbase w/Boss Sam (Weekly on Tue)" entry
;;         (file+headline "~/Clients/ZeOmega/notes/zeomega.org" "Minutes - Meetings w/Sam")
;;         (file "~/Clients/ZeOmega/notes/templates/minutes-sam.org")
;;         :prepend t
;;         :unnarrowed t
;;         :clock-in t            ;; begin tracking the time to fill in this entry
;;         :clock-resume t        ;; and end tracking upon returning to what I was doing
;;         :clock-keep nil        ;; be sure the clock does not keep running after I return
;;         :empty-lines 1         ;; count of blank lines before and after
;;       )
;;       ("zc" "C-Suite Management Meeting (Monthly on 3rd Wed)" entry
;;         (file+headline "~/Clients/ZeOmega/notes/zeomega.org" "Minutes - Meetings w/C-Suite Team")
;;         (file "~/Clients/ZeOmega/notes/templates/minutes-csuite.org")
;;         :prepend t
;;         :unnarrowed t
;;         :clock-in t            ;; begin tracking the time to fill in this entry
;;         :clock-resume t        ;; and end tracking upon returning to what I was doing
;;         :clock-keep nil        ;; be sure the clock does not keep running after I return
;;         :empty-lines 1         ;; count of blank lines before and after
;;       )
;;;;;       ("zd" "DevOps Status Meeting (Weekly on Tue)" entry
;;;;;         (file+headline "~/Dropbox/Documents/ZeOmega.org" "Meetings w/DevOps Team")
;;;;;         (file "~/Dropbox/Documents/TEMPLATES/minutes-devops.org")
;;;;;         :prepend t
;;;;;         :unnarrowed t
;;;;;         :empty-lines 1         ;; count of blank lines before and after
;;;;;       )
</p>

<p>
;;;;;       ("zs" "Sentinel Status Meeting (Weekly on Tue)" entry
;;;;;         (file+headline "~/Dropbox/Documents/ZeOmega.org" "Meetings w/Sentinel-Core Team")
;;;;;         (file "~/Dropbox/Documents/TEMPLATES/minutes-sentinelcore.org")
;;;;;         :prepend t
;;;;;         :unnarrowed t
;;;;;         :empty-lines 1         ;; count of blank lines before and after
;;;;;       )
</p>

<p>
;;;;;       ("zi" "Interdepartmental Meeting re Murthy, Raju, Mohan, etc. (Weekly on Thu)" entry
;;;;;         (file+headline "~/Clients/ZeOmega/notes/zeomega.org" "Minutes - Meetings w/Department Heads")
;;;;;         (file "~/Clients/ZeOmega/notes/templates/minutes-interdepartmental.org")
;;;;;         :prepend t
;;;;;         :unnarrowed t
;;;;;         :clock-in t            ;; begin tracking the time to fill in this entry
;;;;;         :clock-resume t        ;; and end tracking upon returning to what I was doing
;;;;;         :clock-keep nil        ;; be sure the clock does not keep running after I return
;;;;;         :empty-lines 1         ;; count of blank lines before and after
;;;;;       )
</p>

<p>
;;       ("zk" "PMG Key Stakeholders Meeting (Monthly on 2nd Wed)" entry
;;         (file+headline "~/Clients/ZeOmega/notes/zeomega.org" "Minutes - Meetings w/PMG Stakeholders")
;;         (file "~/Clients/ZeOmega/notes/templates/minutes-stakeholders.org")
;;         :prepend t
;;         :unnarrowed t
;;         :clock-in t            ;; begin tracking the time to fill in this entry
;;         :clock-resume t        ;; and end tracking upon returning to what I was doing
;;         :clock-keep nil        ;; be sure the clock does not keep running after I return
;;         :empty-lines 1         ;; count of blank lines before and after
;;       )
</p>

<p>
;;;;;       ("j" "a dated [J]ournal entry" entry
;;;;;         (file+datetree "~/notes/journal.org")
;;;;;         "* %?\n\n%i"
;;;;;         :clock-in t            ;; begin tracking the time to fill in this entry
;;;;;         :clock-resume t        ;; and end tracking upon returning to what I was doing
;;;;;         :clock-keep nil        ;; be sure the clock does not keep running after I return
;;;;;         :empty-lines 1         ;; count of blank lines before and after
;;;;;       )
</p>

<p>
;;       ("j" "Journal" entry
;;         (file+headline "~/dump/journal.org" "")
;;         "\n %<sup>topic</sup> %T \n%i%?\n"
;;         :prepend t
;;       )
</p>

<p>
;;;(setq org-capture-templates
;;;  '(
;;;     ("j" "a personal [J]ournal entry about my day" entry
;;;       (file+datetree "~/notes/journal.org")
;;;       "* %?\nEntered on %U\n  %i\n  %a"
;;;       :clock-in t         ;; begin tracking the time to fill in this entry
;;;       :clock-resume t             ;; and end tracking upon returning to what I was doing
;;;     )
;;;     ("w" "org-protocol" entry
;;;       (file+headlline "~/notes/resources.org" "Websites to Check Out")
;;;       "* %<sup>Title</sup>  :REFILE:\n\n  Link: %u, %c\n  Captured: %U\n  %i"
;;;       :immediate-finish t ;; skip edit phase - just collect automatic info and return
;;;       :clock-in t         ;; begin tracking the time to fill in this entry
;;;       :clock-resume t             ;; and end tracking upon returning to what I was doing
;;;     )
;;;   )
;;;)
</p>
</div>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orgfd7d1a6" class="outline-2">
<h2 id="orgfd7d1a6"><span class="section-number-2">46.</span> org-protocol</h2>
<div class="outline-text-2" id="text-46">
<p>
Intercepts calls from emacsclient to trigger custom actions without external
dependencies.  Only one protocol has to be configured with your external
applications or the operating system, to trigger an arbitrary number of custom
actions.  Just register your custom sub-protocol and handler with the variable
`org-protocol-protocol-alist'.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;  </span><span style="color: #b22222;">(require 'org-protocol)</span>
<span style="color: #b22222;">;;  </span><span style="color: #b22222;">(use-package org-protocol)   NOW PART OF EMACS v27</span>
</pre>
</div>
</div>

<div id="outline-container-orge1417a0" class="outline-3">
<h3 id="orge1417a0"><span class="section-number-3">46.1.</span> <b>pushing</b> URL/title links from Firefox into the Emacs kill-buffer</h3>
<div class="outline-text-3" id="text-46-1">
<p>
The actual command that pushes a link into Emacs is:
</p>

<p>
$ /usr/bin/emacsclient org-protocol:/store-link:/URL/TITLE
</p>

<p>
and we want to provide a button in Firefox that causes it to issue this
command.  We do this by defining a 'bookmarklet', which is a Firefox bookmark
with the location field containing a bit of JavaScript instead of a URL.
</p>

<p>
Name: PushLink
Location: (as one long line)
  javascript:location.href='org-protocol://store-link://'+
	encodeURIComponent(location.href)+'<i>'+
	encodeURIComponent(document.title)+'</i>'+
	encodeURIComponent(window.getSelection())
</p>

<p>
We also have to teach Firefox which program to run to handle the URL protocol
of 'org-protocol', which in my case is <code>/usr/bin/emacsclient</code>.
</p>

<p>
A protocol is a method that is used to send, receive, and handle information
over a connection.  Common protocols viewed from the browser include http,
https, ftp, and mailto.  In order for you to view information sent over a
specific protocol, it must be registered.  If you enter a URL for an unknown
protocol (foo) in the Location Bar, you will receive a message such as,
Firefox doesn't know how to open this address, because the protocol (foo)
isn't associated with any program or, in Mozilla Suite/SeaMonkey, foo not a
registered protocol.
</p>

<p>
Once registered, the protocol can then be handled by the program you specify,
such as your browser or a third party viewer.  This means that a hyperlink (
e.g. foo://fred) can use the handler for protocol foo to open the file named
fred.
</p>

<p>
Type about:config into the Location Bar (address bar) and press Enter.
Right-click -&gt; New -&gt; Boolean -&gt; Name: network.protocol-handler.expose.foo -&gt; Value -&gt; false (Replace foo with the protocol you're specifying)
Next time you click a link of protocol-type foo you will be asked which application to open it with.
</p>

<p>
In the firefox address box type this simple but weird-looking URL about:config
and open it.  Then right-click on any entry in the long list that comes up.
Right-clicking brings up the menu we will use to create a new entry.  Select
new and of type boolean.  Carefully type in the name of the new preference as
</p>

<p>
network.protocol-handler.expose.mms
</p>

<p>
and then select for its value false.  We are finished with this window, so you
can close it.
</p>


<p>
network.protocol-handler.external.mms   boolean  true
</p>


<p>
Apparently they changed the way this works. You need to add a
org-protocol.desktop file to ~/.local/share/applications
</p>

<p>
[Desktop Entry]
Name=org-protocol
Exec=emacsclient %u
Type=Application
Terminal=false
Categories=System;
MimeType=x-scheme-handler/org-protocol;
</p>

<p>
Then run:
</p>

<p>
$ update-desktop-database .local/share/applications/
</p>

<p>
For some reason I cannot get the bookmarklets to work, however. But
opening an org-protocol:/ URL directly works.
</p>


<p>
network.protocol-handler.app.org-protocol string /usr/bin/emacsclient
</p>


<p>
For some reason, it is needed create a mime type on ~/.local/share/applications/mimeapps.list
</p>

<p>
So I add:
application/x-tivion=tivion.desktop;
application/tivion=tivion.desktop;
x-scheme-handler/tivion=tivion.desktop;
</p>



<p>
I never had the window asking for which application to launch when clicking on
a `org-protocol://' link&#x2026;
</p>

<p>
until I re-did the manipulation with:
</p>

<p>
&#x2013;8&lt;----------&#x2013;&#x2014;cut here----------&#x2013;&#x2014;start--------&#x2013;&#x2014;&gt;8&#x2014;
gconftool-2 -s /desktop/gnome/url-handlers/org-protocol/command '/usr/bin/emacsclient %s'
&#x2013;type String
gconftool-2 -s /desktop/gnome/url-handlers/org-protocol/enabled &#x2013;type Boolean true
&#x2013;8&lt;----------&#x2013;&#x2014;cut here----------&#x2013;&#x2014;end----------&#x2013;&#x2014;&gt;8&#x2014;
</p>

<p>
(described on <a href="http://kb.mozillazine.org/Register_protocol#All_Firefox_versions_.28requires_certain_Gnome_libraries_to_be_installed.29">http://kb.mozillazine.org/Register_protocol#All_Firefox_versions_.28requires_certain_Gnome_libraries_to_be_installed.29</a>)
</p>

<p>
"Next time you click a link of protocol-type foo you will be asked which
application to open it with." : for me, after the above step (`gconftool-2'),
just entering `org-protocol://' in a new tab was sufficient to ask, this time,
for which application to run. Finally&#x2026;
</p>

<p>
Not that intuitive&#x2026;
</p>

<p>
(Linux and Mac) If the path or name is incorrect when setting the
network.protocol-handler.app.(protocol) preference , Firefox will display an
error saying "protocol (foo) isn't associated with any program". (bug 312953)
</p>


<p>
And here's what some snippets of a 'foobar' scheme registration looks like stored in Firefox's mimeTypes.rdf file:
</p>

<p>
&lt;RDF:li RDF:resource="urn:scheme:foobar"/&gt;
&lt;RDF:Description RDF:about="urn:handler:web:<a href="http://www.lookout.net/foobar=%s">http://www.lookout.net/foobar=%s</a>"
                 NC:prettyName="The foobar scheme"
                 NC:uriTemplate="<a href="http://www.lookout.net/foobar=%s">http://www.lookout.net/foobar=%s</a>" /&gt;
&lt;RDF:Description RDF:about="urn:scheme:foobar"
                 NC:value="foobar"&gt;
&lt;NC:handlerProp RDF:resource="urn:scheme:handler:foobar"/&gt;
&lt;RDF:Description RDF:about="urn:scheme:handler:foobar"
                 NC:alwaysAsk="true"&gt;
&lt;NC:possibleApplication RDF:resource="urn:handler:web:<a href="http://www.lookout.net/foobar=%s%22/">http://www.lookout.net/foobar=%s%22/</a>&gt;
</p>
</div>
</div>

<div id="outline-container-orgd8de8a1" class="outline-3">
<h3 id="orgd8de8a1"><span class="section-number-3">46.2.</span> org-protocol (intercept calls from emacsclient to trigger custom actions)</h3>
<div class="outline-text-3" id="text-46-2">
<p>
gconftool-2 -s /desktop/gnome/url-handlers/org-protocol/command '/usr/local/bin/emacsclient %s' &#x2013;type String
gconftool-2 -s /desktop/gnome/url-handlers/org-protocol/enabled &#x2013;type Boolean true
</p>

<p>
Make a bookmarklet button for:
</p>

<p>
javascript:location.href='org-protocol://sub-protocol://'+
      encodeURIComponent(location.href)+'<i>'+
      encodeURIComponent(document.title)+'</i>'+
      encodeURIComponent(window.getSelection())
</p>

<p>
store-link uses only the URL and page title
</p>

<div class="org-src-container">
<pre class="src src-sh">$ emacsclient org-protocol:/store-link:/URL/TITLE
</pre>
</div>

<p>
Pushes the given URL/title onto the kill-ring for yanking (C-y).
</p>

<p>
org-protocol-store-link (links and bookmarks)
</p>

<p>
org-protocol-capture (note taking and citations)
</p>

<p>
emacsclient org-protocol:/capture:/URL/TITLE/BODY
</p>

<p>
will pop up an <b>Capture</b> buffer and fill the template with the data submitted.
</p>

<p>
javascript:location.href='org-protocol://capture://'+
      encodeURIComponent(location.href)+'<i>'+
      encodeURIComponent(document.title)+'</i>'+
      encodeURIComponent(window.getSelection())
</p>

<p>
Controlling <span class="underline">which</span> capture template will be used:
</p>

<p>
You don't need to set up a capture template to use org-protocol-capture, since
Org-mode provides a default template for those cases.  Newer versions provide
an interactive interface for choosing a template.  You may provide a template
to be used by customizing the variable org-capture-default-template.  The
problem with this solution would be, that only one template can be used with
the function.
</p>

<p>
Luckily, org-protocol-capture understands a slightly extended syntax to choose
between several templates: If the first field of the data submitted is exactly
one character in length, this character will be used to select the template.
</p>

<p>
$ emacsclient org-protocol:/capture:/x/URL/TITLE/BODY
</p>

<p>
javascript:location.href='org-protocol://capture://x/'+
      encodeURIComponent(location.href)+'<i>'+
      encodeURIComponent(document.title)+'</i>'+
      encodeURIComponent(window.getSelection())
</p>

<p>
Edit published content: org-protocol-open-source
</p>

<p>
This one was designed to help with opening sources for editing when browsing
in the first place. org-protocol-open-source uses the custom variable
org-protocol-project-alist to map URLs to (local) filenames.
</p>

<p>
These bookmarklets enable your Firefox to talk to emacsclient via a new
protocol (org-protocol://); emacsclient then parses the request and tells
Emacs to capture or store stuff at the relevant places in your Org files.
</p>
</div>
</div>
</div>


<div id="outline-container-org0edbe71" class="outline-2">
<h2 id="org0edbe71"><span class="section-number-2">47.</span> Package End</h2>
<div class="outline-text-2" id="text-47">
<p>
#+END_SRC
</p>

<p>
– org-capture-templates
– org-default-notes-file / org-note-&#x2026;
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 47: </span>~/.emacs.d/52-org-refile-archive.org</label><pre class="src src-emacs-lisp"><span class="linenr"> 1: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">ERROR: Cannot read file "52-org-refile-archive.org"#+END_SRC</span>
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span>&#8211; org-refile-targets
<span class="linenr"> 4: </span>&#8211; org-archive-location
<span class="linenr"> 5: </span>
<span class="linenr"> 6: </span>### - [ ] INCLUDE: <span style="color: #bc8f8f;">"config/config-note-refiling-using-org-mode.org"</span>
<span class="linenr"> 7: </span>### - [ ] INCLUDE: <span style="color: #bc8f8f;">"config/config-note-archiving-using-org-mode.org"</span>
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>#+CAPTION: ~/.emacs.d/53-org-links-export.org
<span class="linenr">10: </span>#+BEGIN_SRC emacs-lisp -n <span style="color: #00008b;">:tangle</span> yes
<span class="linenr">11: </span>#+TITLE: 53-org-links-export
<span class="linenr">12: </span>#+DESCRIPTION: Links, downloads &amp; export settings
<span class="linenr">13: </span>#+STARTUP: overview
<span class="linenr">14: </span>
<span class="linenr">15: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">16: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">53-org-links-export.el --- Org Links, downloads &amp; export settings -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org36d7936" class="outline-2">
<h2 id="org36d7936"><span class="section-number-2">48.</span> Declare Which App Should Handle Links to Certain File Types</h2>
<div class="outline-text-2" id="text-48">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Configure how Org opens various file types</span>
(<span style="color: #4169e1;">setq</span> org-file-apps
  '((<span style="color: #bc8f8f;">"\\.pdf\\'"</span> . <span style="color: #bc8f8f;">"evince %s"</span>)
    (<span style="color: #bc8f8f;">"\\.doc\\'"</span> . <span style="color: #bc8f8f;">"libreoffice %s"</span>)
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">fall back to default for anything else:</span>
    (<span style="color: #bc8f8f;">"\\.</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">(?:</span><span style="color: #bc8f8f;">xls</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">|</span><span style="color: #bc8f8f;">xlsx</span><span style="color: #bc8f8f; font-weight: bold;">\\</span><span style="color: #bc8f8f; font-weight: bold;">)</span><span style="color: #bc8f8f;">\\'"</span> . default)
    (auto-mode . emacs)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">;; If you really need to tweak per-buffer, you can still use a hook:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
<span style="color: #b22222;">;;           </span><span style="color: #b22222;">(lambda ()</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">;; override just DOC for this buffer:</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">(delete '("\\.doc\\'" . default) org-file-apps)</span>
<span style="color: #b22222;">;;             </span><span style="color: #b22222;">(add-to-list 'org-file-apps</span>
<span style="color: #b22222;">;;                          </span><span style="color: #b22222;">'("\\.doc\\'" . "libreoffice %s"))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5cfdb06" class="outline-2">
<h2 id="org5cfdb06"><span class="section-number-2">49.</span> Control How Drag-and-Drop works to Download into an Org Document and Create a Link to That Content</h2>
<div class="outline-text-2" id="text-49">
<p>
Meanwhile, 53-org-links-export.org is the right home for the extra
helper package org-download (and any org-file-apps tweaks), since it
lives “on top” of the core attach/link system and only concerns
exporting or inserting external files.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> org-download
  <span style="color: #00008b;">:after</span> org
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">enable drag-and-drop or C-c C-l insert for screenshots</span>
  <span style="color: #00008b;">:hook</span> ((dired-mode . org-download-enable))
  <span style="color: #00008b;">:custom</span>
    <span style="color: #b22222;">;; </span><span style="color: #b22222;">per-buffer &#8216;</span><span style="color: #5f9ea0;">images/</span><span style="color: #b22222;">&#8217; subdirectory</span>
    (org-download-image-dir (<span style="color: #4169e1;">lambda</span> ()
                             (concat (file-name-directory (<span style="color: #4169e1;">or</span> buffer-file-name default-directory)) <span style="color: #bc8f8f;">"images/"</span>))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5dfa8b4" class="outline-2">
<h2 id="org5dfa8b4"><span class="section-number-2">50.</span> Exporting</h2>
<div class="outline-text-2" id="text-50">
</div>
<div id="outline-container-orgb8ef16a" class="outline-3">
<h3 id="orgb8ef16a"><span class="section-number-3">50.1.</span> Exporting to HTML</h3>
<div class="outline-text-3" id="text-50-1">
<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">(setq org-html-validation-link nil
      org-html-head-include-scripts nil)
</pre>
</div>
</div>
</div>
</div>




<div id="outline-container-org9da91ea" class="outline-2">
<h2 id="org9da91ea"><span class="section-number-2">51.</span> My Link Abbreviations</h2>
<div class="outline-text-2" id="text-51">
<p>
Link abbreviations can be used like this:
</p>

<pre class="example">
[[linkword:tag][description]]
</pre>


<p>
The below elisp structure defines the linkword and the URL it represents.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-link-abbrev-alist
  '(
     (<span style="color: #bc8f8f;">"google"</span>    . <span style="color: #bc8f8f;">"http://www.google.com/search?q="</span>)
     (<span style="color: #bc8f8f;">"gmap"</span>      . <span style="color: #bc8f8f;">"http://maps.google.com/maps?q=%s"</span>)
     (<span style="color: #bc8f8f;">"omap"</span>      . <span style="color: #bc8f8f;">"http://nominatim.openstreetmap.org/search?q=%s&amp;polygon=1"</span>)
     (<span style="color: #bc8f8f;">"wikipedia"</span> . <span style="color: #bc8f8f;">"https://en.wikipedia.org/wiki/"</span>)

     <span style="color: #b22222;">;;; </span><span style="color: #b22222;">Links to Types of Karmic Tickets at ZeOmega</span>

     (<span style="color: #bc8f8f;">"karmic"</span>    . <span style="color: #bc8f8f;">"https://karmic.zeomega.com/browse/%s"</span>)
     (<span style="color: #bc8f8f;">"story"</span>     . <span style="color: #bc8f8f;">"https://karmic.zeomega.com/browse/%s"</span>)
     (<span style="color: #bc8f8f;">"task"</span>      . <span style="color: #bc8f8f;">"https://karmic.zeomega.com/browse/%s"</span>)
     (<span style="color: #bc8f8f;">"subtask"</span>   . <span style="color: #bc8f8f;">"https://karmic.zeomega.com/browse/%s"</span>)
     (<span style="color: #bc8f8f;">"epic"</span>      . <span style="color: #bc8f8f;">"https://karmic.zeomega.com/browse/%s"</span>)

     (<span style="color: #bc8f8f;">"zeconnect"</span> . <span style="color: #bc8f8f;">"https://zeconnect.zeomega.com/display/%u"</span>)

     (<span style="color: #bc8f8f;">"github"</span>    . <span style="color: #bc8f8f;">"https://github.com/zeomega/%u"</span>)
     (<span style="color: #bc8f8f;">"zegit"</span>     . <span style="color: #bc8f8f;">"https://git.zeomega.com/zeomega/%u"</span>)
   )
)
</pre>
</div>

<p>
Document-specific link abbreviations can also be given using the following:
</p>
</div>
</div>

<div id="outline-container-org007a762" class="outline-2">
<h2 id="org007a762"><span class="section-number-2">52.</span> Define a New Type of Link that Greps Files</h2>
<div class="outline-text-2" id="text-52">
<p>
[[grep:some-regexp][description]\]
</p>

<p>
Show matches across all files in the current directory.
</p>

<p>
NEED: Show matches only in THIS file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"agenda"</span>
    (<span style="color: #4169e1;">lambda</span> (keyseq)
     <span style="color: #bc8f8f;">"Display a list of TODO headlines with tag TAG.</span>
<span style="color: #bc8f8f;">      With prefix argument, also display headlines without a TODO keyword."</span>
      (org-agenda nil keyseq)
    )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"grep"</span>
    (<span style="color: #4169e1;">lambda</span> (regexp)
     <span style="color: #bc8f8f;">"Run `</span><span style="color: #5f9ea0;">rgrep</span><span style="color: #bc8f8f;">' with REGEXP as argument."</span>
     (grep-compute-defaults)
     (rgrep regexp <span style="color: #bc8f8f;">"*"</span> (expand-file-name <span style="color: #bc8f8f;">"./"</span>))
    )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgabaf48c" class="outline-2">
<h2 id="orgabaf48c"><span class="section-number-2">53.</span> Define a New Type of Link that Searches Tag Match Expressions</h2>
<div class="outline-text-2" id="text-53">
<pre class="example">
[[tag:work+phonenumber-boss][description]]
</pre>


<p>
Show headlines for all agenda files.
</p>

<p>
NEED: Show matching headlines in THIS file.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"tags"</span>
    (<span style="color: #4169e1;">lambda</span> (tag)
     <span style="color: #bc8f8f;">"Display a list of TODO headlines with tag TAG, regardless of TODO or non-TODO."</span>
      (org-tags-view (null 1) tag)
    )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"todos"</span>
    (<span style="color: #4169e1;">lambda</span> (tag)
      <span style="color: #bc8f8f;">"Display a list of TODO headlines with tag TAG."</span>
      (<span style="color: #4169e1;">let</span>
        (
          <span style="color: #b22222;">;; </span><span style="color: #b22222;">(org-agenda-sorting-strategy '(tsia-down))</span>
        )
        (org-tags-view (null nil) tag)
      )
    )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"tags-in-file"</span>
    (<span style="color: #4169e1;">lambda</span> (tag)
     <span style="color: #bc8f8f;">"Display a list of TODO headlines in the current file with tag TAG, regardless of TODO or non-TODO."</span>
      (<span style="color: #4169e1;">let</span>
        (
          (org-agenda-files (list (buffer-file-name) ))
          (org-agenda-remove-tags t)
        )
        (org-tags-view (null 1) tag)
      )
    )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"todos-in-file"</span>
    (<span style="color: #4169e1;">lambda</span> (tag)
     <span style="color: #bc8f8f;">"Display a list of TODO headlines with tag TAG."</span>
      (<span style="color: #4169e1;">let</span>
        (
          (org-agenda-files (list (buffer-file-name) ))
          (org-agenda-remove-tags t)
        )
        (org-tags-view (null nil) tag)
      )
    )
)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-add-link-type
  <span style="color: #bc8f8f;">"meetings"</span>
    (<span style="color: #4169e1;">lambda</span> (tag)
      <span style="color: #bc8f8f;">"Display a list of TODO headlines with tag TAG."</span>
      (<span style="color: #4169e1;">let</span>
        (
          (org-agenda-sorting-strategy '(tsia-down))
        )
        (org-tags-view (null nil) tag)
      )
    )
)
</pre>
</div>
</div>

<div id="outline-container-orgb1e95a1" class="outline-3">
<h3 id="orgb1e95a1"><span class="section-number-3">53.1.</span> MISC TO CONSIDER</h3>
<div class="outline-text-3" id="text-53-1">
<p>
(setq org-agenda-custom-commands
      '(("b" "Buffer summary"
     ((todo "TODO" ((org-agenda-files (list (buffer-file-name)))))))))
</p>
</div>
</div>
</div>

<div id="outline-container-org740d8ce" class="outline-2">
<h2 id="org740d8ce"><span class="section-number-2">54.</span> Embedding YouTube Videos with org-mode Links</h2>
<div class="outline-text-2" id="text-54">
<p>
blogpost: <a href="http://endlessparentheses.com/embedding-youtube-videos-with-org-mode-links.html">Embedding YouTube Videos with org-mode Links</a>
</p>

<ol class="org-ol">
<li>remains simple, clickable links in .org files</li>
<li>turns into an IFrame when exported to HTML</li>
<li>turns into Latex href when exported to LaTex</li>
</ol>

<p>
Example: [BROKEN LINK: yt:A3JAlWM8qRM]
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defvar</span> <span style="color: #b8860b;">yt-iframe-format</span>
  <span style="color: #b22222;">;; </span><span style="color: #b22222;">You may want to change your width and height.</span>
  (concat <span style="color: #bc8f8f;">"&lt;iframe width=\"440\""</span>
          <span style="color: #bc8f8f;">" height=\"335\""</span>
          <span style="color: #bc8f8f;">" src=\"https://www.youtube.com/embed/%s\""</span>
          <span style="color: #bc8f8f;">" frameborder=\"0\""</span>
          <span style="color: #bc8f8f;">" allowfullscreen&gt;%s&lt;/iframe&gt;"</span>))

(org-add-link-type
 <span style="color: #bc8f8f;">"yt"</span>
 (<span style="color: #4169e1;">lambda</span> (handle)
   (browse-url
    (concat <span style="color: #bc8f8f;">"https://www.youtube.com/embed/"</span>
            handle)))
 (<span style="color: #4169e1;">lambda</span> (path desc backend)
   (<span style="color: #4169e1;">cl-case</span> backend
     (html (format yt-iframe-format
                   path (<span style="color: #4169e1;">or</span> desc <span style="color: #bc8f8f;">""</span>)))
     (latex (format <span style="color: #bc8f8f;">"</span><span style="color: #ff0000; font-weight: bold;">\</span><span style="color: #bc8f8f;">href{%s}{%s}"</span>
                    path (<span style="color: #4169e1;">or</span> desc <span style="color: #bc8f8f;">"video"</span>))))))
</pre>
</div>
</div>
</div>


<div id="outline-container-org11b60b1" class="outline-2">
<h2 id="org11b60b1"><span class="section-number-2">55.</span> Package Footer</h2>
<div class="outline-text-2" id="text-55">
<p>
#+END_SRC
</p>

<p>
– org-file-apps (how to open PDFs, DOCs, etc.)
– org-download for drag-and-drop images (<a href="https://github.com/remyhonig/org-download">https://github.com/remyhonig/org-download</a>)
– org-export-… customizations
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 48: </span>~/.emacs.d/54-org-tasks.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 54-org-tasks
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">54-org-tasks.el --- Agenda, TODOs &amp; habits -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
Agenda, TODOs &amp; habits
– org-todo-keywords, org-todo-keyword-faces
– org-agenda-custom-commands
– org-habit setup
– org-super-agenda (<a href="https://github.com/alphapapa/org-super-agenda">https://github.com/alphapapa/org-super-agenda</a>)
</p>
</div>
</div>

<div id="outline-container-org387f432" class="outline-2">
<h2 id="org387f432"><span class="section-number-2">56.</span> Periodic org-save-all-org-buffers</h2>
<div class="outline-text-2" id="text-56">
<p>
This is a scheduling/timing tweak—saving Org buffers automatically on
a timer—so it fits under your 54-org-tasks.org (Agenda &amp; Scheduling)
file, in a “Timing-Related” subsection:
</p>
</div>
</div>

<div id="outline-container-org220aab3" class="outline-2">
<h2 id="org220aab3"><span class="section-number-2">57.</span> 54 – Org Tasks &amp; Agenda</h2>
<div class="outline-text-2" id="text-57">
</div>
<div id="outline-container-org318849d" class="outline-3">
<h3 id="org318849d"><span class="section-number-3">57.1.</span> Timing-Related Autosave for Org</h3>
<div class="outline-text-3" id="text-57-1">
<p>
At one minute before the hour, save all org-mode buffers to disk, so that a
CRON job can auto-commit all changes at the top of the hour.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispER">;;;DISABLED (run-at-time "00:59" 3600 'org-save-all-org-buffers)
</pre>
</div>

<p>
At one minute before the hour, save all Org buffers so an external
cron/git job can pick up the latest.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">;; save all Org buffers at :59 every hour
(run-at-time "00:59" 3600 #'org-save-all-org-buffers)
</pre>
</div>
</div>
</div>






<div id="outline-container-org56e50ec" class="outline-3">
<h3 id="org56e50ec"><span class="section-number-3">57.2.</span> Org-Super-Agenda for Post-Processing the Agenda Item list</h3>
<div class="outline-text-3" id="text-57-2">
<p>
All of org-super-agenda’s configuration belongs with your agenda/task
setup in 54-org-tasks.org. It isn’t part of core Org, capture, or
export—it sits squarely in the “post-processing of agenda views”
phase.
</p>

<p>
The primary use of the <a href="https://github.com/alphapapa/org-super-agenda">org-super-agenda</a><sup>github</sup> package is to post-process the
list of items, usually for the daily/weekly agenda, made by the
<code>org-agenda-list</code> command, but it also works for other agenda views, like
<code>org-tags-view</code>, <code>org-todo-list</code>, <code>org-search-view</code>, etc.
</p>

<p>
<a href="https://melpa.org/#/ht">https://melpa.org/#/ht</a>
<a href="https://github.com/alphapapa/ts.el">https://github.com/alphapapa/ts.el</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> ht)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">imported by org-super-agenda</span>
(<span style="color: #4169e1;">use-package</span> ts)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">imported by org-super-agenda</span>
(<span style="color: #4169e1;">use-package</span> org-super-agenda
  <span style="color: #00008b;">:straight</span> t
  <span style="color: #00008b;">:after</span> org

  <span style="color: #00008b;">:requires</span> (dash ht s ts)
  <span style="color: #00008b;">:defines</span> org-super-agenda-group-types
  <span style="color: #00008b;">:functions</span> org-super-agenda-mode

  <span style="color: #b22222;">;;; </span><span style="color: #b22222;">:init   ;; code executed BEFORE package is loaded</span>

  <span style="color: #00008b;">:config</span> <span style="color: #b22222;">;; </span><span style="color: #b22222;">code executed AFTER package is loaded</span>
    (org-super-agenda-mode t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">enable it globally   DID NOT RUN!</span>

    (set-face-attribute 'org-super-agenda-header nil
      <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"green"</span>
      <span style="color: #00008b;">:weight</span> 'bold
      <span style="color: #00008b;">:overline</span> <span style="color: #bc8f8f;">"green"</span>
    )

    <span style="color: #b22222;">;; </span><span style="color: #b22222;">wire in my new :auto-multiproperty grouping</span>
    (<span style="color: #4169e1;">setq</span> org-super-agenda-group-types
      (plist-put org-super-agenda-group-types
        '<span style="color: #00008b;">:auto-multiproperty</span>
        'jeff--auto-group-by-multiprop
      )
    )

    (add-to-list    <span style="color: #b22222;">;; </span><span style="color: #b22222;">DID NOT RUN!</span>
      'org-super-agenda-auto-selector-keywords '<span style="color: #00008b;">:auto-multiproperty</span>)
)
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(require 'org-super-agenda)</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(org-super-agenda-mode t)</span>

<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(set-face-attribute 'org-super-agenda-header nil</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">:foreground "green"</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">:weight 'bold</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">:overline "green"</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">)</span>

<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">;; wire in my new :auto-multiproperty grouping</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(setq org-super-agenda-group-types</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">(plist-put org-super-agenda-group-types</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">':auto-multiproperty</span>
<span style="color: #b22222;">;;;      </span><span style="color: #b22222;">'jeff--auto-group-by-multiprop</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">)</span>
<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">)</span>

<span style="color: #b22222;">;;;  </span><span style="color: #b22222;">(add-to-list    ;; DID NOT RUN!</span>
<span style="color: #b22222;">;;;    </span><span style="color: #b22222;">'org-super-agenda-auto-selector-keywords ':auto-multiproperty)</span>
</pre>
</div>

<p>
To see the expansion, place your cursor immediately after the (use-package
&#x2026;) expression and then enter: M-x pp-macroexpand-last-sexp
</p>
</div>

<div id="outline-container-org2304213" class="outline-4">
<h4 id="org2304213"><span class="section-number-4">57.2.1.</span> Define My Custom Group Function First</h4>
<div class="outline-text-4" id="text-57-2-1">
<p>
Define a new auto-grouping keyword/function for Org-Super-Agenda called
:auto-direction, that examines the multi-valued property DIRECTION of each
agenda item and <b>copies</b> that item under each distinct agenda heading
named for each DIRECTION value.  Yes, this means an item can appear under
multiple DIRECTIONs in an agenda, which is what I want.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">jeff--auto-group-by-multiprop</span> (all-items propname <span style="color: #228b22;">&amp;rest</span> args)
  <span style="color: #bc8f8f;">"Divide ALL-ITEMS into groups based on their DIRECTION property, if present."</span>

  (<span style="color: #4169e1;">setq</span> non-matching nil)
  (<span style="color: #4169e1;">setq</span> groups (ht-create))

  (<span style="color: #4169e1;">dolist</span> (item all-items)
    (<span style="color: #4169e1;">setq</span> marker
     (<span style="color: #4169e1;">or</span> (get-text-property 0 'org-marker item)
         (get-text-property 0 'org-hd-marker item)))

    (<span style="color: #4169e1;">setq</span> propvalue (org-entry-get marker propname))
    (<span style="color: #4169e1;">if</span> propvalue
      (<span style="color: #4169e1;">let*</span>
        (
          (directions
            (<span style="color: #4169e1;">and</span> propvalue
              (split-string propvalue
                <span style="color: #bc8f8f;">";"</span>        <span style="color: #b22222;">;; </span><span style="color: #b22222;">separator</span>
                t          <span style="color: #b22222;">;; </span><span style="color: #b22222;">omit empty strings</span>
                <span style="color: #bc8f8f;">"[ ]+"</span>     <span style="color: #b22222;">;; </span><span style="color: #b22222;">trim leading/trailing whitespace</span>
              )
            )
          )
        )

        (<span style="color: #4169e1;">dolist</span> (direction directions)
          (ht-set! groups direction
            (cons item (ht-get groups direction)))
        )
      )
      (<span style="color: #4169e1;">push</span> item non-matching)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">else no PROPNAME property</span>
    )
  )

  (<span style="color: #4169e1;">setq</span> ngroups nil)
  (<span style="color: #4169e1;">setq</span> directions (sort (ht-keys groups) 'string&lt;))
  (<span style="color: #4169e1;">dolist</span> (direction directions)
    (<span style="color: #4169e1;">push</span>
      (list <span style="color: #00008b;">:name</span> (format <span style="color: #bc8f8f;">"Direction: %s"</span> direction)
       <span style="color: #00008b;">:items</span> (nreverse (ht-get groups direction))
      )
      ngroups
    )
  )

  (list '<span style="color: #00008b;">:auto-multiproperty</span> non-matching ngroups)
)
</pre>
</div>














<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">(setq org-todo-keywords
      '((sequence "TODO" "IN-PROGRESS" "|" "DONE" "CANCELLED")))
(setq org-agenda-custom-commands
      '(("c" "Simple agenda" todo "TODO")))
(require 'org-habit)
(add-to-list 'org-modules 'org-habit)
(setq org-habit-graph-column 50)
(use-package org-super-agenda
  :straight t
  :after org
  :config
  (org-super-agenda-mode 1)
  (setq org-super-agenda-groups
        '((:name "Today"   :time-grid t)
          (:name "Overdue" :deadline past))))
</pre>
</div>
</div>
</div>
</div>
</div>



<div id="outline-container-orgab5664f" class="outline-2">
<h2 id="orgab5664f"><span class="section-number-2">58.</span> 54 – Org Tasks &amp; Scheduling</h2>
<div class="outline-text-2" id="text-58">
</div>
<div id="outline-container-org059f3fb" class="outline-3">
<h3 id="org059f3fb"><span class="section-number-3">58.1.</span> Holiday Diary &amp; Easter Calculations</h3>
<div class="outline-text-3" id="text-58-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;; </span><span style="color: #b22222;">Calculate Easter&#8208;relative dates for Org/diary integration</span>

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">da-easter</span> (year)
  <span style="color: #bc8f8f;">"Return the absolute day number of Easter Sunday in YEAR."</span>
  (<span style="color: #4169e1;">let*</span> ((century (1+ (/ year 100)))
         (shifted-epact (% (+ 14 (* 11 (% year 19))
                              (- (/ (* 3 century) 4))
                              (/ (+ 5 (* 8 century)) 25)
                              (* 30 century))
                           30))
         (adjusted-epact
          (<span style="color: #4169e1;">if</span> (<span style="color: #4169e1;">or</span> (= shifted-epact 0)
                  (<span style="color: #4169e1;">and</span> (= shifted-epact 1) (&lt; 10 (% year 19))))
              (1+ shifted-epact)
            shifted-epact))
         (paschal-moon
          (- (calendar-absolute-from-gregorian (list 4 19 year))
             adjusted-epact)))
    (calendar-dayname-on-or-before 0 (+ paschal-moon 7))))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">da-easter-gregorian</span> (year)
  <span style="color: #bc8f8f;">"Convert Easter&#8217;s absolute day to Gregorian date list for YEAR."</span>
  (calendar-gregorian-from-absolute (da-easter year)))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">calendar-days-from-easter</span> ()
  <span style="color: #bc8f8f;">"In a diary SEXP, produce days distance from Easter for current DATE."</span>
  (- (calendar-absolute-from-gregorian date)
     (da-easter (calendar-extract-year date))))
</pre>
</div>

<p>
Now you can sprinkle these diary‐style entries into your Org file:
</p>

<p>
```org
</p>
</div>
<ol class="org-ol">
<li><a id="org35f2d40"></a>Good Friday<br />
<div class="outline-text-6" id="text-58-1-0-0-1">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= -2 (calendar-days-from-easter))&gt;</span></span>
</p>
</div>
</li>

<li><a id="org289201d"></a>Easter Sunday<br />
<div class="outline-text-6" id="text-58-1-0-0-2">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= 0  (calendar-days-from-easter))&gt;</span></span>
</p>
</div>
</li>

<li><a id="org33eddf8"></a>Easter Monday<br />
<div class="outline-text-6" id="text-58-1-0-0-3">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= 1  (calendar-days-from-easter))&gt;</span></span>
</p>
</div>
</li>
</ol>





<div id="outline-container-org58b75e9" class="outline-4">
<h4 id="org58b75e9"><span class="section-number-4">58.1.1.</span> Providing a Function to Calculate Easter for Org-Mode Events</h4>
<div class="outline-text-4" id="text-58-1-1">
<p>
The calculation for Easter is complex, but the following Elisp code will
calculate it.  The code come from:
</p>

<p>
<a href="http://github.com/soren/elisp/blob/master/da-kalender.el">http://github.com/soren/elisp/blob/master/da-kalender.el</a>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">da-easter</span> (year)
  <span style="color: #bc8f8f;">"Calculate the date for Easter Sunday in YEAR. Returns the date in the</span>
<span style="color: #bc8f8f;">Gregorian calendar, ie (MM DD YY) format."</span>
  (<span style="color: #4169e1;">let*</span> ((century (1+ (/ year 100)))
         (shifted-epact (% (+ 14 (* 11 (% year 19))
                              (- (/ (* 3 century) 4))
                              (/ (+ 5 (* 8 century)) 25)
                              (* 30 century))
                           30))
         (adjusted-epact (<span style="color: #4169e1;">if</span> (<span style="color: #4169e1;">or</span> (= shifted-epact 0)
                                 (<span style="color: #4169e1;">and</span> (= shifted-epact 1)
                                      (&lt; 10 (% year 19))))
                             (1+ shifted-epact)
                           shifted-epact))
         (paschal-moon (- (calendar-absolute-from-gregorian
                           (list 4 19 year))
                          adjusted-epact)))
    (calendar-dayname-on-or-before 0 (+ paschal-moon 7))))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">da-easter-gregorian</span> (year)
  (calendar-gregorian-from-absolute (da-easter year)))

(<span style="color: #4169e1;">defun</span> <span style="color: #0000ff;">calendar-days-from-easter</span> ()
  <span style="color: #bc8f8f;">"When used in a diary sexp, this function will calculate how many days</span>
<span style="color: #bc8f8f;">are between the current date (DATE) and Easter Sunday."</span>
  (- (calendar-absolute-from-gregorian date)
     (da-easter (calendar-extract-year date))))
</pre>
</div>

<p>
Now we can schedule the public holidays associated with Easter as recurring
events.  Good Friday is 2 days before "Easter", Easter Monday is one day
after.
</p>
</div>

<ol class="org-ol">
<li><a id="org6ef9236"></a>Good Friday<br />
<div class="outline-text-6" id="text-58-1-1-0-1">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= -2 (calendar-days-from-easter))&gt;</span></span>
</p>
</div>
</li>

<li><a id="org84ec562"></a>Easter Sunday<br />
<div class="outline-text-6" id="text-58-1-1-0-2">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= 0 (calendar-days-from-easter))&gt;</span></span>
</p>
</div>
</li>

<li><a id="org8946720"></a>Easter Monday<br />
<div class="outline-text-6" id="text-58-1-1-0-3">
<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;%%(= 1 (calendar-days-from-easter))&gt;</span></span>
</p>





<p>
#+END_SRC
</p>

<p>
### - [ ] INCLUDE: "config/config-task-planning.org"
### - [ ] INCLUDE: "config/config-task-reporting.org"
### - [ ] INCLUDE: "config/config-content-publishing.org"
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 49: </span>~/.emacs.d/55-org-ui.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 55-org-ui
<span class="linenr">2: </span>#+DESCRIPTION: Org Mode Visuals, Agenda UI Enhancements
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">55-org-ui.el --- Org Mode Visuals, Agenda UI Enhancements -*- lexical-binding: t -*-</span>
</pre>
</div>

<p>
– org-bullets (fancier bullets) <a href="https://github.com/jmjones/org-bullets">https://github.com/jmjones/org-bullets</a>
– org-indent-mode vs. native org-startup-indented
– org-superstar as an alternative, org-ellipsis face tuning
– keyboard bindings (org-defkey, org-speed-commands-user)
</p>
</div>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org9adfd51" class="outline-2">
<h2 id="org9adfd51"><span class="section-number-2">59.</span> Visual Bullets for Org Headlines</h2>
<div class="outline-text-2" id="text-59">
<p>
;; ;; org-bullets or org-modern for headline prettification
;; (use-package org-modern
;;   :hook ((org-mode . org-modern-mode)
;;          (org-mode . (lambda ()
;;                        (variable-pitch-mode -1)
;;                        (pragmatapro-prettify-symbols-v0.830)
;;                        (prettify-symbols-mode 1))))
;;   :config
;;     (global-prettify-symbols-mode 1)
;;   :custom
;;     (org-modern-star '("◉" "○" "✸" "✿"))
;;     (org-modern-hide-block-start nil)  ;; Show full #+BEGIN_SRC again
;; )
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">use-package</span> org-bullets
  <span style="color: #00008b;">:hook</span> (org-mode . org-bullets-mode)
  <span style="color: #00008b;">:custom</span>
    (org-bullets-bullet-list '(<span style="color: #bc8f8f;">"&#9679;"</span> <span style="color: #bc8f8f;">"&#9675;"</span> <span style="color: #bc8f8f;">"&#9679;"</span> <span style="color: #bc8f8f;">"&#9675;"</span> <span style="color: #bc8f8f;">"&#9679;"</span> <span style="color: #bc8f8f;">"&#9673;"</span> <span style="color: #bc8f8f;">"&#9675;"</span> <span style="color: #bc8f8f;">"&#9670;"</span>))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cd27b6" class="outline-2">
<h2 id="org9cd27b6"><span class="section-number-2">60.</span> Org face adjustments AFTER theme</h2>
<div class="outline-text-2" id="text-60">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-face-attribute 'org-code nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"Purple"</span>)
(set-face-attribute 'org-list-dt nil <span style="color: #00008b;">:foreground</span> <span style="color: #bc8f8f;">"Orange"</span> <span style="color: #00008b;">:box</span> <span style="color: #bc8f8f;">"White"</span> <span style="color: #00008b;">:inverse-video</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7ae190" class="outline-2">
<h2 id="orgc7ae190"><span class="section-number-2">61.</span> Agenda enhancements</h2>
<div class="outline-text-2" id="text-61">
<p>
AI (use-package org-super-agenda
AI   :after org
AI   :config
AI   (org-super-agenda-mode 1))
</p>
</div>
</div>

<div id="outline-container-org54dcefb" class="outline-2">
<h2 id="org54dcefb"><span class="section-number-2">62.</span> Inline entity rendering, structure template keys, numbering</h2>
<div class="outline-text-2" id="text-62">
<p>
AI (setq org-pretty-entities t
AI       org-num-mode t
AI       org-use-speed-commands t
AI       org-structure-template-alist
AI       '(("a" . "EXPORT ASCII")
AI         ("s" . "SRC")
AI         ("c" . "CENTER")
AI         ("v" . "VERSE")))
</p>
</div>
</div>

<div id="outline-container-org09fbed9" class="outline-2">
<h2 id="org09fbed9"><span class="section-number-2">63.</span> Optional: set faces for org-level headings</h2>
<div class="outline-text-2" id="text-63">
</div>
<div id="outline-container-orgf28f98f" class="outline-3">
<h3 id="orgf28f98f"><span class="section-number-3">63.1.</span> Testing</h3>
<div class="outline-text-3" id="text-63-1">
</div>
<div id="outline-container-org860b920" class="outline-4">
<h4 id="org860b920"><span class="section-number-4">63.1.1.</span> Testing 2</h4>
<div class="outline-text-4" id="text-63-1-1">
</div>
<ol class="org-ol">
<li><a id="org6abbcfc"></a>Testing 3<br />
<ol class="org-ol">
<li><a id="orgb625cb8"></a>Testing 5<br />
<div class="outline-text-6" id="text-63-1-1-1-1">
<p>
AI (dolist (face '((org-level-1 . 1.4)
AI                 (org-level-2 . 1.3)
AI                 (org-level-3 . 1.2)
AI                 (org-level-4 . 1.1)))
AI   (set-face-attribute (car face) nil :weight 'bold :height (cdr face)))
</p>
</div>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org2a6340e" class="outline-2">
<h2 id="org2a6340e"><span class="section-number-2">64.</span> Org-Mode Keybindings &amp; Yanking</h2>
<div class="outline-text-2" id="text-64">
<p>
Fix org-mode's conflict with yasnippet over the TAB key.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #b22222;">;;</span><span style="color: #b22222;">(add-hook 'org-mode-hook</span>
<span style="color: #b22222;">;;    </span><span style="color: #b22222;">(lambda ()</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">(org-set-local 'yas/trigger-key [tab])</span>
<span style="color: #b22222;">;;        </span><span style="color: #b22222;">(define-key yas/keymap [tab] 'yas/next-field-group)))</span>

(add-hook 'org-mode-hook
   (<span style="color: #4169e1;">lambda</span> ()
      (org-defkey org-mode-map <span style="color: #bc8f8f;">"\C-c&amp;"</span> 'org-mark-ring-goto)
   )
)
</pre>
</div>

<p>
Control how yanking unfolds subtrees:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> org-yank-folded-subtrees nil)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">do NOT fold them afterward</span>
(<span style="color: #4169e1;">setq</span> org-yank-adjusted-subtrees t)  <span style="color: #b22222;">;; </span><span style="color: #b22222;">adjust trees into hierarchy during yank</span>
</pre>
</div>
</div>
</div>



<div id="outline-container-orgaff9f8d" class="outline-2">
<h2 id="orgaff9f8d"><span class="section-number-2">65.</span> Make org-mode Checkboxes Work in Headlines, not just Bulleted Items</h2>
<div class="outline-text-2" id="text-65">
<div class="org-src-container">
<pre class="src src-DISABLEDemacs-lisp">(defun wicked/org-update-checkbox-count (&amp;optional all)
  "Update the checkbox statistics in the current section.
   This will find all statistic cookies like [57%] and [6/12] and update
   them with the current numbers.  With optional prefix argument ALL,
   do this for the whole buffer."

  (interactive "P")
  (save-excursion
    (let* ((buffer-invisibility-spec (org-inhibit-invisibility))
      (beg (condition-case nil
        (progn (outline-back-to-heading) (point))
        (error (point-min))))
      (end (move-marker
        (make-marker)
        (progn (or (outline-get-next-sibling) ;; (1)
          (goto-char (point-max)))
                      (point))))
          (re "\\(\\[[0-9]*%\\]\\)\\|\\(\\[[0-9]*/[0-9]*\\]\\)")
          (re-box
            "^[ \t]*\\(*+\\|[-+*]\\|[0-9]+[.)]\\) +\\(\\[[- X]\\]\\)")
           b1 e1 f1 c-on c-off lim (cstat 0))
      (when all
        (goto-char (point-min))
        (or (outline-get-next-sibling) (goto-char (point-max))) ;; (2)
        (setq beg (point) end (point-max)))
      (goto-char beg)
      (while (re-search-forward re end t)
        (setq cstat (1+ cstat)
              b1 (match-beginning 0)
              e1 (match-end 0)
              f1 (match-beginning 1)
              lim (cond
                   ((org-on-heading-p)
                    (or (outline-get-next-sibling) ;; (3)
                        (goto-char (point-max)))
                    (point))
                   ((org-at-item-p) (org-end-of-item) (point))
                   (t nil))
              c-on 0 c-off 0)
        (goto-char e1)
        (when lim
          (while (re-search-forward re-box lim t)
            (if (member (match-string 2) '("[ ]" "[-]"))
                (setq c-off (1+ c-off))
              (setq c-on (1+ c-on))))
          (goto-char b1)
          (insert (if f1
                      (format "[%d%%]" (/ (* 100 c-on)
                                          (max 1 (+ c-on c-off))))
                      (format "[%d/%d]" c-on (+ c-on c-off))))
          (and (looking-at "\\[.*?\\]")
               (replace-match ""))))
      (when (interactive-p)
        (message "Checkbox statistics updated %s (%d places)"
                 (if all "in entire file" "in current outline entry")
                 cstat)))))

(defadvice org-update-checkbox-count (around wicked activate)
  "Fix the built-in checkbox count to understand headlines."
  (setq ad-return-value
        (wicked/org-update-checkbox-count (ad-get-arg 1))))
</pre>
</div>

<ol class="org-ol">
<li>Fixing checkbox counts in headlines</li>
</ol>

<p>
This is a behavior/UI tweak for org-update-checkbox-count, so I’d put
it in 55-org-ui.org under a “Checkboxes &amp; Display” section:
</p>
</div>
</div>

<div id="outline-container-org1e472a2" class="outline-2">
<h2 id="org1e472a2"><span class="section-number-2">66.</span> 55 – Org UI</h2>
<div class="outline-text-2" id="text-66">
</div>
<div id="outline-container-org407544a" class="outline-3">
<h3 id="org407544a"><span class="section-number-3">66.1.</span> Checkboxes in Headlines</h3>
<div class="outline-text-3" id="text-66-1">
<p>
By default Org only updates [n/m] counts on list items. This advice
lets headline statistic cookies also work:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED-AI">(defun wicked/org-update-checkbox-count (&amp;optional all)
  "Update [3/5] or [60%] cookies in headings as well as items."
  (interactive "P")
  (save-excursion
    (let* ((inhibit-invisibility  t)
           (beg (or (and (org-at-heading-p)
                         (point))
                    (progn (outline-back-to-heading) (point))))
           (end (progn (or (outline-get-next-sibling) (goto-char (point-max)))
                       (point)))
           (stat-re "\\(\\[[0-9]*/[0-9]*\\]\\)\\|\\(\\[[0-9]*%\\]\\)")
           (box-re   "^[ \t]*\\(*+\\|[-+*]\\|[0-9]+[.)]\\) +\\(\\[[- X]\\]\\)"))
      (when all (setq beg (point-min) end (point-max)))
      (goto-char beg)
      (while (re-search-forward stat-re end t)
        (let ((count-on 0) (count-off 0) (start (match-beginning 0)))
          (save-excursion
            (goto-char start)
            (while (re-search-forward box-re end t)
              (if (equal (match-string 2) "[X]") (cl-incf count-on) (cl-incf count-off))))
          (let ((new (if (match-beginning 1)
                         (format "[%d/%d]" count-on (+ count-on count-off))
                       (format "[%d%%]" (/ (* 100 count-on)
                                          (max 1 (+ count-on count-off)))))))
            (goto-char start)
            (delete-region (match-beginning 0) (match-end 0))
            (insert new))))))
(advice-add 'org-update-checkbox-count :around #'wicked/org-update-checkbox-count)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org383846f" class="outline-2">
<h2 id="org383846f"><span class="section-number-2">67.</span> Package Footer</h2>
<div class="outline-text-2" id="text-67">
<p>
#+END_SRC
</p>


<p>
### - [ ] INCLUDE: "config/config-scripting-via-org-babel.org"
</p>
</div>
</div>


<div id="outline-container-org573fb79" class="outline-2">
<h2 id="org573fb79"><span class="section-number-2">68.</span> Phase 60 – Personal tooling</h2>
<div class="outline-text-2" id="text-68">
<p>
### (xan/load-org-if-exists "60-ai-tools.org")
### (xan/load-org-if-exists "65-writing-knowledge.org")
### (xan/load-org-if-exists "70-communication-email.org")
### (xan/load-org-if-exists "75-web-editing.org")
</p>
<p>
#+BEGIN_SRC emacs-lisp -n :tangle yes
</p>
</div>
</div>

<div id="outline-container-orgad1583c" class="outline-2">
<h2 id="orgad1583c"><span class="section-number-2">69.</span> Package Header</h2>
</div>

<div id="outline-container-org3e45a49" class="outline-2">
<h2 id="org3e45a49"><span class="section-number-2">70.</span> Versioning Files</h2>
<div class="outline-text-2" id="text-70">
<p>
Documentation for Git can be installed into Emacs, by installing the <code>gitman</code>
info manual.  First, make sure you don't already have it available by doing ???.
</p>

<p>
Git’s manpages can be exported as an info manual called gitman. Magit’s own
info manual links to nodes in that manual instead of the actual manpages
because Info doesn’t support linking to manpages.
</p>

<p>
(setq magit-view-git-manual-method 'man)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lispDISABLED">
;; needed due to a bug in magit 2025-04-05
(straight-register-package
 '(magit-section
   :type git :host github :repo "magit/magit"
   :files ("lisp/magit-section.el")))

(use-package magit
  :defer t
  :straight (magit :type git :host github :repo "magit/magit")
  :commands (magit-status magit-log)
  :config
  (setq magit-display-buffer-function
        #'magit-display-buffer-fullframe-status-v1))

;; https://magit.vc/manual/magit/How-to-install-the-gitman-info-manual_003f.html#How-to-install-the-gitman-info-manual_003f
(setq magit-view-git-manual-method 'man)
</pre>
</div>

<p>
<a href="https://stackoverflow.com/questions/39337586/how-do-git-lfs-and-git-annex-differ">https://stackoverflow.com/questions/39337586/how-do-git-lfs-and-git-annex-differ</a>
</p>

<p>
Git Annex works only through SSH, whereas Git LFS works both with SSH and
HTTPS (SSH support was added in GitLab 8.12). Annex files are stored in a
sub-directory of the normal repositories, whereas LFS files are stored outside
of the repositories in a place you can define.
</p>
</div>
</div>

<div id="outline-container-org9a7ce7e" class="outline-2">
<h2 id="org9a7ce7e"><span class="section-number-2">71.</span> Package End</h2>
<div class="outline-text-2" id="text-71">
<p>
#+END_SRC
</p>
</div>
</div>


<div id="outline-container-org105dc21" class="outline-2">
<h2 id="org105dc21"><span class="section-number-2">72.</span> Final – Private overrides</h2>
<div class="outline-text-2" id="text-72">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 50: </span>~/.emacs.d/99-local-overrides.org</label><pre class="src src-emacs-lisp"><span class="linenr">1: </span>#+TITLE: 99-local-overrides.org
<span class="linenr">2: </span>#+DESCRIPTION: ???
<span class="linenr">3: </span>#+STARTUP: overview
<span class="linenr">4: </span>
<span class="linenr">5: </span>#+BEGIN_SRC emacs-lisp <span style="color: #00008b;">:exports</span> none
<span class="linenr">6: </span><span style="color: #b22222;">;;; </span><span style="color: #b22222;">99-local-overrides.el --- ??Foundational Emacs config -*- lexical-binding: t -*-</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4e12a20" class="outline-2">
<h2 id="org4e12a20"><span class="section-number-2">73.</span> Additional Small Configuration File `M-x customize` Changes</h2>
<div class="outline-text-2" id="text-73">
<p>
Emacs users like to write small tidbits of manual configuration into an .el file so
I use a small file that I never look into, to keep it separate from my
<code>config.org</code>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 51: </span>Custom Ad-Hoc Settings</label><pre class="src src-emacs-lisp">(<span style="color: #4169e1;">setq</span> custom-file (expand-file-name <span style="color: #bc8f8f;">"custom-settings.el"</span> xan/data-dir))
(<span style="color: #4169e1;">when</span> (file-exists-p custom-file)
  (load custom-file 'noerror))
</pre>
</div>

<p>
#+END_SRC
</p>



<p>
### - [ ] proper indentation in org-mode
### - [ ] faces for TODOs
### - [ ] org-element-at-point: Symbol’s function definition is void: org-element&#x2013;cache-active-p
### - [ ] ability to mark TODOs done
### - [ ] a config file just for org-babel stuff
</p>


<p>
### COMMENT PROPERTY:	header-args:emacs-lisp+ :comments link
### 
### 
### ;; After `early-init.el` completes its work, this file does the job of
### ;; setting many somewhat obscure Emacs settings and frame/window
### ;; settings, bootstrapping `straight.el` from the Internet and
### ;; declaring which package repos that `straight.el` should pull from.
### ;;
### ;; It then finishes by loading further configuration from a collection
### ;; of emacs-lisp source blocks tangled from config.org.  Using
### ;; config.org makes it easier for me to document my settings,
### ;; providing explanations and links to further learning material.
### 
### ;;;; (require 'init-audit)
### 
### ;;;; ;; Run my audit check Emacs is idle
### ;;;; (run-with-idle-timer
### ;;;;  10 nil
### ;;;;  (lambda ()
### ;;;;    (init-audit-use-package-missing (expand-file-name "lisp/" user-emacs-directory)
### ;;;; "~/.emacs.d/config.el")))  ;; variable: init-tangle-output
</p>


<p>
### #+BEGIN_ABSTRACT
### 
### <b>Abstract</b>
### 
### This is my Emacs configuration, expressed in the <a href="https://orgmode.org/">org-mode markup</a> so I can
### explain how and why I did each configuration setting, and yet automatically
### export it into emacs-lisp format for loading into Emacs at start-up time.
### This style of documenting is called <a href="https://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a>.
### 
### I maintain my Emacs configuration <a href="https://github.com/xanalogica/.emacs.d/">https://github.com/xanalogica/.emacs.d/</a> and
### automatically publish the polished documentation at ??? using a CI pipeline.
### 
### <a href="https://github.com/xanalogica/.emacs.d/">https://github.com/xanalogica/.emacs.d/</a>  (not on gitlab.com/xanalogica)
### 
### #+END_ABSTRACT
### #+TOC: headlines 2
### 
### * Web Sites that Offer Quality Guidance on Emacs Configuration
### - <a href="https://git.sr.ht/~ashton314/emacs-bedrock/tree">https://git.sr.ht/~ashton314/emacs-bedrock/tree</a>   GOOD!
### - <a href="https://rossabaker.com/configs/emacs/">https://rossabaker.com/configs/emacs/</a>   <code>VERY GOOD ADDITIONS I NEED TO INTEGRATE AND IT IS EMACS 29!</code>
### 
### * My Publishing System
### - <a href="https://github.com/JamesIves/github-pages-deploy-action">https://github.com/JamesIves/github-pages-deploy-action</a>
### 
### My personal ~/.emacs.d/ directory is versioned under
### <a href="https://github.com/xanalogica/emacs.d">https://github.com/xanalogica/emacs.d</a>.  Upon commit, GitHub Actions
###  1. check out
###  2. install emacs
###  3. invoke ./publi.sh to build the site
###  4. publish generate content to GitHub Pages from branch gh-pages
### 
### cause it to be published into a GitHub Page at
### <a href="https://xanalogica.github.io/emacs.d/">https://xanalogica.github.io/emacs.d/</a>.  I have an extensive .gitignore
### that omits the transient, cached or personal content.
### 
### The published content on the gh-pages branch looks like:
###   - config.html  &lt;- config.org
###   - webstyling/
###   - NEEDS index.html &lt;- README.html
### 
### .github/workflows
### site-publisher/
###   publi.sh          invoked from .github/workflows/publish.yml
###   build-site.el
###   webstyling/
###     src/
###     local.css                         REMOVE?
###     paval.css                         REMOVE?
###     paval.js                          REMOVE?
###     theme-readtheorg.html
</p>

<p>
### 
### Org includes a publishing management system that allows you to
### configure automatic HTML conversion of projects composed of
### interlinked Org files. You can also configure Org to automatically
### upload your exported HTML pages and related attachments, such as
### images and source code files, to a web server.
### 
### You can also use Org to convert files into PDF, or even combine HTML
### and PDF conversion so that files are available in both formats on the
### server.
### 
### config.org =&gt; index.org =&gt; index.html
### 
### .emacs.d/.github/workflows/publish.yml
### 
### <a href="https://xanalogica.github.io/.emacs.d/">https://xanalogica.github.io/.emacs.d/</a>
### <a href="http://www.thoughtamps.info/.emacs.d/">http://www.thoughtamps.info/.emacs.d/</a>
### <a href="https://{userid}.github.io/%7Breponame">https://{userid}.github.io/%7Breponame</a>}
### 
### I put it into the form of ReadTheDocs with index along left-side.
### 
### cache/        eshell, eln-cache, backups, auto-save
### data/         places, bookmarks, recentf, tramp, nov-places, transient, eshell, library.org
### 
### 
### * Bootstrap the `straight.el` package system
</p>

<p>
### * The Big Picture
### :PROPERTIES:
### :ID:       87baf222-7172-4202-ac71-f36b30dafc9a
### :END:
### 
### My Emacs configuration is spread out across several files, for ease of
### understanding, sharing and using a feature without dragging everything else
### in.  I try to fully configuration and document each feature I make use of in
### <b>one</b> place and avoid sprinkling it around.
### 
### - ~/.emacs.d/early-init.el
### - ~/.emacs.d/init.el
### - ~/.emacs.d/config.org -&gt; ???
### 
### - GONE ~/.emacs.d/config/config-emacs-display-presentation.org
### - GONE ~/.emacs.d/config/config-emacs-global-keyboard-setup.org
### - GONE ~/.emacs.d/config/config-printing-from-emacs.org
### - GONE ~/.emacs.d/config/config-research.org
### - GONE ~/.emacs.d/config/config-emacs-email-usage.org     UNUSED
### - FAIL ~/.emacs.d/config/config-content-mobile-sync.org   UNUSED
### 
### - ~/.emacs.d/config/config-emacs-use-of-ai.org
### 
### - ~/.emacs.d/config/config-install-of-org-mode.org
### - ~/.emacs.d/config/config-note-capture-using-org-mode.org
### - ~/.emacs.d/config/config-note-refiling-using-org-mode.org
### - ~/.emacs.d/config/config-note-archiving-using-org-mode.org
### - ~/.emacs.d/config/config-scripting-via-org-babel.org
### - ~/.emacs.d/config/config-emacs-new-links-for-org-mode.org
### 
### - ~/.emacs.d/config/config-task-planning.org
### - ~/.emacs.d/config/config-task-reporting.org
### 
### - ~/.emacs.d/config/config-emacs-work-protection.org
### - ~/.emacs.d/config/config-global-syntax-checking.org
### - ~/.emacs.d/config/config-python-development.org
### - ~/.emacs.d/config/config-content-publishing.org
### - ~/.emacs.d/config/config-filetype-epub.org
### - ~/.emacs.d/config/config-emacs-to-be-merged.org
### - ~/.emacs.d/config/config-emacs-use-of-cloning.org  UNUSED
### - ~/.emacs.d/config/config-helpful-notes.org         UNUSED
### 
### backups
### undo
### encrypting ENTIRE Files
### encryption org headings only
### is gptel a mode or a global key configuration?
### is magit a mode to itself and deserving of its own environment configuration?
### is epub a mode to itself and deserving of its own environment configuration?
</p>


<p>
### * PHASE 10: UI and input system
### 
### - [ ] "10-ui-frame-appearance.org"
### 
### 10-ui-frame-appearance.org
###     default-frame-alist, initial-frame-alist
###     Scroll bars, tool bars, menu-bar toggles
### 
### - [ ] "12-ui-font-face.org"
### 
### 12-ui-font-face.org
###     (set-frame-font &#x2026;) guards, fallback logic, dynamic DPI/font lists
### 
### MAKE THIS PULL DOWN OFFICIAL RELEASE USING STRAIGHT
### Loading <i>home/jrush</i>.emacs.d/lisp/pragmatapro-prettify-symbols-v0.829.el (source)&#x2026;done
### 
### - [ ] "15-ui-modeline-input.org"
### 
### 15-ui-modeline-input.org
###     Modeline packages (doom-modeline, powerline)
###     which-key setup, key-chord
###     Cursor style, synthetic input tweaks
</p>

<p>
### * PHASE 20: Global behavior and editing
### - [ ] "20-keybindings-global.org"
### 
###     Your universal keymaps (general.el, C-c prefixes, SPC)
### 
###     Where would GPTel go?
###     AI: GPTel is a minor-mode, enabled globally—so its (use-package
###     gptel :bind ("C-c g" . gptel-open)) belongs here, not in
###     60-ai-tools.org.
### 
### - [ ] "22-printing.org"
### 
###   Region-to-printer commands, ps-print-buffer-with-faces, margins,
###   headers/footers
### 
###     AI: Yes—any “print this region” or PostScript settings live here.
### 
### - [ ] "25-editor-behavior.org"
### 
###     Visual tweaks:
###      - [ ]  <code>hl-line-mode</code>
###      - [ ]  <code>show-paren-mode</code>
###      - [ ] <code>whitespace-mode</code>
### 
###     <code>Trailing-whitespace coloring</code>, ruler columns, indent guides
### 
###     AI: Exactly—this is where “highlight current line” and “show me
###     trailing spaces” belong.
### 
### - [ ] "30-core-behavior-tweaks.org"
###   - [ ] backup policy
###     (setq backup-directory-alist `(("." . ,(expand-file-name "cache/backups/" user-emacs-directory)))
###           delete-old-versions t
###           kept-new-versions 5
###           kept-old-versions 2
###           version-control t)
###   - [ ] auto-save policy
###         (setq auto-save-file-name-transforms `((".*" ,(expand-file-name "cache/auto-save/" user-emacs-directory) t)))
###   - [ ] undo policy
###     (setq undo-tree-history-directory-alist `(("." . ,(expand-file-name "cache/undo/" user-emacs-directory)))
###           undo-tree-auto-save-history t)
###   - [ ] lockfile policy
### 
### 
###     (setq max-lisp-eval-depth 1000
###           max-specpdl-size 1000)
### 
###     Session persistence: save-place-mode, recentf, bookmark-default-file
### 
###     AI: Put backups, max-versions, undo-tree, and lockfile/places
###     files here—they’re core Emacs behaviors, not UI or mode-specific.
</p>

<p>
### * PHASE 40: Programming environment
### - [ ] "40-prog-python.org"
### 
###   40-prog-python.org — all your Python-specific bits: elpy, blacken, pyenv, flycheck
### 
### - [ ] "45-prog-common.org"
### 
### 45-prog-common.org — multi-language tooling: smartparens, lsp-mode, indentation rules, company-mode
### 
### * PHASE 50: Org-mode environment
### - [ ] "50-org-core.org"
### - [ ] "51-org-capture.org"
### - [ ] "52-org-refile-archive.org"
### - [ ] "53-org-links-export.org"
### - [ ] "54-org-tasks.org"
### - [ ] "55-org-ui.org"
### - [ ] "59-org-extensions.org"
### 
### * PHASE 60 – Personal tooling
### 
### Yes: Magit in 80-project-vc.org. EPUB in 65-writing-knowledge.org. They’re big enough ecosystems to merit their own spots.
### 
### - [ ] "60-ai-tools.org"
### 
### Only AI-package setup: ChatGPT integrations, ob-chatgpt-shell tangles, etc.
### 
### - [ ] "65-writing-knowledge.org"
### 
###     nov.el, epub-mode, markdown-mode, pandoc, denote
### 
###     AI: EPUB readers deserve their own file here—65-writing-knowledge.org.
### 
### - [ ] "70-communication-email.org"
### 
### 70-communication-email.org — mu4e, gnus, SMTP, org-mime
### 
### - [ ] "75-web-editing.org"
### 
### 75-web-editing.org — edit-server, eww, web-mode snippets
### 
### 
### - [ ] "80-project-vc.org"
### 
### 80-project-vc.org — project.el, magit, forge, git-auto-commit-mode
### 
### * PHASE 99: Final – Private overrides
### - [ ] xan/load-org-if-exists "99-local-overrides.org")
</p>


<p>
### File: 99-local-overrides.org
### Contents:
### 
###     Machine-specific tweaks: exec-path additions, local-only API keys (wrapped :noexport:)
### 
###     Per-host theme overrides, font size tweaks on the laptop vs desktop
### 
###     Any hacks you don’t want versioned across all machines
### 
###     AI: This is your “scratchpad” for local site-specific config.
</p>
</div>
</div>
</div>
</body>
</html>
